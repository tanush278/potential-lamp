<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Financial Planner Pro - Complete Solution</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #000000;
            color: #ffffff;
            line-height: 1.6;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Profile Management Screen */
        .profile-management {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #000000 0%, #1a1a1a 100%);
        }

        .profile-card {
            background: #111111;
            border: 1px solid #333333;
            border-radius: 20px;
            padding: 40px;
            max-width: 800px;
            width: 90%;
            box-shadow: 0 20px 40px rgba(0,0,0,0.5);
        }

        .profile-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .profile-header h1 {
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #ffffff, #cccccc);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .profile-list {
            margin: 30px 0;
        }

        .profile-item {
            background: #1a1a1a;
            border: 1px solid #333333;
            border-radius: 15px;
            padding: 20px;
            margin: 15px 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .profile-item-info h4 {
            margin-bottom: 5px;
            color: #ffffff;
        }

        .profile-item-info p {
            color: #aaaaaa;
            font-size: 0.9rem;
        }

        /* Cover Page */
        .cover-page {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #000000 0%, #1a1a1a 100%);
            text-align: center;
        }

        .cover-content {
            max-width: 600px;
            padding: 40px;
        }

        .app-title {
            font-size: 4rem;
            font-weight: 700;
            margin-bottom: 20px;
            background: linear-gradient(45deg, #ffffff, #cccccc);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .app-subtitle {
            font-size: 1.5rem;
            color: #aaaaaa;
            margin-bottom: 40px;
        }

        .cover-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }

        /* Main App */
        .main-app {
            display: none;
            min-height: 100vh;
            background: #000000;
        }

        /* Header */
        .app-header {
            background: #111111;
            border-bottom: 1px solid #333333;
            padding: 15px 0;
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .app-logo {
            font-size: 1.8rem;
            font-weight: 700;
            color: #ffffff;
        }

        .profile-info-header {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        /* Navigation */
        .main-nav, .sub-nav {
            background: #1a1a1a;
            border-bottom: 1px solid #333333;
            padding: 15px 0;
        }

        .nav-buttons, .sub-nav-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .nav-btn, .sub-nav-btn {
            background: #333333;
            color: #ffffff;
            border: none;
            padding: 12px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .nav-btn:hover, .sub-nav-btn:hover {
            background: #555555;
            transform: translateY(-2px);
        }

        .nav-btn.active, .sub-nav-btn.active {
            background: #ffffff;
            color: #000000;
        }

        /* Sections */
        .section {
            display: none;
            padding: 40px 0;
            min-height: calc(100vh - 200px);
        }

        .section.active {
            display: block;
        }

        .section-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .section-title {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 15px;
            color: #ffffff;
        }

        .section-subtitle {
            font-size: 1.2rem;
            color: #aaaaaa;
        }

        /* Cards */
        .card {
            background: #111111;
            border: 1px solid #333333;
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
            box-shadow: 0 10px 20px rgba(0,0,0,0.3);
        }

        .card-header {
            margin-bottom: 25px;
            border-bottom: 1px solid #333333;
            padding-bottom: 15px;
        }

        .card-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: #ffffff;
            margin-bottom: 5px;
        }

        .card-subtitle {
            color: #aaaaaa;
            font-size: 0.9rem;
        }

        /* Forms */
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin: 20px 0;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #ffffff;
        }

        .required {
            color: #ff6b6b;
        }

        .form-input, .form-select {
            width: 100%;
            padding: 12px 15px;
            background: #1a1a1a;
            border: 2px solid #333333;
            border-radius: 8px;
            color: #ffffff;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .form-input:focus, .form-select:focus {
            outline: none;
            border-color: #ffffff;
            background: #222222;
        }

        /* Buttons */
        .btn {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 12px 24px;
            border: none;
            border-radius: 25px;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
        }

        .btn-primary {
            background: #ffffff;
            color: #000000;
        }

        .btn-primary:hover {
            background: #f0f0f0;
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(255,255,255,0.2);
        }

        .btn-secondary {
            background: #333333;
            color: #ffffff;
        }

        .btn-secondary:hover {
            background: #555555;
            transform: translateY(-2px);
        }

        .btn-danger {
            background: #dc3545;
            color: #ffffff;
        }

        .btn-danger:hover {
            background: #c82333;
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 0.9rem;
        }

        /* Assessment */
        .assessment-container {
            max-width: 800px;
            margin: 0 auto;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #333333;
            border-radius: 4px;
            margin-bottom: 30px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #ffffff, #cccccc);
            transition: width 0.3s ease;
        }

        .question-card {
            background: #1a1a1a;
            border: 1px solid #333333;
            border-radius: 15px;
            padding: 40px;
            text-align: center;
        }

        .question-number {
            color: #aaaaaa;
            font-size: 1rem;
            margin-bottom: 20px;
        }

        .question-text {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 30px;
            color: #ffffff;
        }

        .options-grid {
            display: grid;
            gap: 15px;
            margin: 30px 0;
        }

        .option-btn {
            background: #333333;
            color: #ffffff;
            border: 2px solid #333333;
            padding: 15px 20px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .option-btn:hover {
            background: #555555;
            border-color: #555555;
        }

        .option-btn.selected {
            background: #ffffff;
            color: #000000;
            border-color: #ffffff;
        }

        .results-container {
            text-align: center;
            padding: 40px;
        }

        .personality-type {
            font-size: 2rem;
            font-weight: 700;
            color: #ffffff;
            margin: 20px 0;
        }

        .personality-description {
            font-size: 1.2rem;
            color: #aaaaaa;
            margin-bottom: 30px;
            line-height: 1.8;
        }

        /* Data Display */
        .data-display {
            background: #0a0a0a;
            border: 1px solid #333333;
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
        }

        .data-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #222222;
        }

        .data-row:last-child {
            border-bottom: none;
        }

        .data-label {
            font-weight: 500;
            color: #aaaaaa;
        }

        .data-value {
            font-weight: 600;
            color: #ffffff;
        }

        /* Lists */
        .items-list {
            margin: 20px 0;
        }

        .list-item {
            background: #1a1a1a;
            border: 1px solid #333333;
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .item-info {
            flex: 1;
        }

        .item-title {
            font-weight: 600;
            color: #ffffff;
            margin-bottom: 5px;
        }

        .item-details {
            color: #aaaaaa;
            font-size: 0.9rem;
        }

        .item-actions {
            display: flex;
            gap: 10px;
        }

        /* Charts */
        .charts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin: 30px 0;
        }

        .chart-container {
            background: #111111;
            border: 1px solid #333333;
            border-radius: 15px;
            padding: 25px;
        }

        .chart-title {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 20px;
            text-align: center;
            color: #ffffff;
        }

        /* Widgets */
        .widgets-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .widget {
            background: #111111;
            border: 1px solid #333333;
            border-radius: 15px;
            padding: 25px;
            text-align: center;
        }

        .widget-icon {
            font-size: 2rem;
            margin-bottom: 15px;
            color: #ffffff;
        }

        .widget-value {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 10px;
            color: #ffffff;
        }

        .widget-label {
            color: #aaaaaa;
            font-size: 0.9rem;
        }

        /* Chatbot */
        .chatbot-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
        }

        .chatbot-toggle {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(45deg, #ffffff, #f0f0f0);
            color: #000000;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            box-shadow: 0 10px 20px rgba(0,0,0,0.3);
            transition: all 0.3s ease;
        }

        .chatbot-toggle:hover {
            transform: scale(1.1);
        }

        .chatbot-window {
            display: none;
            position: absolute;
            bottom: 80px;
            right: 0;
            width: 350px;
            height: 500px;
            background: #111111;
            border: 1px solid #333333;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
        }

        .chatbot-header {
            background: #1a1a1a;
            padding: 15px;
            border-radius: 15px 15px 0 0;
            border-bottom: 1px solid #333333;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chatbot-messages {
            height: 350px;
            overflow-y: auto;
            padding: 15px;
        }

        .chat-message {
            margin: 10px 0;
            display: flex;
            align-items: flex-start;
            gap: 10px;
        }

        .chat-message.user {
            flex-direction: row-reverse;
        }

        .message-avatar {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            background: #333333;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
        }

        .message-content {
            background: #333333;
            color: #ffffff;
            padding: 10px 15px;
            border-radius: 15px;
            max-width: 80%;
            word-wrap: break-word;
        }

        .chat-message.user .message-content {
            background: #ffffff;
            color: #000000;
        }

        .chatbot-input {
            display: flex;
            padding: 15px;
            border-top: 1px solid #333333;
            gap: 10px;
        }

        .chatbot-input input {
            flex: 1;
            padding: 10px;
            background: #1a1a1a;
            border: 1px solid #333333;
            border-radius: 8px;
            color: #ffffff;
        }

        /* Modals */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: #111111;
            border: 1px solid #333333;
            border-radius: 15px;
            padding: 30px;
            max-width: 500px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #333333;
        }

        .modal-title {
            font-size: 1.5rem;
            font-weight: 600;
        }

        .close-btn {
            background: none;
            border: none;
            color: #aaaaaa;
            font-size: 1.5rem;
            cursor: pointer;
        }

        .close-btn:hover {
            color: #ffffff;
        }

        /* Alerts */
        .alert {
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            font-weight: 500;
        }

        .alert-success {
            background: rgba(40, 167, 69, 0.2);
            border: 1px solid #28a745;
            color: #28a745;
        }

        .alert-danger {
            background: rgba(220, 53, 69, 0.2);
            border: 1px solid #dc3545;
            color: #dc3545;
        }

        .alert-info {
            background: rgba(23, 162, 184, 0.2);
            border: 1px solid #17a2b8;
            color: #17a2b8;
        }

        .alert-warning {
            background: rgba(255, 193, 7, 0.2);
            border: 1px solid #ffc107;
            color: #ffc107;
        }

        /* File Upload */
        .file-upload {
            border: 2px dashed #333333;
            border-radius: 10px;
            padding: 40px;
            text-align: center;
            background: #0a0a0a;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .file-upload:hover {
            border-color: #555555;
            background: #111111;
        }

        .upload-icon {
            font-size: 3rem;
            color: #666666;
            margin-bottom: 20px;
        }

        .upload-text {
            color: #aaaaaa;
            margin-bottom: 10px;
        }

        /* Export Options */
        .export-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .export-option {
            background: #1a1a1a;
            border: 1px solid #333333;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .export-option:hover {
            background: #222222;
            border-color: #555555;
        }

        .export-icon {
            font-size: 2rem;
            margin-bottom: 15px;
            color: #ffffff;
        }

        .export-title {
            font-weight: 600;
            margin-bottom: 10px;
        }

        .export-description {
            color: #aaaaaa;
            font-size: 0.9rem;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .app-title {
                font-size: 2.5rem;
            }

            .cover-buttons {
                flex-direction: column;
                align-items: center;
            }

            .btn {
                width: 100%;
                max-width: 300px;
            }

            .form-grid {
                grid-template-columns: 1fr;
            }

            .charts-grid {
                grid-template-columns: 1fr;
            }

            .widgets-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .chatbot-window {
                width: 300px;
                height: 400px;
            }

            .chatbot-messages {
                height: 250px;
            }
        }

        /* Animations */
        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .section {
            animation: fadeIn 0.3s ease-in;
        }
        
        .card {
            transition: transform 0.2s ease;
        }
        
        .card:hover {
            transform: translateY(-2px);
        }
    </style>
</head>
<body>
    <!-- Profile Management Screen -->
    <div id="profile-management" class="profile-management">
        <div class="profile-card">
            <div class="profile-header">
                <h1><i class="fas fa-chart-line"></i> Financial Planner Pro</h1>
                <p>Professional Financial Planning Platform</p>
            </div>

            <!-- Welcome Message for New Users -->
            <div id="welcome-message" class="text-center" style="margin: 30px 0;">
                <h3>Welcome to Your Financial Journey!</h3>
                <p style="color: #aaa; margin: 15px 0;">Create your first profile to start planning your financial future.</p>
            </div>

            <!-- Saved Profiles List -->
            <div id="saved-profiles" class="profile-list" style="display: none;">
                <h3 style="margin-bottom: 20px;">Your Saved Profiles</h3>
                <div id="profiles-container"></div>
            </div>

            <!-- Action Buttons -->
            <div class="cover-buttons">
                <button class="btn btn-primary" onclick="createNewProfile()">
                    <i class="fas fa-plus"></i> Create New Profile
                </button>
                <button class="btn btn-secondary" onclick="showImportModal()">
                    <i class="fas fa-upload"></i> Import Data
                </button>
            </div>
        </div>
    </div>

    <!-- Cover Page -->
    <div id="cover-page" class="cover-page" style="display: none;">
        <div class="cover-content">
            <h1 class="app-title">Financial Planner Pro</h1>
            <p class="app-subtitle">Your Complete Financial Planning Solution</p>
            
            <div class="cover-buttons">
                <button class="btn btn-primary" onclick="startPersonalityAssessment()">
                    <i class="fas fa-brain"></i>
                    Start Assessment
                </button>
                <button class="btn btn-secondary" onclick="startClientProfiling()">
                    <i class="fas fa-user"></i>
                    Skip to Profiling
                </button>
                <button class="btn btn-secondary" onclick="goBackToProfiles()">
                    <i class="fas fa-arrow-left"></i>
                    Back to Profiles
                </button>
            </div>
        </div>
    </div>

    <!-- Main Application -->
    <div id="main-app" class="main-app">
        <!-- Header -->
        <header class="app-header">
            <div class="container">
                <div class="header-content">
                    <div class="app-logo">
                        <i class="fas fa-chart-line"></i>
                        Financial Planner Pro
                    </div>
                    <div class="profile-info-header">
                        <div id="current-profile-info">
                            <i class="fas fa-user-circle"></i>
                            <span id="current-profile-name">Profile Name</span>
                        </div>
                        <button class="btn btn-small btn-secondary" onclick="saveCurrentProfile()">
                            <i class="fas fa-save"></i> Save
                        </button>
                        <button class="btn btn-small btn-secondary" onclick="showExportModal()">
                            <i class="fas fa-download"></i> Export
                        </button>
                        <button class="btn btn-small btn-secondary" onclick="goBackToProfiles()">
                            <i class="fas fa-home"></i> Home
                        </button>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Navigation -->
        <nav class="main-nav">
            <div class="container">
                <div class="nav-buttons">
                    <button class="nav-btn active" onclick="showMainSection('client-data')">
                        <i class="fas fa-user"></i> Client Data
                    </button>
                    <button class="nav-btn" onclick="showMainSection('investment-advisory')">
                        <i class="fas fa-chart-bar"></i> Investment Advisory
                    </button>
                    <button class="nav-btn" onclick="showMainSection('analytics-reports')">
                        <i class="fas fa-analytics"></i> Analytics & Reports
                    </button>
                </div>
            </div>
        </nav>

        <!-- Sub Navigation -->
        <nav class="sub-nav">
            <div class="container">
                <!-- Client Data Sub-nav -->
                <div id="client-data-subnav" class="sub-nav-buttons">
                    <button class="sub-nav-btn active" onclick="showSubSection('personality', this)">Assessment</button>
                    <button class="sub-nav-btn" onclick="showSubSection('profile', this)">Basic Info</button>
                    <button class="sub-nav-btn" onclick="showSubSection('financial', this)">Financial Status</button>
                    <button class="sub-nav-btn" onclick="showSubSection('networth', this)">Net Worth</button>
                    <button class="sub-nav-btn" onclick="showSubSection('goals', this)">Goals & Insurance</button>
                    <button class="sub-nav-btn" onclick="showSubSection('risk', this)">Risk Profile</button>
                </div>

                <!-- Investment Advisory Sub-nav -->
                <div id="investment-advisory-subnav" class="sub-nav-buttons" style="display: none;">
                    <button class="sub-nav-btn active" onclick="showSubSection('recommendations', this)">Investment Plan</button>
                    <button class="sub-nav-btn" onclick="showSubSection('portfolio', this)">Portfolio Analysis</button>
                    <button class="sub-nav-btn" onclick="showSubSection('sip', this)">SIP Calculator</button>
                    <button class="sub-nav-btn" onclick="showSubSection('tax', this)">Tax Planning</button>
                    <button class="sub-nav-btn" onclick="showSubSection('retirement', this)">Retirement</button>
                    <button class="sub-nav-btn" onclick="showSubSection('comparison', this)">Product Comparison</button>
                </div>

                <!-- Analytics & Reports Sub-nav -->
                <div id="analytics-reports-subnav" class="sub-nav-buttons" style="display: none;">
                    <button class="sub-nav-btn active" onclick="showSubSection('analytics', this)">Analytics Dashboard</button>
                    <button class="sub-nav-btn" onclick="showSubSection('reports', this)">Professional Reports</button>
                    <button class="sub-nav-btn" onclick="showSubSection('summary', this)">Executive Summary</button>
                </div>
            </div>
        </nav>

        <!-- Sections Container -->
        <main class="container">
            <!-- Personality Assessment Section -->
            <section id="personality" class="section active">
                <div class="section-header">
                    <h2 class="section-title">
                        <i class="fas fa-brain"></i>
                        Financial Personality Assessment
                    </h2>
                    <p class="section-subtitle">
                        Discover your financial personality to create a personalized investment strategy
                    </p>
                </div>

                <div class="assessment-container">
                    <div class="progress-bar">
                        <div class="progress-fill" id="assessment-progress" style="width: 0%"></div>
                    </div>

                    <div id="assessment-questions">
                        <div class="question-card">
                            <div class="question-number" id="question-number">Question 1 of 5</div>
                            <div class="question-text" id="question-text">Loading question...</div>
                            <div class="options-grid" id="question-options">
                                <!-- Options will be loaded here -->
                            </div>
                        </div>

                        <div style="text-align: center; margin-top: 30px;">
                            <button class="btn btn-secondary" id="prev-btn" onclick="previousQuestion()" style="display: none;">
                                <i class="fas fa-arrow-left"></i> Previous
                            </button>
                            <button class="btn btn-primary" id="next-btn" onclick="nextQuestion()" style="display: none;">
                                Next <i class="fas fa-arrow-right"></i>
                            </button>
                        </div>
                    </div>

                    <div id="assessment-results" style="display: none;">
                        <div class="results-container">
                            <h3>Your Financial Personality</h3>
                            <div class="personality-type" id="personality-type"></div>
                            <div class="personality-description" id="personality-description"></div>
                            <button class="btn btn-primary" onclick="proceedToClientProfiling()">
                                Continue to Profile Setup <i class="fas fa-arrow-right"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Basic Client Information -->
            <section id="profile" class="section">
                <div class="section-header">
                    <h2 class="section-title">
                        <i class="fas fa-user"></i>
                        Basic Client Information
                    </h2>
                    <p class="section-subtitle">
                        Tell us about yourself to personalize your financial plan
                    </p>
                </div>

                <div class="card">
                    <form id="basic-info-form">
                        <div class="form-grid">
                            <div class="form-group">
                                <label class="form-label">Full Name <span class="required">*</span></label>
                                <input type="text" id="client-name" class="form-input" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Age <span class="required">*</span></label>
                                <input type="number" id="client-age" class="form-input" min="18" max="100" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Occupation <span class="required">*</span></label>
                                <input type="text" id="client-occupation" class="form-input" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Marital Status <span class="required">*</span></label>
                                <select id="marital-status" class="form-select" required>
                                    <option value="">Select Status</option>
                                    <option value="single">Single</option>
                                    <option value="married">Married</option>
                                    <option value="divorced">Divorced</option>
                                    <option value="widowed">Widowed</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Number of Dependents <span class="required">*</span></label>
                                <input type="number" id="dependents" class="form-input" min="0" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">City <span class="required">*</span></label>
                                <input type="text" id="client-city" class="form-input" required>
                            </div>
                        </div>
                        <div style="text-align: center; margin-top: 30px;">
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-save"></i> Save Basic Information
                            </button>
                        </div>
                    </form>

                    <div id="saved-basic-info" style="display: none;">
                        <div class="alert alert-success">
                            <i class="fas fa-check-circle"></i> Basic information saved successfully!
                        </div>
                        <div id="basic-info-display"></div>
                        <div style="text-align: center; margin-top: 20px;">
                            <button class="btn btn-secondary" onclick="editBasicInfo()">
                                <i class="fas fa-edit"></i> Modify Information
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Financial Status -->
            <section id="financial" class="section">
                <div class="section-header">
                    <h2 class="section-title">
                        <i class="fas fa-rupee-sign"></i>
                        Financial Status
                    </h2>
                    <p class="section-subtitle">
                        Provide your current income and expense details
                    </p>
                </div>

                <div class="card">
                    <form id="financial-form">
                        <div class="form-grid">
                            <div class="form-group">
                                <label class="form-label">Monthly Income (₹) <span class="required">*</span></label>
                                <input type="number" id="monthly-income" class="form-input" min="0" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Monthly Expenses (₹) <span class="required">*</span></label>
                                <input type="number" id="monthly-expenses" class="form-input" min="0" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Current Savings (₹) <span class="required">*</span></label>
                                <input type="number" id="current-savings" class="form-input" min="0" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Annual Income (₹) <span class="required">*</span></label>
                                <input type="number" id="annual-income" class="form-input" min="0" required>
                            </div>
                        </div>
                        <div style="text-align: center; margin-top: 30px;">
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-save"></i> Save Financial Status
                            </button>
                        </div>
                    </form>

                    <div id="saved-financial-info" style="display: none;">
                        <div class="alert alert-success">
                            <i class="fas fa-check-circle"></i> Financial status saved successfully!
                        </div>
                        <div id="financial-info-display"></div>
                        <div style="text-align: center; margin-top: 20px;">
                            <button class="btn btn-secondary" onclick="editFinancialInfo()">
                                <i class="fas fa-edit"></i> Modify Financial Status
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Net Worth Calculator -->
            <section id="networth" class="section">
                <div class="section-header">
                    <h2 class="section-title">
                        <i class="fas fa-calculator"></i>
                        Net Worth Calculator
                    </h2>
                    <p class="section-subtitle">
                        Calculate your net worth by adding assets and liabilities
                    </p>
                </div>

                <div class="form-grid">
                    <!-- Assets Section -->
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <i class="fas fa-plus-circle"></i>
                                Assets
                            </h3>
                        </div>
                        
                        <form id="asset-form">
                            <div class="form-group">
                                <label class="form-label">Asset Type <span class="required">*</span></label>
                                <select id="asset-type" class="form-select" required>
                                    <option value="">Select Asset Type</option>
                                    <option value="cash">Cash & Bank Deposits</option>
                                    <option value="stocks">Stocks & Mutual Funds</option>
                                    <option value="property">Real Estate</option>
                                    <option value="gold">Gold & Precious Metals</option>
                                    <option value="other">Other Assets</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Asset Name <span class="required">*</span></label>
                                <input type="text" id="asset-name" class="form-input" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Current Value (₹) <span class="required">*</span></label>
                                <input type="number" id="asset-value" class="form-input" min="0" required>
                            </div>
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-plus"></i> Add Asset
                            </button>
                        </form>

                        <div id="assets-list" class="items-list">
                            <!-- Assets will be displayed here -->
                        </div>
                    </div>

                    <!-- Liabilities Section -->
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <i class="fas fa-minus-circle"></i>
                                Liabilities
                            </h3>
                        </div>
                        
                        <form id="loan-form">
                            <div class="form-group">
                                <label class="form-label">Loan Type <span class="required">*</span></label>
                                <select id="loan-type" class="form-select" required>
                                    <option value="">Select Loan Type</option>
                                    <option value="home">Home Loan</option>
                                    <option value="car">Car Loan</option>
                                    <option value="personal">Personal Loan</option>
                                    <option value="education">Education Loan</option>
                                    <option value="credit">Credit Card Debt</option>
                                    <option value="other">Other Loans</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Outstanding Amount (₹) <span class="required">*</span></label>
                                <input type="number" id="loan-amount" class="form-input" min="0" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Interest Rate (%) <span class="required">*</span></label>
                                <input type="number" id="loan-rate" class="form-input" min="0" max="50" step="0.1" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Remaining Tenure (Years) <span class="required">*</span></label>
                                <input type="number" id="loan-tenure" class="form-input" min="0" max="50" required>
                            </div>
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-plus"></i> Add Loan
                            </button>
                        </form>

                        <div id="loans-list" class="items-list">
                            <!-- Loans will be displayed here -->
                        </div>
                    </div>
                </div>

                <!-- Net Worth Summary -->
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">
                            <i class="fas fa-chart-pie"></i>
                            Net Worth Summary
                        </h3>
                    </div>
                    <div id="networth-summary">
                        <div class="data-display">
                            <div class="data-row">
                                <span class="data-label">Total Assets:</span>
                                <span class="data-value" id="total-assets">₹0</span>
                            </div>
                            <div class="data-row">
                                <span class="data-label">Total Liabilities:</span>
                                <span class="data-value" id="total-liabilities">₹0</span>
                            </div>
                            <div class="data-row" style="border-top: 2px solid #ffffff; font-weight: bold; font-size: 1.2rem;">
                                <span class="data-label">Net Worth:</span>
                                <span class="data-value" id="net-worth">₹0</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="charts-grid">
                        <div class="chart-container">
                            <h5 class="chart-title">Asset Distribution</h5>
                            <canvas id="asset-chart"></canvas>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Goals and Insurance -->
            <section id="goals" class="section">
                <div class="section-header">
                    <h2 class="section-title">
                        <i class="fas fa-bullseye"></i>
                        Financial Goals & Insurance Planning
                    </h2>
                    <p class="section-subtitle">
                        Set your financial goals and plan your insurance needs
                    </p>
                </div>

                <div class="form-grid">
                    <!-- Financial Goals -->
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <i class="fas fa-target"></i>
                                Financial Goals
                            </h3>
                        </div>
                        
                        <form id="goal-form">
                            <div class="form-group">
                                <label class="form-label">Goal Name <span class="required">*</span></label>
                                <input type="text" id="goal-name" class="form-input" placeholder="e.g., House Purchase, Child Education" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Target Amount (₹ in today's terms) <span class="required">*</span></label>
                                <input type="number" id="goal-amount" class="form-input" min="0" required>
                                <small style="color: #aaa;">Enter the amount in today's purchasing power</small>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Time Frame (Years) <span class="required">*</span></label>
                                <input type="number" id="goal-timeframe" class="form-input" min="1" max="50" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Expected Inflation Rate (%)</label>
                                <input type="number" id="goal-inflation" class="form-input" value="6" min="0" max="20" step="0.1">
                                <small style="color: #aaa;">Default: 6% per annum</small>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Priority <span class="required">*</span></label>
                                <select id="goal-priority" class="form-select" required>
                                    <option value="">Select Priority</option>
                                    <option value="high">High</option>
                                    <option value="medium">Medium</option>
                                    <option value="low">Low</option>
                                </select>
                            </div>
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-plus"></i> Add Goal
                            </button>
                        </form>

                        <div id="goals-list" class="items-list">
                            <!-- Goals will be displayed here -->
                        </div>
                    </div>

                    <!-- Insurance Planning -->
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <i class="fas fa-shield-alt"></i>
                                Insurance Planning
                            </h3>
                        </div>
                        
                        <form id="insurance-form">
                            <div class="form-group">
                                <label class="form-label">Current Life Insurance Coverage (₹)</label>
                                <input type="number" id="current-life-insurance" class="form-input" min="0">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Current Health Insurance Coverage (₹)</label>
                                <input type="number" id="current-health-insurance" class="form-input" min="0">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Outstanding Loans (₹)</label>
                                <input type="number" id="outstanding-loans" class="form-input" min="0">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Family Annual Expenses (₹) <span class="required">*</span></label>
                                <input type="number" id="family-expenses" class="form-input" min="0" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Income Replacement Years</label>
                                <input type="number" id="income-years" class="form-input" value="10" min="1" max="50">
                            </div>
                            
                            <div style="text-align: center; margin: 20px 0;">
                                <button type="button" class="btn btn-secondary" onclick="calculateLifeInsurance()">
                                    <i class="fas fa-calculator"></i> Calculate Life Insurance Need
                                </button>
                                <button type="button" class="btn btn-secondary" onclick="calculateHealthInsurance()">
                                    <i class="fas fa-calculator"></i> Calculate Health Insurance Need
                                </button>
                            </div>
                            
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-save"></i> Save Insurance Profile
                            </button>
                        </form>

                        <div id="insurance-results" style="display: none;">
                            <!-- Insurance calculation results -->
                        </div>

                        <div id="saved-insurance-info" style="display: none;">
                            <div class="alert alert-success">
                                <i class="fas fa-check-circle"></i> Insurance profile saved successfully!
                            </div>
                            <div id="insurance-info-display"></div>
                            <div style="text-align: center; margin-top: 20px;">
                                <button class="btn btn-secondary" onclick="editInsuranceInfo()">
                                    <i class="fas fa-edit"></i> Modify Insurance Profile
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Risk Profile Assessment -->
            <section id="risk" class="section">
                <div class="section-header">
                    <h2 class="section-title">
                        <i class="fas fa-chart-line"></i>
                        Risk Profile Assessment
                    </h2>
                    <p class="section-subtitle">
                        Determine your investment risk tolerance
                    </p>
                </div>

                <div class="card">
                    <form id="risk-form">
                        <div class="form-grid">
                            <div class="form-group">
                                <label class="form-label">Investment Experience <span class="required">*</span></label>
                                <select id="investment-experience" class="form-select" required>
                                    <option value="">Select Experience Level</option>
                                    <option value="beginner">Beginner (0-2 years)</option>
                                    <option value="intermediate">Intermediate (3-7 years)</option>
                                    <option value="experienced">Experienced (8+ years)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Risk Tolerance <span class="required">*</span></label>
                                <select id="risk-tolerance" class="form-select" required>
                                    <option value="">Select Risk Level</option>
                                    <option value="conservative">Conservative - Prefer stable returns</option>
                                    <option value="moderate">Moderate - Balanced approach</option>
                                    <option value="aggressive">Aggressive - Higher risk for higher returns</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Investment Horizon <span class="required">*</span></label>
                                <select id="investment-horizon" class="form-select" required>
                                    <option value="">Select Time Horizon</option>
                                    <option value="short">Short Term (1-3 years)</option>
                                    <option value="medium">Medium Term (3-7 years)</option>
                                    <option value="long">Long Term (7+ years)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Monthly Investment Capacity (₹) <span class="required">*</span></label>
                                <input type="number" id="monthly-investment" class="form-input" min="0" required>
                            </div>
                        </div>
                        <div style="text-align: center; margin-top: 30px;">
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-save"></i> Save Risk Profile
                            </button>
                        </div>
                    </form>

                    <div id="saved-risk-info" style="display: none;">
                        <div class="alert alert-success">
                            <i class="fas fa-check-circle"></i> Risk profile saved successfully!
                        </div>
                        <div id="risk-info-display"></div>
                        <div style="text-align: center; margin-top: 20px;">
                            <button class="btn btn-secondary" onclick="editRiskInfo()">
                                <i class="fas fa-edit"></i> Modify Risk Profile
                            </button>
                        </div>
                    </div>
                </div>
            </section>
            <!-- Investment Recommendations -->
            <section id="recommendations" class="section">
                <div class="section-header">
                    <h2 class="section-title">
                        <i class="fas fa-lightbulb"></i>
                        Investment Recommendations
                    </h2>
                    <p class="section-subtitle">
                        Personalized investment strategies based on your profile
                    </p>
                </div>

                <div class="card">
                    <div style="text-align: center; margin-bottom: 30px;">
                        <button class="btn btn-primary" onclick="generateInvestmentPlan()">
                            <i class="fas fa-chart-bar"></i> Generate Detailed Investment Plan
                        </button>
                    </div>
                    
                    <div id="investment-plan-results">
                        <!-- Investment plan will be displayed here -->
                    </div>
                </div>
            </section>

            <!-- Portfolio Analysis -->
            <section id="portfolio" class="section">
                <div class="section-header">
                    <h2 class="section-title">
                        <i class="fas fa-pie-chart"></i>
                        Portfolio Analysis
                    </h2>
                    <p class="section-subtitle">
                        Analyze your current investment portfolio
                    </p>
                </div>

                <div class="card">
                    <div style="text-align: center; margin-bottom: 30px;">
                        <button class="btn btn-primary" onclick="analyzePortfolio()">
                            <i class="fas fa-search"></i> Analyze Current Portfolio
                        </button>
                        <button class="btn btn-secondary" onclick="generateRebalancingPlan()">
                            <i class="fas fa-balance-scale"></i> View Rebalancing Plan
                        </button>
                    </div>
                    
                    <div id="portfolio-analysis-results">
                        <!-- Portfolio analysis will be displayed here -->
                    </div>
                </div>
            </section>

            <!-- SIP Calculator -->
            <section id="sip" class="section">
                <div class="section-header">
                    <h2 class="section-title">
                        <i class="fas fa-calendar-alt"></i>
                        SIP Calculator
                    </h2>
                    <p class="section-subtitle">
                        Calculate your systematic investment plan returns with inflation adjustment
                    </p>
                </div>

                <div class="card">
                    <form id="sip-form">
                        <div class="form-grid">
                            <div class="form-group">
                                <label class="form-label">Monthly SIP Amount (₹) <span class="required">*</span></label>
                                <input type="number" id="sip-amount" class="form-input" min="500" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Expected Annual Return (%) <span class="required">*</span></label>
                                <input type="number" id="sip-return" class="form-input" value="12" min="1" max="30" step="0.1" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Investment Period (Years) <span class="required">*</span></label>
                                <input type="number" id="sip-period" class="form-input" min="1" max="50" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Expected Inflation Rate (%)</label>
                                <input type="number" id="sip-inflation" class="form-input" value="6" min="0" max="20" step="0.1">
                                <small style="color: #aaa;">For inflation-adjusted returns</small>
                            </div>
                        </div>
                        
                        <div style="text-align: center; margin: 30px 0;">
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-calculator"></i> Calculate SIP Returns
                            </button>
                        </div>
                    </form>

                    <div id="sip-results" style="display: none;">
                        <!-- SIP calculation results will be displayed here -->
                    </div>
                </div>
            </section>

            <!-- Tax Planning -->
            <section id="tax" class="section">
                <div class="section-header">
                    <h2 class="section-title">
                        <i class="fas fa-receipt"></i>
                        Tax Saving Plan
                    </h2>
                    <p class="section-subtitle">
                        Optimize your tax savings with smart investment planning
                    </p>
                </div>

                <div class="card">
                    <form id="tax-planning-form">
                        <div class="form-grid">
                            <div class="form-group">
                                <label class="form-label">Annual Taxable Income (₹) <span class="required">*</span></label>
                                <input type="number" id="taxable-income" class="form-input" min="0" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Current Tax Regime <span class="required">*</span></label>
                                <select id="tax-regime" class="form-select" required>
                                    <option value="">Select Tax Regime</option>
                                    <option value="old">Old Tax Regime (with deductions)</option>
                                    <option value="new">New Tax Regime (lower rates)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Current 80C Investments (₹)</label>
                                <input type="number" id="current-80c" class="form-input" min="0" max="150000">
                                <small style="color: #aaa;">Maximum limit: ₹1.5 lakhs</small>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Health Insurance Premium (₹)</label>
                                <input type="number" id="health-premium" class="form-input" min="0">
                                <small style="color: #aaa;">For 80D deduction</small>
                            </div>
                        </div>
                        
                        <div style="text-align: center; margin: 30px 0;">
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-calculator"></i> Generate Tax Saving Plan
                            </button>
                        </div>
                    </form>

                    <div id="tax-plan-results" style="display: none;">
                        <!-- Tax planning results will be displayed here -->
                    </div>
                </div>
            </section>

            <!-- Retirement Planning -->
            <section id="retirement" class="section">
                <div class="section-header">
                    <h2 class="section-title">
                        <i class="fas fa-umbrella"></i>
                        Retirement Planning
                    </h2>
                    <p class="section-subtitle">
                        Plan for a comfortable retirement with inflation adjustment
                    </p>
                </div>

                <div class="card">
                    <form id="retirement-form">
                        <div class="form-grid">
                            <div class="form-group">
                                <label class="form-label">Current Age <span class="required">*</span></label>
                                <input type="number" id="current-age" class="form-input" min="18" max="65" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Retirement Age <span class="required">*</span></label>
                                <input type="number" id="retirement-age" class="form-input" min="50" max="75" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Current Monthly Expenses (₹) <span class="required">*</span></label>
                                <input type="number" id="current-monthly-expenses" class="form-input" min="0" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Expected Inflation Rate (%)</label>
                                <input type="number" id="retirement-inflation" class="form-input" value="6" min="0" max="15" step="0.1">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Life Expectancy <span class="required">*</span></label>
                                <input type="number" id="life-expectancy" class="form-input" value="80" min="65" max="100" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Expected Return on Investments (%)</label>
                                <input type="number" id="retirement-return" class="form-input" value="10" min="5" max="20" step="0.1">
                            </div>
                        </div>
                        
                        <div style="text-align: center; margin: 30px 0;">
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-calculator"></i> Calculate Retirement Needs
                            </button>
                        </div>
                    </form>

                    <div id="retirement-results" style="display: none;">
                        <!-- Retirement planning results will be displayed here -->
                    </div>
                </div>
            </section>

            <!-- Product Comparison -->
            <section id="comparison" class="section">
                <div class="section-header">
                    <h2 class="section-title">
                        <i class="fas fa-balance-scale"></i>
                        Smart Product Comparison
                    </h2>
                    <p class="section-subtitle">
                        Compare financial products based on your profile and goals
                    </p>
                </div>

                <div class="card">
                    <div style="text-align: center; margin-bottom: 30px;">
                        <button class="btn btn-primary" onclick="generateSmartComparison()">
                            <i class="fas fa-search"></i> Generate Smart Recommendations
                        </button>
                    </div>
                    
                    <div id="product-comparison-results">
                        <!-- Product comparison will be displayed here -->
                    </div>
                </div>
            </section>

            <!-- Analytics Dashboard -->
            <section id="analytics" class="section">
                <div class="section-header">
                    <h2 class="section-title">
                        <i class="fas fa-chart-bar"></i>
                        Financial Analytics Dashboard
                    </h2>
                    <p class="section-subtitle">
                        Comprehensive view of your financial health
                    </p>
                </div>

                <!-- Financial Health Widgets -->
                <div class="widgets-grid">
                    <div class="widget">
                        <div class="widget-icon"><i class="fas fa-chart-line"></i></div>
                        <div class="widget-value" id="financial-score">0</div>
                        <div class="widget-label">Financial Health Score</div>
                    </div>
                    <div class="widget">
                        <div class="widget-icon"><i class="fas fa-wallet"></i></div>
                        <div class="widget-value" id="net-worth-widget">₹0</div>
                        <div class="widget-label">Net Worth</div>
                    </div>
                    <div class="widget">
                        <div class="widget-icon"><i class="fas fa-piggy-bank"></i></div>
                        <div class="widget-value" id="savings-rate">0%</div>
                        <div class="widget-label">Savings Rate</div>
                    </div>
                    <div class="widget">
                        <div class="widget-icon"><i class="fas fa-shield"></i></div>
                        <div class="widget-value" id="emergency-fund-months">0</div>
                        <div class="widget-label">Emergency Fund (Months)</div>
                    </div>
                </div>

                <!-- Charts Grid -->
                <div class="charts-grid">
                    <div class="chart-container">
                        <h5 class="chart-title">Asset Allocation</h5>
                        <canvas id="analytics-asset-chart"></canvas>
                    </div>
                    <div class="chart-container">
                        <h5 class="chart-title">Income vs Expenses</h5>
                        <canvas id="income-expense-chart"></canvas>
                    </div>
                    <div class="chart-container">
                        <h5 class="chart-title">Goal Progress</h5>
                        <canvas id="goal-progress-chart"></canvas>
                    </div>
                    <div class="chart-container">
                        <h5 class="chart-title">Net Worth Projection</h5>
                        <canvas id="networth-projection-chart"></canvas>
                    </div>
                </div>

                <div style="text-align: center; margin: 30px 0;">
                    <button class="btn btn-primary" onclick="updateAllCharts()">
                        <i class="fas fa-sync"></i> Refresh Analytics
                    </button>
                </div>
            </section>

            <!-- Professional Reports -->
            <section id="reports" class="section">
                <div class="section-header">
                    <h2 class="section-title">
                        <i class="fas fa-file-alt"></i>
                        Professional Reports
                    </h2>
                    <p class="section-subtitle">
                        Generate comprehensive financial reports with preview and PDF download
                    </p>
                </div>

                <div class="form-grid">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <i class="fas fa-chart-bar"></i>
                                Detailed Financial Report
                            </h3>
                            <p class="card-subtitle">Complete analysis of your financial position</p>
                        </div>
                        <div style="text-align: center;">
                            <button class="btn btn-primary" onclick="generateDetailedReport()">
                                <i class="fas fa-eye"></i> Preview Report
                            </button>
                            <button class="btn btn-secondary" onclick="downloadDetailedReport()">
                                <i class="fas fa-download"></i> Download PDF
                            </button>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <i class="fas fa-lightbulb"></i>
                                Investment Strategy Report
                            </h3>
                            <p class="card-subtitle">Personalized investment recommendations</p>
                        </div>
                        <div style="text-align: center;">
                            <button class="btn btn-primary" onclick="generateInvestmentReport()">
                                <i class="fas fa-eye"></i> Preview Report
                            </button>
                            <button class="btn btn-secondary" onclick="downloadInvestmentReport()">
                                <i class="fas fa-download"></i> Download PDF
                            </button>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <i class="fas fa-tasks"></i>
                                Action Plan Report
                            </h3>
                            <p class="card-subtitle">Step-by-step financial action items</p>
                        </div>
                        <div style="text-align: center;">
                            <button class="btn btn-primary" onclick="generateActionPlan()">
                                <i class="fas fa-eye"></i> Preview Report
                            </button>
                            <button class="btn btn-secondary" onclick="downloadActionPlan()">
                                <i class="fas fa-download"></i> Download PDF
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Report Preview Area -->
                <div id="report-preview" style="display: none;">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <i class="fas fa-eye"></i>
                                Report Preview
                            </h3>
                        </div>
                        <div id="report-content">
                            <!-- Report content will be displayed here -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- Executive Summary -->
            <section id="summary" class="section">
                <div class="section-header">
                    <h2 class="section-title">
                        <i class="fas fa-clipboard-list"></i>
                        Executive Summary & Alerts
                    </h2>
                    <p class="section-subtitle">
                        Key insights and actionable alerts
                    </p>
                </div>

                <div class="card">
                    <div style="text-align: center; margin-bottom: 30px;">
                        <button class="btn btn-primary" onclick="generateExecutiveSummary()">
                            <i class="fas fa-chart-line"></i> Generate Executive Summary
                        </button>
                    </div>
                    
                    <div id="executive-summary-content">
                        <!-- Executive summary will be displayed here -->
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Chatbot -->
    <div class="chatbot-container">
        <button class="chatbot-toggle" onclick="toggleChatbot()">
            <i class="fas fa-comments"></i>
        </button>
        <div class="chatbot-window" id="chatbot-window">
            <div class="chatbot-header">
                <h4><i class="fas fa-robot"></i> Financial Assistant</h4>
                <button class="close-btn" onclick="toggleChatbot()">×</button>
            </div>
            <div class="chatbot-messages" id="chat-messages">
                <!-- Messages will be added here -->
            </div>
            <div class="chatbot-input">
                <input type="text" id="chat-input" placeholder="Type your message..." onkeypress="handleChatKeyPress(event)">
                <button class="btn btn-primary btn-small" onclick="sendMessage()">Send</button>
            </div>
        </div>
    </div>

    <!-- Save Profile Modal -->
    <div id="save-profile-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Save Profile</h3>
                <button class="close-btn" onclick="hideProfileModal()">&times;</button>
            </div>
            <form id="save-profile-form">
                <div class="form-group">
                    <label class="form-label">Profile Name <span class="required">*</span></label>
                    <input type="text" id="profile-name-input" class="form-input" required>
                </div>
                <div style="text-align: center; margin-top: 20px;">
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-save"></i> Save Profile
                    </button>
                    <button type="button" class="btn btn-secondary" onclick="hideProfileModal()">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Export Modal -->
    <div id="export-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Export Your Data</h3>
                <button class="close-btn" onclick="hideExportModal()">&times;</button>
            </div>
            <div class="export-options">
                <div class="export-option" onclick="exportCurrentData()">
                    <div class="export-icon"><i class="fas fa-file-code"></i></div>
                    <div class="export-title">JSON File</div>
                    <div class="export-description">Complete backup for import</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Import Modal -->
    <div id="import-data-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Import Your Data</h3>
                <button class="close-btn" onclick="hideImportModal()">&times;</button>
            </div>
            <div class="file-upload">
                <div class="upload-icon"><i class="fas fa-cloud-upload-alt"></i></div>
                <div class="upload-text">Select JSON file to import</div>
                <input type="file" id="import-file-input" accept=".json" style="margin: 20px 0;">
                <div style="text-align: center;">
                    <button class="btn btn-primary" onclick="importFromFile()">
                        <i class="fas fa-upload"></i> Import Data
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Global Variables
        let currentProfileId = null;
        let clientData = {
            profileInfo: {},
            basicInfo: {},
            financialStatus: {},
            assets: [],
            loans: [],
            goals: [],
            insuranceProfile: {},
            riskProfile: {},
            assessmentResults: {}
        };

        let assessmentQuestions = [
            {
                question: "How do you react to market volatility?",
                options: [
                    { text: "I panic and want to sell immediately", score: 1 },
                    { text: "I feel uncomfortable but hold on", score: 2 },
                    { text: "I see it as a buying opportunity", score: 3 },
                    { text: "I'm completely comfortable with fluctuations", score: 4 }
                ]
            },
            {
                question: "What's your primary investment goal?",
                options: [
                    { text: "Capital preservation", score: 1 },
                    { text: "Steady income generation", score: 2 },
                    { text: "Long-term wealth creation", score: 3 },
                    { text: "Maximum returns regardless of risk", score: 4 }
                ]
            },
            {
                question: "If your investment lost 20% in a year, you would:",
                options: [
                    { text: "Sell everything immediately", score: 1 },
                    { text: "Reduce your investment amount", score: 2 },
                    { text: "Continue with the same strategy", score: 3 },
                    { text: "Invest more to average down", score: 4 }
                ]
            },
            {
                question: "What percentage of your income can you invest?",
                options: [
                    { text: "Less than 10%", score: 1 },
                    { text: "10-20%", score: 2 },
                    { text: "20-30%", score: 3 },
                    { text: "More than 30%", score: 4 }
                ]
            },
            {
                question: "How important is liquidity for your investments?",
                options: [
                    { text: "Extremely important - need immediate access", score: 1 },
                    { text: "Somewhat important - occasional access needed", score: 2 },
                    { text: "Not very important - can wait a few years", score: 3 },
                    { text: "Not important at all - long-term commitment", score: 4 }
                ]
            }
        ];

        let currentQuestion = 0;
        let selectedAnswers = [];
        let charts = {};
        let isChatbotOpen = false;

        // Initialize Application
        document.addEventListener('DOMContentLoaded', function() {
            loadProfiles();
            
            // Add event listeners for forms
            document.getElementById('basic-info-form').addEventListener('submit', function(e) {
                e.preventDefault();
                saveBasicInfo();
            });
            
            document.getElementById('financial-form').addEventListener('submit', function(e) {
                e.preventDefault();
                saveFinancialStatus();
            });
            
            document.getElementById('asset-form').addEventListener('submit', function(e) {
                e.preventDefault();
                addAsset();
            });
            
            document.getElementById('loan-form').addEventListener('submit', function(e) {
                e.preventDefault();
                addLoan();
            });
            
            document.getElementById('goal-form').addEventListener('submit', function(e) {
                e.preventDefault();
                addGoal();
            });
            
            document.getElementById('insurance-form').addEventListener('submit', function(e) {
                e.preventDefault();
                saveInsuranceProfile();
            });
            
            document.getElementById('risk-form').addEventListener('submit', function(e) {
                e.preventDefault();
                saveRiskProfile();
            });
            
            document.getElementById('sip-form').addEventListener('submit', function(e) {
                e.preventDefault();
                calculateSIPReturns();
            });
            
            document.getElementById('tax-planning-form').addEventListener('submit', function(e) {
                e.preventDefault();
                generateTaxSavingPlan();
            });
            
            document.getElementById('retirement-form').addEventListener('submit', function(e) {
                e.preventDefault();
                calculateRetirement();
            });
            
            document.getElementById('save-profile-form').addEventListener('submit', function(e) {
                e.preventDefault();
                saveCurrentProfile();
            });
            
            // Initialize assessment
            loadAssessmentQuestion();
        });

        // Profile Management Functions
        function loadProfiles() {
            const profiles = JSON.parse(localStorage.getItem('financialPlannerProfiles') || '{}');
            const profilesContainer = document.getElementById('profiles-container');
            const welcomeMessage = document.getElementById('welcome-message');
            const savedProfiles = document.getElementById('saved-profiles');

            if (Object.keys(profiles).length === 0) {
                welcomeMessage.style.display = 'block';
                savedProfiles.style.display = 'none';
            } else {
                welcomeMessage.style.display = 'none';
                savedProfiles.style.display = 'block';
                
                profilesContainer.innerHTML = '';
                
                Object.entries(profiles).forEach(([id, profile]) => {
                    const profileCard = document.createElement('div');
                    profileCard.className = 'profile-item';
                    profileCard.innerHTML = `
                        <div class="profile-item-info">
                            <h4>${profile.profileInfo.name || 'Unnamed Profile'}</h4>
                            <p>Created: ${new Date(profile.profileInfo.createdDate).toLocaleDateString()}</p>
                            <p>Last Modified: ${new Date(profile.profileInfo.lastModified).toLocaleDateString()}</p>
                        </div>
                        <div class="profile-item-actions">
                            <button class="btn btn-primary btn-small" onclick="loadProfile('${id}')">
                                <i class="fas fa-folder-open"></i> Open
                            </button>
                            <button class="btn btn-danger btn-small" onclick="deleteProfile('${id}')">
                                <i class="fas fa-trash"></i> Delete
                            </button>
                        </div>
                    `;
                    profilesContainer.appendChild(profileCard);
                });
            }
        }

        function createNewProfile() {
            currentProfileId = null;
            clientData = {
                profileInfo: {},
                basicInfo: {},
                financialStatus: {},
                assets: [],
                loans: [],
                goals: [],
                insuranceProfile: {},
                riskProfile: {},
                assessmentResults: {}
            };
            
            document.getElementById('profile-management').style.display = 'none';
            document.getElementById('cover-page').style.display = 'flex';
        }

        function loadProfile(profileId) {
            const profiles = JSON.parse(localStorage.getItem('financialPlannerProfiles') || '{}');
            const profile = profiles[profileId];
            
            if (profile) {
                currentProfileId = profileId;
                clientData = profile;
                
                document.getElementById('profile-management').style.display = 'none';
                document.getElementById('main-app').style.display = 'block';
                
                loadClientData();
                updateHeaderProfileInfo();
            }
        }

        function deleteProfile(profileId) {
            if (confirm('Are you sure you want to delete this profile? This action cannot be undone.')) {
                const profiles = JSON.parse(localStorage.getItem('financialPlannerProfiles') || '{}');
                delete profiles[profileId];
                localStorage.setItem('financialPlannerProfiles', JSON.stringify(profiles));
                loadProfiles();
                showAlert('Profile deleted successfully!', 'success');
            }
        }

        function goBackToProfiles() {
            document.getElementById('profile-management').style.display = 'flex';
            document.getElementById('cover-page').style.display = 'none';
            document.getElementById('main-app').style.display = 'none';
            loadProfiles();
        }

        // Navigation Functions
        function startPersonalityAssessment() {
            document.getElementById('cover-page').style.display = 'none';
            document.getElementById('main-app').style.display = 'block';
            showMainSection('client-data');
            showSubSection('personality', document.querySelector('[onclick="showSubSection(\'personality\', this)"]'));
            loadAssessmentQuestion();
        }

        function startClientProfiling() {
            document.getElementById('cover-page').style.display = 'none';
            document.getElementById('main-app').style.display = 'block';
            showMainSection('client-data');
            showSubSection('profile', document.querySelector('[onclick="showSubSection(\'profile\', this)"]'));
        }

        function showMainSection(section) {
            // Hide all sub-nav groups
            document.querySelectorAll('[id$="-subnav"]').forEach(nav => nav.style.display = 'none');
            
            // Show selected sub-nav
            document.getElementById(section + '-subnav').style.display = 'flex';
            
            // Update main navigation
            document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            // Show first sub-section of the selected main section
            const firstSubBtn = document.querySelector(`#${section}-subnav .sub-nav-btn`);
            if (firstSubBtn) {
                firstSubBtn.click();
            }
        }

        function showSubSection(section, element) {
            // Hide all sections
            document.querySelectorAll('.section').forEach(sec => sec.classList.remove('active'));
            
            // Show selected section
            document.getElementById(section).classList.add('active');

            // Update sub-navigation
            document.querySelectorAll('.sub-nav-btn').forEach(btn => btn.classList.remove('active'));
            if (element) element.classList.add('active');

            // Auto-save when switching sections
            if (currentProfileId) {
                autoSave();
            }
        }

        function autoSave() {
            clientData.profileInfo.lastModified = new Date().toISOString();
            const profiles = JSON.parse(localStorage.getItem('financialPlannerProfiles') || '{}');
            profiles[currentProfileId] = clientData;
            localStorage.setItem('financialPlannerProfiles', JSON.stringify(profiles));
        }

        // Assessment Functions
        function loadAssessmentQuestion() {
            if (currentQuestion >= assessmentQuestions.length) {
                completeAssessment();
                return;
            }

            const question = assessmentQuestions[currentQuestion];
            document.getElementById('question-number').textContent = `Question ${currentQuestion + 1} of ${assessmentQuestions.length}`;
            document.getElementById('question-text').textContent = question.question;

            const optionsContainer = document.getElementById('question-options');
            optionsContainer.innerHTML = '';

            question.options.forEach((option, index) => {
                const optionBtn = document.createElement('button');
                optionBtn.className = 'option-btn';
                optionBtn.textContent = option.text;
                optionBtn.onclick = () => selectOption(index);
                optionsContainer.appendChild(optionBtn);
            });

            // Update progress bar
            const progress = ((currentQuestion) / assessmentQuestions.length) * 100;
            document.getElementById('assessment-progress').style.width = progress + '%';

            // Show/hide navigation buttons
            document.getElementById('prev-btn').style.display = currentQuestion > 0 ? 'inline-flex' : 'none';
            document.getElementById('next-btn').style.display = 'none';
        }

        function selectOption(optionIndex) {
            // Remove previous selection
            document.querySelectorAll('.option-btn').forEach(btn => btn.classList.remove('selected'));
            
            // Add selection to clicked option
            event.target.classList.add('selected');
            
            // Store answer
            selectedAnswers[currentQuestion] = {
                questionIndex: currentQuestion,
                optionIndex: optionIndex,
                score: assessmentQuestions[currentQuestion].options[optionIndex].score
            };

            // Show next button
            document.getElementById('next-btn').style.display = 'inline-flex';
        }

        function nextQuestion() {
            if (selectedAnswers[currentQuestion]) {
                currentQuestion++;
                loadAssessmentQuestion();
            }
        }

        function previousQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                loadAssessmentQuestion();
                
                // Restore previous selection
                if (selectedAnswers[currentQuestion]) {
                    const optionBtns = document.querySelectorAll('.option-btn');
                    optionBtns[selectedAnswers[currentQuestion].optionIndex].classList.add('selected');
                    document.getElementById('next-btn').style.display = 'inline-flex';
                }
            }
        }

        function completeAssessment() {
            // Calculate total score
            const totalScore = selectedAnswers.reduce((sum, answer) => sum + answer.score, 0);
            const averageScore = totalScore / assessmentQuestions.length;

            let personalityType, description;

            if (averageScore <= 1.5) {
                personalityType = "Conservative Investor";
                description = "You prefer stability and capital preservation. Focus on fixed deposits, bonds, and conservative mutual funds with steady returns.";
            } else if (averageScore <= 2.5) {
                personalityType = "Moderate Investor";
                description = "You seek balanced growth with moderate risk. A mix of equity and debt funds would suit your investment style.";
            } else if (averageScore <= 3.5) {
                personalityType = "Growth Investor";
                description = "You're comfortable with higher risk for better returns. Equity mutual funds and stocks align with your investment goals.";
            } else {
                personalityType = "Aggressive Investor";
                description = "You're willing to take high risks for maximum returns. Focus on equity funds, stocks, and emerging market investments.";
            }

            // Store results
            clientData.assessmentResults = {
                personalityType: personalityType,
                description: description,
                score: averageScore
            };

            // Display results
            document.getElementById('assessment-questions').style.display = 'none';
            document.getElementById('assessment-results').style.display = 'block';
            document.getElementById('personality-type').textContent = personalityType;
            document.getElementById('personality-description').textContent = description;

            // Update progress bar to 100%
            document.getElementById('assessment-progress').style.width = '100%';
        }

        function proceedToClientProfiling() {
            showSubSection('profile', document.querySelector('[onclick="showSubSection(\'profile\', this)"]'));
        }

        // Basic Info Functions
        function saveBasicInfo() {
            clientData.basicInfo = {
                name: document.getElementById('client-name').value,
                age: document.getElementById('client-age').value,
                occupation: document.getElementById('client-occupation').value,
                maritalStatus: document.getElementById('marital-status').value,
                dependents: document.getElementById('dependents').value,
                city: document.getElementById('client-city').value
            };

            displayBasicInfo();
            autoSave();
        }

        function displayBasicInfo() {
            const info = clientData.basicInfo;
            document.getElementById('basic-info-form').style.display = 'none';
            document.getElementById('saved-basic-info').style.display = 'block';
            
            document.getElementById('basic-info-display').innerHTML = `
                <div class="data-display">
                    <div class="data-row">
                        <span class="data-label">Name:</span>
                        <span class="data-value">${info.name}</span>
                    </div>
                    <div class="data-row">
                        <span class="data-label">Age:</span>
                        <span class="data-value">${info.age} years</span>
                    </div>
                    <div class="data-row">
                        <span class="data-label">Occupation:</span>
                        <span class="data-value">${info.occupation}</span>
                    </div>
                    <div class="data-row">
                        <span class="data-label">Marital Status:</span>
                        <span class="data-value">${info.maritalStatus}</span>
                    </div>
                    <div class="data-row">
                        <span class="data-label">Dependents:</span>
                        <span class="data-value">${info.dependents}</span>
                    </div>
                    <div class="data-row">
                        <span class="data-label">City:</span>
                        <span class="data-value">${info.city}</span>
                    </div>
                </div>
            `;
        }

        function editBasicInfo() {
            document.getElementById('basic-info-form').style.display = 'block';
            document.getElementById('saved-basic-info').style.display = 'none';
        }

        // Financial Status Functions
        function saveFinancialStatus() {
            clientData.financialStatus = {
                monthlyIncome: parseFloat(document.getElementById('monthly-income').value),
                monthlyExpenses: parseFloat(document.getElementById('monthly-expenses').value),
                currentSavings: parseFloat(document.getElementById('current-savings').value),
                annualIncome: parseFloat(document.getElementById('annual-income').value)
            };

            displayFinancialInfo();
            autoSave();
        }

        function displayFinancialInfo() {
            const info = clientData.financialStatus;
            const savingsRate = info.monthlyIncome > 0 ? ((info.monthlyIncome - info.monthlyExpenses) / info.monthlyIncome * 100).toFixed(1) : 0;
            
            document.getElementById('financial-form').style.display = 'none';
            document.getElementById('saved-financial-info').style.display = 'block';
            
            document.getElementById('financial-info-display').innerHTML = `
                <div class="data-display">
                    <div class="data-row">
                        <span class="data-label">Monthly Income:</span>
                        <span class="data-value">₹${formatCurrency(info.monthlyIncome)}</span>
                    </div>
                    <div class="data-row">
                        <span class="data-label">Monthly Expenses:</span>
                        <span class="data-value">₹${formatCurrency(info.monthlyExpenses)}</span>
                    </div>
                    <div class="data-row">
                        <span class="data-label">Monthly Savings:</span>
                        <span class="data-value">₹${formatCurrency(info.monthlyIncome - info.monthlyExpenses)}</span>
                    </div>
                    <div class="data-row">
                        <span class="data-label">Savings Rate:</span>
                        <span class="data-value">${savingsRate}%</span>
                    </div>
                    <div class="data-row">
                        <span class="data-label">Current Savings:</span>
                        <span class="data-value">₹${formatCurrency(info.currentSavings)}</span>
                    </div>
                    <div class="data-row">
                        <span class="data-label">Annual Income:</span>
                        <span class="data-value">₹${formatCurrency(info.annualIncome)}</span>
                    </div>
                </div>
            `;
        }

        function editFinancialInfo() {
            document.getElementById('financial-form').style.display = 'block';
            document.getElementById('saved-financial-info').style.display = 'none';
        }

        // Asset Management Functions
        function addAsset() {
            const asset = {
                id: Date.now(),
                type: document.getElementById('asset-type').value,
                name: document.getElementById('asset-name').value,
                value: parseFloat(document.getElementById('asset-value').value)
            };

            clientData.assets.push(asset);
            updateAssetsList();
            updateNetWorth();
            
            // Reset form
            document.getElementById('asset-form').reset();
            autoSave();
        }

        function updateAssetsList() {
            const container = document.getElementById('assets-list');
            container.innerHTML = '';

            clientData.assets.forEach(asset => {
                const item = document.createElement('div');
                item.className = 'list-item';
                item.innerHTML = `
                    <div class="item-info">
                        <div class="item-title">${asset.name}</div>
                        <div class="item-details">${asset.type} - ₹${formatCurrency(asset.value)}</div>
                    </div>
                    <div class="item-actions">
                        <button class="btn btn-small btn-secondary" onclick="editAsset(${asset.id})">
                            <i class="fas fa-edit"></i> Edit
                        </button>
                        <button class="btn btn-small btn-danger" onclick="deleteAsset(${asset.id})">
                            <i class="fas fa-trash"></i> Delete
                        </button>
                    </div>
                `;
                container.appendChild(item);
            });

            updateAssetChart();
        }

        function deleteAsset(id) {
            if (confirm('Are you sure you want to delete this asset?')) {
                clientData.assets = clientData.assets.filter(asset => asset.id !== id);
                updateAssetsList();
                updateNetWorth();
                autoSave();
            }
        }

        function editAsset(id) {
            const asset = clientData.assets.find(a => a.id === id);
            if (asset) {
                document.getElementById('asset-type').value = asset.type;
                document.getElementById('asset-name').value = asset.name;
                document.getElementById('asset-value').value = asset.value;
                
                // Remove the asset temporarily for editing
                deleteAsset(id);
            }
        }

        // Loan Management Functions
        function addLoan() {
            const loan = {
                id: Date.now(),
                type: document.getElementById('loan-type').value,
                amount: parseFloat(document.getElementById('loan-amount').value),
                rate: parseFloat(document.getElementById('loan-rate').value),
                tenure: parseFloat(document.getElementById('loan-tenure').value)
            };

            clientData.loans.push(loan);
            updateLoansList();
            updateNetWorth();
            
            // Reset form
            document.getElementById('loan-form').reset();
            autoSave();
        }

        function updateLoansList() {
            const container = document.getElementById('loans-list');
            container.innerHTML = '';

            clientData.loans.forEach(loan => {
                const totalInterest = calculateTotalInterest(loan.amount, loan.rate, loan.tenure);
                const item = document.createElement('div');
                item.className = 'list-item';
                item.innerHTML = `
                    <div class="item-info">
                        <div class="item-title">${loan.type} Loan</div>
                        <div class="item-details">
                            Amount: ₹${formatCurrency(loan.amount)} | Rate: ${loan.rate}% | 
                            Tenure: ${loan.tenure} years | Total Interest: ₹${formatCurrency(totalInterest)}
                        </div>
                    </div>
                    <div class="item-actions">
                        <button class="btn btn-small btn-secondary" onclick="editLoan(${loan.id})">
                            <i class="fas fa-edit"></i> Edit
                        </button>
                        <button class="btn btn-small btn-danger" onclick="deleteLoan(${loan.id})">
                            <i class="fas fa-trash"></i> Delete
                        </button>
                    </div>
                `;
                container.appendChild(item);
            });
        }

        function deleteLoan(id) {
            if (confirm('Are you sure you want to delete this loan?')) {
                clientData.loans = clientData.loans.filter(loan => loan.id !== id);
                updateLoansList();
                updateNetWorth();
                autoSave();
            }
        }

        function editLoan(id) {
            const loan = clientData.loans.find(l => l.id === id);
            if (loan) {
                document.getElementById('loan-type').value = loan.type;
                document.getElementById('loan-amount').value = loan.amount;
                document.getElementById('loan-rate').value = loan.rate;
                document.getElementById('loan-tenure').value = loan.tenure;
                
                // Remove the loan temporarily for editing
                deleteLoan(id);
            }
        }

        function calculateTotalInterest(principal, rate, tenure) {
            const monthlyRate = rate / 12 / 100;
            const months = tenure * 12;
            const emi = (principal * monthlyRate * Math.pow(1 + monthlyRate, months)) / (Math.pow(1 + monthlyRate, months) - 1);
            return (emi * months) - principal;
        }

        // Net Worth Functions
        function updateNetWorth() {
            const totalAssets = clientData.assets.reduce((sum, asset) => sum + asset.value, 0);
            const totalLiabilities = clientData.loans.reduce((sum, loan) => sum + loan.amount, 0);
            const netWorth = totalAssets - totalLiabilities;

            document.getElementById('total-assets').textContent = '₹' + formatCurrency(totalAssets);
            document.getElementById('total-liabilities').textContent = '₹' + formatCurrency(totalLiabilities);
            document.getElementById('net-worth').textContent = '₹' + formatCurrency(netWorth);
        }

        function updateAssetChart() {
            const ctx = document.getElementById('asset-chart');
            if (!ctx) return;

            // Destroy existing chart
            if (charts.assetChart) {
                charts.assetChart.destroy();
            }

            // Group assets by type
            const assetTypes = {};
            clientData.assets.forEach(asset => {
                if (!assetTypes[asset.type]) {
                    assetTypes[asset.type] = 0;
                }
                assetTypes[asset.type] += asset.value;
            });

            const labels = Object.keys(assetTypes);
            const data = Object.values(assetTypes);
            const colors = ['#FF6384', '#36A2EB', '#FFCE56', '#4BC0C0', '#9966FF'];

            if (labels.length === 0) {
                ctx.getContext('2d').clearRect(0, 0, ctx.width, ctx.height);
                return;
            }

            charts.assetChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: labels,
                    datasets: [{
                        data: data,
                        backgroundColor: colors.slice(0, labels.length),
                        borderWidth: 2,
                        borderColor: '#333'
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            labels: {
                                color: '#ffffff'
                            }
                        }
                    }
                }
            });
        }

        // Goals Management Functions
        function addGoal() {
            const todayAmount = parseFloat(document.getElementById('goal-amount').value);
            const timeframe = parseFloat(document.getElementById('goal-timeframe').value);
            const inflationRate = parseFloat(document.getElementById('goal-inflation').value) / 100;
            
            // Calculate inflation-adjusted future value
            const futureValue = todayAmount * Math.pow(1 + inflationRate, timeframe);

            const goal = {
                id: Date.now(),
                name: document.getElementById('goal-name').value,
                todayAmount: todayAmount,
                futureAmount: futureValue,
                timeframe: timeframe,
                inflationRate: inflationRate * 100,
                priority: document.getElementById('goal-priority').value,
                progress: 0
            };

            clientData.goals.push(goal);
            updateGoalsList();
            
            // Reset form
            document.getElementById('goal-form').reset();
            document.getElementById('goal-inflation').value = 6; // Reset to default
            autoSave();
        }

        function updateGoalsList() {
            const container = document.getElementById('goals-list');
            container.innerHTML = '';

            clientData.goals.forEach(goal => {
                const item = document.createElement('div');
                item.className = 'list-item';
                item.innerHTML = `
                    <div class="item-info">
                        <div class="item-title">${goal.name}</div>
                        <div class="item-details">
                            Today's Value: ₹${formatCurrency(goal.todayAmount)} | 
                            Future Value: ₹${formatCurrency(goal.futureAmount)} | 
                            Timeframe: ${goal.timeframe} years | 
                            Priority: ${goal.priority}
                        </div>
                        <div class="item-details" style="margin-top: 5px;">
                            Inflation Rate: ${goal.inflationRate}% | 
                            Required Monthly SIP: ₹${formatCurrency(calculateRequiredSIP(goal.futureAmount, goal.timeframe))}
                        </div>
                    </div>
                    <div class="item-actions">
                        <button class="btn btn-small btn-secondary" onclick="editGoal(${goal.id})">
                            <i class="fas fa-edit"></i> Edit
                        </button>
                        <button class="btn btn-small btn-danger" onclick="deleteGoal(${goal.id})">
                            <i class="fas fa-trash"></i> Delete
                        </button>
                    </div>
                `;
                container.appendChild(item);
            });
        }

        function deleteGoal(id) {
            if (confirm('Are you sure you want to delete this goal?')) {
                clientData.goals = clientData.goals.filter(goal => goal.id !== id);
                updateGoalsList();
                autoSave();
            }
        }

        function editGoal(id) {
            const goal = clientData.goals.find(g => g.id === id);
            if (goal) {
                document.getElementById('goal-name').value = goal.name;
                document.getElementById('goal-amount').value = goal.todayAmount;
                document.getElementById('goal-timeframe').value = goal.timeframe;
                document.getElementById('goal-inflation').value = goal.inflationRate;
                document.getElementById('goal-priority').value = goal.priority;
                
                // Remove the goal temporarily for editing
                deleteGoal(id);
            }
        }

        function calculateRequiredSIP(futureValue, years) {
            const monthlyReturn = 0.12 / 12; // Assuming 12% annual return
            const months = years * 12;
            return futureValue * monthlyReturn / (Math.pow(1 + monthlyReturn, months) - 1);
        }

        // Insurance Functions
        function calculateLifeInsurance() {
            const familyExpenses = parseFloat(document.getElementById('family-expenses').value) || 0;
            const outstandingLoans = parseFloat(document.getElementById('outstanding-loans').value) || 0;
            const incomeYears = parseFloat(document.getElementById('income-years').value) || 10;
            
            const lifeInsuranceNeed = (familyExpenses * incomeYears) + outstandingLoans;
            
            clientData.insuranceProfile.lifeInsuranceNeed = lifeInsuranceNeed;
            
            document.getElementById('insurance-results').style.display = 'block';
            document.getElementById('insurance-results').innerHTML = `
                <div class="alert alert-info">
                    <h4><i class="fas fa-calculator"></i> Life Insurance Calculation</h4>
                    <div class="data-display">
                        <div class="data-row">
                            <span class="data-label">Family Annual Expenses:</span>
                            <span class="data-value">₹${formatCurrency(familyExpenses)}</span>
                        </div>
                        <div class="data-row">
                            <span class="data-label">Income Replacement Years:</span>
                            <span class="data-value">${incomeYears} years</span>
                        </div>
                        <div class="data-row">
                            <span class="data-label">Outstanding Loans:</span>
                            <span class="data-value">₹${formatCurrency(outstandingLoans)}</span>
                        </div>
                        <div class="data-row" style="border-top: 2px solid #17a2b8; font-weight: bold;">
                            <span class="data-label">Recommended Life Insurance:</span>
                            <span class="data-value">₹${formatCurrency(lifeInsuranceNeed)}</span>
                        </div>
                    </div>
                </div>
            `;
        }

        function calculateHealthInsurance() {
            const familyExpenses = parseFloat(document.getElementById('family-expenses').value) || 0;
            const healthInsuranceNeed = Math.max(500000, familyExpenses * 0.1); // Minimum 5 lakhs or 10% of annual expenses
            
            clientData.insuranceProfile.healthInsuranceNeed = healthInsuranceNeed;
            
            const existingContent = document.getElementById('insurance-results').innerHTML;
            document.getElementById('insurance-results').style.display = 'block';
            document.getElementById('insurance-results').innerHTML = existingContent + `
                <div class="alert alert-info" style="margin-top: 15px;">
                    <h4><i class="fas fa-calculator"></i> Health Insurance Calculation</h4>
                    <div class="data-display">
                        <div class="data-row">
                            <span class="data-label">Family Annual Expenses:</span>
                            <span class="data-value">₹${formatCurrency(familyExpenses)}</span>
                        </div>
                        <div class="data-row">
                            <span class="data-label">Calculation Method:</span>
                            <span class="data-value">Max(₹5,00,000, 10% of annual expenses)</span>
                        </div>
                        <div class="data-row" style="border-top: 2px solid #17a2b8; font-weight: bold;">
                            <span class="data-label">Recommended Health Insurance:</span>
                            <span class="data-value">₹${formatCurrency(healthInsuranceNeed)}</span>
                        </div>
                    </div>
                </div>
            `;
        }

        function saveInsuranceProfile() {
            clientData.insuranceProfile = {
                currentLifeInsurance: parseFloat(document.getElementById('current-life-insurance').value) || 0,
                currentHealthInsurance: parseFloat(document.getElementById('current-health-insurance').value) || 0,
                outstandingLoans: parseFloat(document.getElementById('outstanding-loans').value) || 0,
                familyExpenses: parseFloat(document.getElementById('family-expenses').value) || 0,
                incomeYears: parseFloat(document.getElementById('income-years').value) || 10,
                lifeInsuranceNeed: clientData.insuranceProfile.lifeInsuranceNeed || 0,
                healthInsuranceNeed: clientData.insuranceProfile.healthInsuranceNeed || 0
            };

            displayInsuranceInfo();
            autoSave();
        }

        function displayInsuranceInfo() {
            const info = clientData.insuranceProfile;
            document.getElementById('insurance-form').style.display = 'none';
            document.getElementById('saved-insurance-info').style.display = 'block';
            
            document.getElementById('insurance-info-display').innerHTML = `
                <div class="data-display">
                    <div class="data-row">
                        <span class="data-label">Current Life Insurance:</span>
                        <span class="data-value">₹${formatCurrency(info.currentLifeInsurance)}</span>
                    </div>
                    <div class="data-row">
                        <span class="data-label">Current Health Insurance:</span>
                        <span class="data-value">₹${formatCurrency(info.currentHealthInsurance)}</span>
                    </div>
                    <div class="data-row">
                        <span class="data-label">Recommended Life Insurance:</span>
                        <span class="data-value">₹${formatCurrency(info.lifeInsuranceNeed)}</span>
                    </div>
                    <div class="data-row">
                        <span class="data-label">Recommended Health Insurance:</span>
                        <span class="data-value">₹${formatCurrency(info.healthInsuranceNeed)}</span>
                    </div>
                    <div class="data-row">
                        <span class="data-label">Life Insurance Gap:</span>
                        <span class="data-value">₹${formatCurrency(Math.max(0, info.lifeInsuranceNeed - info.currentLifeInsurance))}</span>
                    </div>
                    <div class="data-row">
                        <span class="data-label">Health Insurance Gap:</span>
                        <span class="data-value">₹${formatCurrency(Math.max(0, info.healthInsuranceNeed - info.currentHealthInsurance))}</span>
                    </div>
                </div>
            `;
        }

        function editInsuranceInfo() {
            document.getElementById('insurance-form').style.display = 'block';
            document.getElementById('saved-insurance-info').style.display = 'none';
        }

        // Risk Profile Functions
        function saveRiskProfile() {
            clientData.riskProfile = {
                experience: document.getElementById('investment-experience').value,
                tolerance: document.getElementById('risk-tolerance').value,
                horizon: document.getElementById('investment-horizon').value,
                monthlyInvestment: parseFloat(document.getElementById('monthly-investment').value)
            };

            displayRiskInfo();
            autoSave();
        }

        function displayRiskInfo() {
            const info = clientData.riskProfile;
            document.getElementById('risk-form').style.display = 'none';
            document.getElementById('saved-risk-info').style.display = 'block';
            
            document.getElementById('risk-info-display').innerHTML = `
                <div class="data-display">
                    <div class="data-row">
                        <span class="data-label">Investment Experience:</span>
                        <span class="data-value">${info.experience}</span>
                    </div>
                    <div class="data-row">
                        <span class="data-label">Risk Tolerance:</span>
                        <span class="data-value">${info.tolerance}</span>
                    </div>
                    <div class="data-row">
                        <span class="data-label">Investment Horizon:</span>
                        <span class="data-value">${info.horizon}</span>
                    </div>
                    <div class="data-row">
                        <span class="data-label">Monthly Investment Capacity:</span>
                        <span class="data-value">₹${formatCurrency(info.monthlyInvestment)}</span>
                    </div>
                </div>
            `;
        }

        function editRiskInfo() {
            document.getElementById('risk-form').style.display = 'block';
            document.getElementById('saved-risk-info').style.display = 'none';
        }

        // Investment Advisory Functions
        function generateInvestmentPlan() {
            const results = document.getElementById('investment-plan-results');
            
            // Get user's risk profile and financial data
            const riskProfile = clientData.riskProfile.tolerance || 'moderate';
            const monthlyInvestment = clientData.riskProfile.monthlyInvestment || 10000;
            const personalityType = clientData.assessmentResults.personalityType || 'Moderate Investor';

            let allocation, expectedReturn, recommendations;

            // Determine allocation based on risk profile
            switch (riskProfile) {
                case 'conservative':
                    allocation = { equity: 30, debt: 60, gold: 10 };
                    expectedReturn = 8;
                    recommendations = [
                        'Focus on debt mutual funds and fixed deposits',
                        'Consider government bonds for stability',
                        'Limit equity exposure to large-cap funds',
                        'Maintain emergency fund in liquid funds'
                    ];
                    break;
                case 'aggressive':
                    allocation = { equity: 80, debt: 15, gold: 5 };
                    expectedReturn = 14;
                    recommendations = [
                        'Invest heavily in equity mutual funds',
                        'Consider mid-cap and small-cap funds',
                        'Use SIP for rupee cost averaging',
                        'Review portfolio quarterly for rebalancing'
                    ];
                    break;
                default: // moderate
                    allocation = { equity: 60, debt: 30, gold: 10 };
                    expectedReturn = 12;
                    recommendations = [
                        'Balanced mix of equity and debt funds',
                        'Focus on diversified equity funds',
                        'Include some international exposure',
                        'Regular portfolio review and rebalancing'
                    ];
            }

            results.innerHTML = `
                <div class="alert alert-success">
                    <h4><i class="fas fa-lightbulb"></i> Personalized Investment Plan</h4>
                    <p><strong>Based on your ${personalityType} profile</strong></p>
                </div>

                <div class="form-grid">
                    <div class="card">
                        <div class="card-header">
                            <h4><i class="fas fa-pie-chart"></i> Recommended Asset Allocation</h4>
                        </div>
                        <div class="data-display">
                            <div class="data-row">
                                <span class="data-label">Equity (Stocks/Mutual Funds):</span>
                                <span class="data-value">${allocation.equity}% (₹${formatCurrency(monthlyInvestment * allocation.equity / 100)})</span>
                            </div>
                            <div class="data-row">
                                <span class="data-label">Debt (Bonds/Fixed Income):</span>
                                <span class="data-value">${allocation.debt}% (₹${formatCurrency(monthlyInvestment * allocation.debt / 100)})</span>
                            </div>
                            <div class="data-row">
                                <span class="data-label">Gold/Commodities:</span>
                                <span class="data-value">${allocation.gold}% (₹${formatCurrency(monthlyInvestment * allocation.gold / 100)})</span>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h4><i class="fas fa-chart-line"></i> Expected Returns</h4>
                        </div>
                        <div class="data-display">
                            <div class="data-row">
                                <span class="data-label">Expected Annual Return:</span>
                                <span class="data-value">${expectedReturn}%</span>
                            </div>
                            <div class="data-row">
                                <span class="data-label">10-Year Projected Value:</span>
                                <span class="data-value">₹${formatCurrency(calculateSIPValue(monthlyInvestment, expectedReturn, 10))}</span>
                            </div>
                            <div class="data-row">
                                <span class="data-label">20-Year Projected Value:</span>
                                <span class="data-value">₹${formatCurrency(calculateSIPValue(monthlyInvestment, expectedReturn, 20))}</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h4><i class="fas fa-list-ul"></i> Key Recommendations</h4>
                    </div>
                    <ul style="margin-left: 20px; line-height: 1.8;">
                        ${recommendations.map(rec => `<li>${rec}</li>`).join('')}
                    </ul>
                </div>
            `;
        }

        function analyzePortfolio() {
            const results = document.getElementById('portfolio-analysis-results');
            
            // Create mock portfolio data based on user's assets
            const totalAssets = clientData.assets.reduce((sum, asset) => sum + asset.value, 0);
            const mockPortfolio = [
                { name: 'Large Cap Equity Funds', value: totalAssets * 0.4, allocation: 40, target: 45, performance: 12.5 },
                { name: 'Mid Cap Equity Funds', value: totalAssets * 0.2, allocation: 20, target: 25, performance: 15.2 },
                { name: 'Debt Funds', value: totalAssets * 0.3, allocation: 30, target: 25, performance: 7.8 },
                { name: 'Gold ETF', value: totalAssets * 0.1, allocation: 10, target: 5, performance: 8.9 }
            ];

            results.innerHTML = `
                <div class="alert alert-info">
                    <h4><i class="fas fa-search"></i> Portfolio Analysis Results</h4>
                    <p>Analysis based on your current assets worth ₹${formatCurrency(totalAssets)}</p>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h4><i class="fas fa-chart-bar"></i> Current vs Target Allocation</h4>
                    </div>
                    <div class="data-display">
                        ${mockPortfolio.map(item => `
                            <div class="data-row">
                                <span class="data-label">${item.name}:</span>
                                <span class="data-value">
                                    Current: ${item.allocation}% | Target: ${item.target}% | 
                                    Performance: ${item.performance}%
                                </span>
                            </div>
                        `).join('')}
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h4><i class="fas fa-exclamation-triangle"></i> Portfolio Health Check</h4>
                    </div>
                    <div class="alert alert-success">
                        <strong>Overall Score: 85/100</strong>
                        <ul style="margin: 10px 0 0 20px;">
                            <li>✅ Good diversification across asset classes</li>
                            <li>⚠️ Slightly overweight in debt funds</li>
                            <li>✅ Strong performance in equity funds</li>
                            <li>⚠️ Consider reducing gold allocation</li>
                        </ul>
                    </div>
                </div>
            `;
        }

        function generateRebalancingPlan() {
            const results = document.getElementById('portfolio-analysis-results');
            const existingContent = results.innerHTML;
            
            results.innerHTML = existingContent + `
                <div class="card">
                    <div class="card-header">
                        <h4><i class="fas fa-balance-scale"></i> Rebalancing Recommendations</h4>
                    </div>
                    <div class="alert alert-warning">
                        <h5>Suggested Actions:</h5>
                        <div class="data-display">
                            <div class="data-row">
                                <span class="data-label">Reduce Debt Funds:</span>
                                <span class="data-value">Sell ₹50,000 worth</span>
                            </div>
                            <div class="data-row">
                                <span class="data-label">Increase Mid Cap Equity:</span>
                                <span class="data-value">Buy ₹30,000 worth</span>
                            </div>
                            <div class="data-row">
                                <span class="data-label">Reduce Gold ETF:</span>
                                <span class="data-value">Sell ₹20,000 worth</span>
                            </div>
                        </div>
                        <p style="margin-top: 15px;"><strong>Next Review Date:</strong> ${new Date(Date.now() + 90*24*60*60*1000).toLocaleDateString()}</p>
                    </div>
                </div>
            `;
        }

        // SIP Calculator Functions
        function calculateSIPReturns() {
            const sipAmount = parseFloat(document.getElementById('sip-amount').value);
            const annualReturn = parseFloat(document.getElementById('sip-return').value);
            const years = parseFloat(document.getElementById('sip-period').value);
            const inflationRate = parseFloat(document.getElementById('sip-inflation').value) / 100;

            // Calculate maturity value
            const monthlyReturn = annualReturn / 12 / 100;
            const months = years * 12;
            const maturityValue = sipAmount * (Math.pow(1 + monthlyReturn, months) - 1) / monthlyReturn * (1 + monthlyReturn);
            
            // Calculate inflation-adjusted value (real value in today's terms)
            const realValue = maturityValue / Math.pow(1 + inflationRate, years);
            const totalInvestment = sipAmount * months;
            const returns = maturityValue - totalInvestment;

            document.getElementById('sip-results').style.display = 'block';
            document.getElementById('sip-results').innerHTML = `
                <div class="alert alert-success">
                    <h4><i class="fas fa-calculator"></i> SIP Calculation Results</h4>
                </div>

                <div class="form-grid">
                    <div class="card">
                        <div class="card-header">
                            <h4><i class="fas fa-chart-line"></i> Investment Summary</h4>
                        </div>
                        <div class="data-display">
                            <div class="data-row">
                                <span class="data-label">Monthly SIP Amount:</span>
                                <span class="data-value">₹${formatCurrency(sipAmount)}</span>
                            </div>
                            <div class="data-row">
                                <span class="data-label">Investment Period:</span>
                                <span class="data-value">${years} years (${months} months)</span>
                            </div>
                            <div class="data-row">
                                <span class="data-label">Expected Annual Return:</span>
                                <span class="data-value">${annualReturn}%</span>
                            </div>
                            <div class="data-row">
                                <span class="data-label">Total Investment:</span>
                                <span class="data-value">₹${formatCurrency(totalInvestment)}</span>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h4><i class="fas fa-money-bill-wave"></i> Returns Analysis</h4>
                        </div>
                        <div class="data-display">
                            <div class="data-row" style="border-bottom: 2px solid #28a745;">
                                <span class="data-label"><strong>Maturity Value (Nominal):</strong></span>
                                <span class="data-value"><strong>₹${formatCurrency(maturityValue)}</strong></span>
                            </div>
                            <div class="data-row" style="border-bottom: 2px solid #17a2b8;">
                                <span class="data-label"><strong>Real Value (Today's Terms):</strong></span>
                                <span class="data-value"><strong>₹${formatCurrency(realValue)}</strong></span>
                            </div>
                            <div class="data-row">
                                <span class="data-label">Total Returns:</span>
                                <span class="data-value">₹${formatCurrency(returns)}</span>
                            </div>
                            <div class="data-row">
                                <span class="data-label">Wealth Multiplier:</span>
                                <span class="data-value">${(maturityValue / totalInvestment).toFixed(2)}x</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="alert alert-info">
                    <h5><i class="fas fa-info-circle"></i> Understanding Your Returns</h5>
                    <p><strong>Nominal Value:</strong> The actual amount you'll receive (₹${formatCurrency(maturityValue)})</p>
                    <p><strong>Real Value:</strong> What that amount is worth in today's purchasing power (₹${formatCurrency(realValue)})</p>
                    <p><strong>Impact of Inflation:</strong> Due to ${(inflationRate * 100).toFixed(1)}% inflation, your purchasing power reduces by ₹${formatCurrency(maturityValue - realValue)} over ${years} years.</p>
                </div>
            `;
        }

        function calculateSIPValue(monthlyAmount, annualReturn, years) {
            const monthlyReturn = annualReturn / 12 / 100;
            const months = years * 12;
            return monthlyAmount * (Math.pow(1 + monthlyReturn, months) - 1) / monthlyReturn * (1 + monthlyReturn);
        }

        // Tax Planning Functions
        function generateTaxSavingPlan() {
            const income = parseFloat(document.getElementById('taxable-income').value);
            const regime = document.getElementById('tax-regime').value;
            const current80C = parseFloat(document.getElementById('current-80c').value) || 0;
            const healthPremium = parseFloat(document.getElementById('health-premium').value) || 0;

            // Calculate tax savings
            const remaining80C = Math.max(0, 150000 - current80C);
            const remaining80D = Math.max(0, 25000 - healthPremium);
            
            let taxRate = 0;
            if (income <= 250000) taxRate = 0;
            else if (income <= 500000) taxRate = 5;
            else if (income <= 1000000) taxRate = 20;
            else taxRate = 30;

            const potentialSavings = (remaining80C + remaining80D) * (taxRate / 100);

            document.getElementById('tax-plan-results').style.display = 'block';
            document.getElementById('tax-plan-results').innerHTML = `
                <div class="alert alert-success">
                    <h4><i class="fas fa-receipt"></i> Tax Saving Analysis</h4>
                    <p>Based on ${regime === 'old' ? 'Old Tax Regime' : 'New Tax Regime'}</p>
                </div>

                <div class="form-grid">
                    <div class="card">
                        <div class="card-header">
                            <h4><i class="fas fa-calculator"></i> Current Status</h4>
                        </div>
                        <div class="data-display">
                            <div class="data-row">
                                <span class="data-label">Annual Taxable Income:</span>
                                <span class="data-value">₹${formatCurrency(income)}</span>
                            </div>
                            <div class="data-row">
                                <span class="data-label">Applicable Tax Rate:</span>
                                <span class="data-value">${taxRate}%</span>
                            </div>
                            <div class="data-row">
                                <span class="data-label">Current 80C Investments:</span>
                                <span class="data-value">₹${formatCurrency(current80C)}</span>
                            </div>
                            <div class="data-row">
                                <span class="data-label">Health Insurance Premium:</span>
                                <span class="data-value">₹${formatCurrency(healthPremium)}</span>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h4><i class="fas fa-piggy-bank"></i> Tax Saving Opportunities</h4>
                        </div>
                        <div class="data-display">
                            <div class="data-row">
                                <span class="data-label">Remaining 80C Limit:</span>
                                <span class="data-value">₹${formatCurrency(remaining80C)}</span>
                            </div>
                            <div class="data-row">
                                <span class="data-label">Remaining 80D Limit:</span>
                                <span class="data-value">₹${formatCurrency(remaining80D)}</span>
                            </div>
                            <div class="data-row" style="border-top: 2px solid #28a745; font-weight: bold;">
                                <span class="data-label">Potential Tax Savings:</span>
                                <span class="data-value">₹${formatCurrency(potentialSavings)}</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h4><i class="fas fa-list-ul"></i> Recommended Tax-Saving Investments</h4>
                    </div>
                    <div style="padding: 1rem; border: 1px solid #333; border-radius: 8px; margin: 10px 0;">
                        <h6><i class="fas fa-coins"></i> Section 80C (₹${formatCurrency(remaining80C)} remaining)</h6>
                        <ul style="margin-left: 1.5rem; line-height: 1.6;">
                            <li>ELSS Mutual Funds (Best option - equity returns + tax saving)</li>
                            <li>Public Provident Fund (PPF) - 15 year lock-in</li>
                            <li>Employee Provident Fund (EPF)</li>
                            <li>Life Insurance Premium</li>
                            <li>Principal repayment of home loan</li>
                            <li>National Savings Certificate (NSC)</li>
                        </ul>
                    </div>
                    <div style="padding: 1rem; border: 1px solid #333; border-radius: 8px; margin: 10px 0;">
                        <h6><i class="fas fa-heartbeat"></i> Section 80D (₹${formatCurrency(remaining80D)} remaining)</h6>
                        <ul style="margin-left: 1.5rem; line-height: 1.6;">
                            <li>Health Insurance Premium for self and family</li>
                            <li>Preventive health check-up expenses</li>
                            <li>Medical insurance for parents (additional ₹25,000)</li>
                        </ul>
                    </div>
                </div>
            `;
        }

        // Retirement Planning Functions
        function calculateRetirement() {
            const currentAge = parseFloat(document.getElementById('current-age').value);
            const retirementAge = parseFloat(document.getElementById('retirement-age').value);
            const currentExpenses = parseFloat(document.getElementById('current-monthly-expenses').value);
            const inflationRate = parseFloat(document.getElementById('retirement-inflation').value) / 100;
            const lifeExpectancy = parseFloat(document.getElementById('life-expectancy').value);
            const returnRate = parseFloat(document.getElementById('retirement-return').value) / 100;

            const yearsToRetirement = retirementAge - currentAge;
            const yearsInRetirement = lifeExpectancy - retirementAge;

            // Calculate future monthly expenses at retirement (inflation-adjusted)
            const futureMonthlyExpenses = currentExpenses * Math.pow(1 + inflationRate, yearsToRetirement);
            const futureAnnualExpenses = futureMonthlyExpenses * 12;

            // Calculate required retirement corpus (simplified calculation)
            const requiredCorpus = futureAnnualExpenses * yearsInRetirement;

            // Calculate monthly SIP required
            const monthlyReturn = returnRate / 12;
            const months = yearsToRetirement * 12;
            const requiredMonthlySIP = requiredCorpus * monthlyReturn / (Math.pow(1 + monthlyReturn, months) - 1);

            document.getElementById('retirement-results').style.display = 'block';
            document.getElementById('retirement-results').innerHTML = `
                <div class="alert alert-success">
                    <h4><i class="fas fa-umbrella"></i> Retirement Planning Analysis</h4>
                </div>

                <div class="form-grid">
                    <div class="card">
                        <div class="card-header">
                            <h4><i class="fas fa-calendar-alt"></i> Timeline</h4>
                        </div>
                        <div class="data-display">
                            <div class="data-row">
                                <span class="data-label">Current Age:</span>
                                <span class="data-value">${currentAge} years</span>
                            </div>
                            <div class="data-row">
                                <span class="data-label">Retirement Age:</span>
                                <span class="data-value">${retirementAge} years</span>
                            </div>
                            <div class="data-row">
                                <span class="data-label">Years to Retirement:</span>
                                <span class="data-value">${yearsToRetirement} years</span>
                            </div>
                            <div class="data-row">
                                <span class="data-label">Years in Retirement:</span>
                                <span class="data-value">${yearsInRetirement} years</span>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h4><i class="fas fa-chart-line"></i> Expense Projection</h4>
                        </div>
                        <div class="data-display">
                            <div class="data-row">
                                <span class="data-label">Current Monthly Expenses:</span>
                                <span class="data-value">₹${formatCurrency(currentExpenses)}</span>
                            </div>
                            <div class="data-row">
                                <span class="data-label">Future Monthly Expenses (at retirement):</span>
                                <span class="data-value">₹${formatCurrency(futureMonthlyExpenses)}</span>
                            </div>
                            <div class="data-row">
                                <span class="data-label">Future Annual Expenses:</span>
                                <span class="data-value">₹${formatCurrency(futureAnnualExpenses)}</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h4><i class="fas fa-bullseye"></i> Retirement Corpus Required</h4>
                    </div>
                    <div class="data-display">
                        <div class="data-row" style="border-bottom: 2px solid #28a745; font-size: 1.2rem; font-weight: bold;">
                            <span class="data-label">Required Retirement Corpus:</span>
                            <span class="data-value">₹${formatCurrency(requiredCorpus)}</span>
                        </div>
                        <div class="data-row" style="border-bottom: 2px solid #17a2b8; font-size: 1.1rem; font-weight: bold;">
                            <span class="data-label">Monthly SIP Required:</span>
                            <span class="data-value">₹${formatCurrency(requiredMonthlySIP)}</span>
                        </div>
                    </div>
                </div>

                <div class="alert alert-info">
                    <h5><i class="fas fa-lightbulb"></i> Key Insights</h5>
                    <ul style="margin-left: 20px; line-height: 1.8;">
                        <li>Your expenses will increase by ${((futureMonthlyExpenses / currentExpenses) - 1) * 100}% due to inflation over ${yearsToRetirement} years</li>
                        <li>Starting early gives you the power of compounding - delay by 5 years and your SIP requirement could double</li>
                        <li>Consider increasing your SIP by 10% annually to account for salary increases</li>
                        <li>Review and adjust your retirement plan every 3-5 years</li>
                    </ul>
                </div>
            `;
        }

        // Product Comparison Functions
        function generateSmartComparison() {
            const results = document.getElementById('product-comparison-results');
            
            // Generate recommendations based on user profile
            const riskProfile = clientData.riskProfile.tolerance || 'moderate';
            const goals = clientData.goals || [];
            const monthlyInvestment = clientData.riskProfile.monthlyInvestment || 10000;

            let products = [];

            // Equity Mutual Funds
            if (riskProfile === 'aggressive' || riskProfile === 'moderate') {
                products.push({
                    category: 'Large Cap Equity Funds',
                    products: [
                        { name: 'HDFC Top 100 Fund', returns: '12.5%', expense: '2.05%', rating: '4.5/5' },
                        { name: 'ICICI Prudential Bluechip Fund', returns: '11.8%', expense: '2.25%', rating: '4.2/5' },
                        { name: 'Axis Bluechip Fund', returns: '13.2%', expense: '1.95%', rating: '4.7/5' }
                    ]
                });
            }

            // Debt Funds
            if (riskProfile === 'conservative' || riskProfile === 'moderate') {
                products.push({
                    category: 'Debt Funds',
                    products: [
                        { name: 'HDFC Corporate Bond Fund', returns: '7.8%', expense: '0.85%', rating: '4.3/5' },
                        { name: 'ICICI Prudential Corporate Bond Fund', returns: '7.5%', expense: '0.95%', rating: '4.1/5' },
                        { name: 'Axis Corporate Debt Fund', returns: '8.1%', expense: '0.75%', rating: '4.4/5' }
                    ]
                });
            }

            // Tax Saving Funds (if user has goals)
            if (goals.some(goal => goal.name.toLowerCase().includes('tax') || clientData.financialStatus.annualIncome > 250000)) {
                products.push({
                    category: 'ELSS Tax Saving Funds',
                    products: [
                        { name: 'Axis Long Term Equity Fund', returns: '15.2%', expense: '1.85%', rating: '4.8/5' },
                        { name: 'Mirae Asset Tax Saver Fund', returns: '14.7%', expense: '1.95%', rating: '4.6/5' },
                        { name: 'DSP Tax Saver Fund', returns: '13.9%', expense: '2.15%', rating: '4.4/5' }
                    ]
                });
            }

            results.innerHTML = `
                <div class="alert alert-success">
                    <h4><i class="fas fa-search"></i> Smart Product Recommendations</h4>
                    <p>Based on your ${riskProfile} risk profile and ₹${formatCurrency(monthlyInvestment)} monthly investment capacity</p>
                </div>

                ${products.map(category => `
                    <div class="card">
                        <div class="card-header">
                            <h4><i class="fas fa-star"></i> ${category.category}</h4>
                        </div>
                        <div style="overflow-x: auto;">
                            <table style="width: 100%; border-collapse: collapse; margin: 15px 0;">
                                <thead>
                                    <tr style="background: #1a1a1a; border-bottom: 2px solid #333;">
                                        <th style="padding: 12px; text-align: left; border: 1px solid #333;">Fund Name</th>
                                        <th style="padding: 12px; text-align: center; border: 1px solid #333;">3Y Returns</th>
                                        <th style="padding: 12px; text-align: center; border: 1px solid #333;">Expense Ratio</th>
                                        <th style="padding: 12px; text-align: center; border: 1px solid #333;">Rating</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    ${category.products.map(product => `
                                        <tr style="border-bottom: 1px solid #333;">
                                            <td style="padding: 12px; border: 1px solid #333; font-weight: 500;">${product.name}</td>
                                            <td style="padding: 12px; text-align: center; border: 1px solid #333; color: #28a745;">${product.returns}</td>
                                            <td style="padding: 12px; text-align: center; border: 1px solid #333;">${product.expense}</td>
                                            <td style="padding: 12px; text-align: center; border: 1px solid #333; color: #ffc107;">${product.rating}</td>
                                        </tr>
                                    `).join('')}
                                </tbody>
                            </table>
                        </div>
                    </div>
                `).join('')}

                <div class="alert alert-info">
                    <h5><i class="fas fa-info-circle"></i> How to Choose</h5>
                    <ul style="margin-left: 20px; line-height: 1.8;">
                        <li><strong>Returns:</strong> Look for consistent performers over 3-5 years, not just recent winners</li>
                        <li><strong>Expense Ratio:</strong> Lower is better - even 0.5% difference compounds significantly over time</li>
                        <li><strong>Rating:</strong> Choose funds with 4+ star ratings from reputable agencies</li>
                        <li><strong>Fund Size:</strong> Avoid very small funds (less than ₹500 crores) and very large funds (more than ₹20,000 crores)</li>
                        <li><strong>Fund Manager:</strong> Check the track record and experience of the fund manager</li>
                    </ul>
                </div>
            `;
        }

        // Analytics Functions
        function updateAllCharts() {
            updateAnalyticsWidgets();
            createAnalyticsCharts();
        }

        function updateAnalyticsWidgets() {
            // Calculate financial metrics
            const totalAssets = clientData.assets.reduce((sum, asset) => sum + asset.value, 0);
            const totalLiabilities = clientData.loans.reduce((sum, loan) => sum + loan.amount, 0);
            const netWorth = totalAssets - totalLiabilities;
            const monthlyIncome = clientData.financialStatus.monthlyIncome || 0;
            const monthlyExpenses = clientData.financialStatus.monthlyExpenses || 0;
            const monthlySavings = monthlyIncome - monthlyExpenses;
            const savingsRate = monthlyIncome > 0 ? (monthlySavings / monthlyIncome * 100) : 0;
            const emergencyFundMonths = monthlyExpenses > 0 ? Math.floor(clientData.financialStatus.currentSavings / monthlyExpenses) : 0;
            
            // Calculate financial health score
            let score = 0;
            if (savingsRate >= 20) score += 25;
            else if (savingsRate >= 10) score += 15;
            else if (savingsRate >= 5) score += 10;
            
            if (emergencyFundMonths >= 6) score += 25;
            else if (emergencyFundMonths >= 3) score += 15;
            else if (emergencyFundMonths >= 1) score += 10;
            
            if (netWorth > 0) score += 25;
            if (clientData.goals.length > 0) score += 15;
            if (clientData.riskProfile.experience) score += 10;

            // Update widgets
            document.getElementById('financial-score').textContent = score;
            document.getElementById('net-worth-widget').textContent = '₹' + formatCurrency(netWorth);
            document.getElementById('savings-rate').textContent = savingsRate.toFixed(1) + '%';
            document.getElementById('emergency-fund-months').textContent = emergencyFundMonths;
        }

        function createAnalyticsCharts() {
            createAnalyticsAssetChart();
            createIncomeExpenseChart();
            createGoalProgressChart();
            createNetWorthProjectionChart();
        }

        function createAnalyticsAssetChart() {
            const ctx = document.getElementById('analytics-asset-chart');
            if (!ctx) return;

            if (charts.analyticsAssetChart) {
                charts.analyticsAssetChart.destroy();
            }

            const assetTypes = {};
            clientData.assets.forEach(asset => {
                if (!assetTypes[asset.type]) {
                    assetTypes[asset.type] = 0;
                }
                assetTypes[asset.type] += asset.value;
            });

            const labels = Object.keys(assetTypes);
            const data = Object.values(assetTypes);
            const colors = ['#FF6384', '#36A2EB', '#FFCE56', '#4BC0C0', '#9966FF'];

            if (labels.length === 0) {
                ctx.getContext('2d').clearRect(0, 0, ctx.width, ctx.height);
                return;
            }

            charts.analyticsAssetChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: labels,
                    datasets: [{
                        data: data,
                        backgroundColor: colors.slice(0, labels.length),
                        borderWidth: 2,
                        borderColor: '#333'
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            labels: {
                                color: '#ffffff'
                            }
                        }
                    }
                }
            });
        }

        function createIncomeExpenseChart() {
            const ctx = document.getElementById('income-expense-chart');
            if (!ctx) return;

            if (charts.incomeExpenseChart) {
                charts.incomeExpenseChart.destroy();
            }

            const income = clientData.financialStatus.monthlyIncome || 0;
            const expenses = clientData.financialStatus.monthlyExpenses || 0;
            const savings = income - expenses;

            charts.incomeExpenseChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Monthly Income', 'Monthly Expenses', 'Monthly Savings'],
                    datasets: [{
                        data: [income, expenses, Math.max(0, savings)],
                        backgroundColor: ['#28a745', '#dc3545', '#17a2b8'],
                        borderWidth: 2,
                        borderColor: '#333'
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                color: '#ffffff',
                                callback: function(value) {
                                    return '₹' + formatCurrency(value);
                                }
                            },
                            grid: {
                                color: '#333'
                            }
                        },
                        x: {
                            ticks: {
                                color: '#ffffff'
                            },
                            grid: {
                                color: '#333'
                            }
                        }
                    }
                }
            });
        }

        function createGoalProgressChart() {
            const ctx = document.getElementById('goal-progress-chart');
            if (!ctx) return;

            if (charts.goalProgressChart) {
                charts.goalProgressChart.destroy();
            }

            if (clientData.goals.length === 0) {
                ctx.getContext('2d').clearRect(0, 0, ctx.width, ctx.height);
                return;
            }

            const labels = clientData.goals.map(goal => goal.name);
            const data = clientData.goals.map(goal => goal.progress || 0);

            charts.goalProgressChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Progress %',
                        data: data,
                        backgroundColor: '#36A2EB',
                        borderWidth: 2,
                        borderColor: '#333'
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            labels: {
                                color: '#ffffff'
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100,
                            ticks: {
                                color: '#ffffff',
                                callback: function(value) {
                                    return value + '%';
                                }
                            },
                            grid: {
                                color: '#333'
                            }
                        },
                        x: {
                            ticks: {
                                color: '#ffffff'
                            },
                            grid: {
                                color: '#333'
                            }
                        }
                    }
                }
            });
        }

        function createNetWorthProjectionChart() {
            const ctx = document.getElementById('networth-projection-chart');
            if (!ctx) return;

            if (charts.networthProjectionChart) {
                charts.networthProjectionChart.destroy();
            }

            const currentNetWorth = clientData.assets.reduce((sum, asset) => sum + asset.value, 0) - 
                                   clientData.loans.reduce((sum, loan) => sum + loan.amount, 0);
            const monthlySavings = (clientData.financialStatus.monthlyIncome || 0) - (clientData.financialStatus.monthlyExpenses || 0);
            const annualReturn = 0.12; // 12% assumed return

            const projectedData = [];
            let projectedValue = currentNetWorth;

            for (let year = 0; year <= 10; year++) {
                projectedData.push(projectedValue);
                if (year < 10) {
                    projectedValue = projectedValue * (1 + annualReturn) + (monthlySavings * 12);
                }
            }

            charts.networthProjectionChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: Array.from({length: 11}, (_, i) => `Year ${i}`),
                    datasets: [{
                        label: 'Projected Net Worth',
                        data: projectedData,
                        borderColor: '#28a745',
                        backgroundColor: 'rgba(40, 167, 69, 0.1)',
                        fill: true,
                        tension: 0.4,
                        borderWidth: 3
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            labels: {
                                color: '#ffffff'
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                color: '#ffffff',
                                callback: function(value) {
                                    return '₹' + formatCurrency(value);
                                }
                            },
                            grid: {
                                color: '#333'
                            }
                        },
                        x: {
                            ticks: {
                                color: '#ffffff'
                            },
                            grid: {
                                color: '#333'
                            }
                        }
                    }
                }
            });
        }

        // Report Generation Functions
        function generateDetailedReport() {
            const reportContent = `
                <div style="padding: 20px; background: #0a0a0a; border-radius: 10px;">
                    <h3 style="text-align: center; margin-bottom: 30px; color: #fff;">
                        <i class="fas fa-chart-bar"></i> Detailed Financial Report
                    </h3>
                    
                    <div style="margin-bottom: 30px;">
                        <h4 style="color: #17a2b8; border-bottom: 2px solid #17a2b8; padding-bottom: 10px;">
                            Personal Information
                        </h4>
                        <div style="margin: 15px 0;">
                            <strong>Name:</strong> ${clientData.basicInfo.name || 'Not provided'}<br>
                            <strong>Age:</strong> ${clientData.basicInfo.age || 'Not provided'}<br>
                            <strong>Occupation:</strong> ${clientData.basicInfo.occupation || 'Not provided'}<br>
                            <strong>City:</strong> ${clientData.basicInfo.city || 'Not provided'}
                        </div>
                    </div>

                    <div style="margin-bottom: 30px;">
                        <h4 style="color: #28a745; border-bottom: 2px solid #28a745; padding-bottom: 10px;">
                            Financial Summary
                        </h4>
                        <div style="margin: 15px 0;">
                            <strong>Monthly Income:</strong> ₹${formatCurrency(clientData.financialStatus.monthlyIncome || 0)}<br>
                            <strong>Monthly Expenses:</strong> ₹${formatCurrency(clientData.financialStatus.monthlyExpenses || 0)}<br>
                            <strong>Monthly Savings:</strong> ₹${formatCurrency((clientData.financialStatus.monthlyIncome || 0) - (clientData.financialStatus.monthlyExpenses || 0))}<br>
                            <strong>Current Savings:</strong> ₹${formatCurrency(clientData.financialStatus.currentSavings || 0)}
                        </div>
                    </div>

                    <div style="margin-bottom: 30px;">
                        <h4 style="color: #ffc107; border-bottom: 2px solid #ffc107; padding-bottom: 10px;">
                            Net Worth Analysis
                        </h4>
                        <div style="margin: 15px 0;">
                            <strong>Total Assets:</strong> ₹${formatCurrency(clientData.assets.reduce((sum, asset) => sum + asset.value, 0))}<br>
                            <strong>Total Liabilities:</strong> ₹${formatCurrency(clientData.loans.reduce((sum, loan) => sum + loan.amount, 0))}<br>
                            <strong>Net Worth:</strong> ₹${formatCurrency(clientData.assets.reduce((sum, asset) => sum + asset.value, 0) - clientData.loans.reduce((sum, loan) => sum + loan.amount, 0))}
                        </div>
                    </div>

                    <div style="margin-bottom: 30px;">
                        <h4 style="color: #dc3545; border-bottom: 2px solid #dc3545; padding-bottom: 10px;">
                            Financial Goals
                        </h4>
                        <div style="margin: 15px 0;">
                            ${clientData.goals.length > 0 ? 
                                clientData.goals.map(goal => `
                                    <div style="margin: 10px 0; padding: 10px; background: #1a1a1a; border-radius: 5px;">
                                        <strong>${goal.name}</strong><br>
                                        Target Amount: ₹${formatCurrency(goal.futureAmount)}<br>
                                        Timeframe: ${goal.timeframe} years<br>
                                        Priority: ${goal.priority}
                                    </div>
                                `).join('') : 
                                '<p>No financial goals defined yet.</p>'
                            }
                        </div>
                    </div>

                    <div style="margin-bottom: 30px;">
                        <h4 style="color: #6f42c1; border-bottom: 2px solid #6f42c1; padding-bottom: 10px;">
                            Investment Profile
                        </h4>
                        <div style="margin: 15px 0;">
                            <strong>Personality Type:</strong> ${clientData.assessmentResults.personalityType || 'Not assessed'}<br>
                            <strong>Risk Tolerance:</strong> ${clientData.riskProfile.tolerance || 'Not defined'}<br>
                            <strong>Investment Horizon:</strong> ${clientData.riskProfile.horizon || 'Not defined'}<br>
                            <strong>Monthly Investment Capacity:</strong> ₹${formatCurrency(clientData.riskProfile.monthlyInvestment || 0)}
                        </div>
                    </div>
                </div>
            `;

            document.getElementById('report-preview').style.display = 'block';
            document.getElementById('report-content').innerHTML = reportContent;
        }

        function generateInvestmentReport() {
            const reportContent = `
                <div style="padding: 20px; background: #0a0a0a; border-radius: 10px;">
                    <h3 style="text-align: center; margin-bottom: 30px; color: #fff;">
                        <i class="fas fa-lightbulb"></i> Investment Strategy Report
                    </h3>
                    
                    <div style="margin-bottom: 30px;">
                        <h4 style="color: #17a2b8; border-bottom: 2px solid #17a2b8; padding-bottom: 10px;">
                            Your Investment Profile
                        </h4>
                        <div style="margin: 15px 0;">
                            <strong>Investor Type:</strong> ${clientData.assessmentResults.personalityType || 'Moderate Investor'}<br>
                            <strong>Risk Appetite:</strong> ${clientData.riskProfile.tolerance || 'Moderate'}<br>
                            <strong>Investment Experience:</strong> ${clientData.riskProfile.experience || 'Intermediate'}<br>
                            <strong>Time Horizon:</strong> ${clientData.riskProfile.horizon || 'Medium Term'}
                        </div>
                    </div>

                    <div style="margin-bottom: 30px;">
                        <h4 style="color: #28a745; border-bottom: 2px solid #28a745; padding-bottom: 10px;">
                            Recommended Asset Allocation
                        </h4>
                        <div style="margin: 15px 0;">
                            ${clientData.riskProfile.tolerance === 'aggressive' ? `
                                <strong>Equity:</strong> 80% (High growth potential)<br>
                                <strong>Debt:</strong> 15% (Stability)<br>
                                <strong>Gold:</strong> 5% (Hedge against inflation)
                            ` : clientData.riskProfile.tolerance === 'conservative' ? `
                                <strong>Equity:</strong> 30% (Limited growth)<br>
                                <strong>Debt:</strong> 60% (High stability)<br>
                                <strong>Gold:</strong> 10% (Hedge against inflation)
                            ` : `
                                <strong>Equity:</strong> 60% (Balanced growth)<br>
                                <strong>Debt:</strong> 30% (Stability)<br>
                                <strong>Gold:</strong> 10% (Hedge against inflation)
                            `}
                        </div>
                    </div>

                    <div style="margin-bottom: 30px;">
                        <h4 style="color: #ffc107; border-bottom: 2px solid #ffc107; padding-bottom: 10px;">
                            Investment Recommendations
                        </h4>
                        <div style="margin: 15px 0;">
                            <div style="margin: 10px 0; padding: 10px; background: #1a1a1a; border-radius: 5px;">
                                <strong>Equity Investments:</strong><br>
                                • Large Cap Funds: 40% of equity allocation<br>
                                • Mid Cap Funds: 35% of equity allocation<br>
                                • Small Cap Funds: 25% of equity allocation
                            </div>
                            <div style="margin: 10px 0; padding: 10px; background: #1a1a1a; border-radius: 5px;">
                                <strong>Debt Investments:</strong><br>
                                • Corporate Bond Funds: 50% of debt allocation<br>
                                • Government Securities: 30% of debt allocation<br>
                                • Liquid Funds: 20% of debt allocation
                            </div>
                            <div style="margin: 10px 0; padding: 10px; background: #1a1a1a; border-radius: 5px;">
                                <strong>Gold Investment:</strong><br>
                                • Gold ETFs or Gold Funds for easy liquidity
                            </div>
                        </div>
                    </div>

                    <div style="margin-bottom: 30px;">
                        <h4 style="color: #dc3545; border-bottom: 2px solid #dc3545; padding-bottom: 10px;">
                            Expected Returns & Projections
                        </h4>
                        <div style="margin: 15px 0;">
                            <strong>Expected Annual Return:</strong> ${clientData.riskProfile.tolerance === 'aggressive' ? '14%' : clientData.riskProfile.tolerance === 'conservative' ? '8%' : '12%'}<br>
                            <strong>10-Year Projection:</strong> ₹${formatCurrency(calculateSIPValue(clientData.riskProfile.monthlyInvestment || 10000, clientData.riskProfile.tolerance === 'aggressive' ? 14 : clientData.riskProfile.tolerance === 'conservative' ? 8 : 12, 10))}<br>
                            <strong>20-Year Projection:</strong> ₹${formatCurrency(calculateSIPValue(clientData.riskProfile.monthlyInvestment || 10000, clientData.riskProfile.tolerance === 'aggressive' ? 14 : clientData.riskProfile.tolerance === 'conservative' ? 8 : 12, 20))}
                        </div>
                    </div>
                </div>
            `;

            document.getElementById('report-preview').style.display = 'block';
            document.getElementById('report-content').innerHTML = reportContent;
        }

        function generateActionPlan() {
            const reportContent = `
                <div style="padding: 20px; background: #0a0a0a; border-radius: 10px;">
                    <h3 style="text-align: center; margin-bottom: 30px; color: #fff;">
                        <i class="fas fa-tasks"></i> Financial Action Plan
                    </h3>
                    
                    <div style="margin-bottom: 30px;">
                        <h4 style="color: #dc3545; border-bottom: 2px solid #dc3545; padding-bottom: 10px;">
                            Immediate Actions (Next 30 Days)
                        </h4>
                        <div style="margin: 15px 0;">
                            <div style="margin: 10px 0; padding: 10px; background: #1a1a1a; border-radius: 5px;">
                                ✅ <strong>Emergency Fund:</strong> Build emergency fund of ₹${formatCurrency((clientData.financialStatus.monthlyExpenses || 50000) * 6)}
                            </div>
                            <div style="margin: 10px 0; padding: 10px; background: #1a1a1a; border-radius: 5px;">
                                ✅ <strong>Insurance Review:</strong> Ensure adequate life and health insurance coverage
                            </div>
                            <div style="margin: 10px 0; padding: 10px; background: #1a1a1a; border-radius: 5px;">
                                ✅ <strong>Debt Management:</strong> List all debts and create repayment strategy
                            </div>
                        </div>
                    </div>

                    <div style="margin-bottom: 30px;">
                        <h4 style="color: #ffc107; border-bottom: 2px solid #ffc107; padding-bottom: 10px;">
                            Short-term Goals (3-6 Months)
                        </h4>
                        <div style="margin: 15px 0;">
                            <div style="margin: 10px 0; padding: 10px; background: #1a1a1a; border-radius: 5px;">
                                🎯 <strong>Start SIP:</strong> Begin systematic investment of ₹${formatCurrency(clientData.riskProfile.monthlyInvestment || 10000)} monthly
                            </div>
                            <div style="margin: 10px 0; padding: 10px; background: #1a1a1a; border-radius: 5px;">
                                🎯 <strong>Tax Planning:</strong> Optimize tax savings through 80C and 80D investments
                            </div>
                            <div style="margin: 10px 0; padding: 10px; background: #1a1a1a; border-radius: 5px;">
                                �� <strong>Budget Tracking:</strong> Implement expense tracking and budget optimization
                            </div>
                        </div>
                    </div>

                    <div style="margin-bottom: 30px;">
                        <h4 style="color: #28a745; border-bottom: 2px solid #28a745; padding-bottom: 10px;">
                            Medium-term Goals (6-12 Months)
                        </h4>
                        <div style="margin: 15px 0;">
                            <div style="margin: 10px 0; padding: 10px; background: #1a1a1a; border-radius: 5px;">
                                📈 <strong>Portfolio Diversification:</strong> Spread investments across different asset classes
                            </div>
                            <div style="margin: 10px 0; padding: 10px; background: #1a1a1a; border-radius: 5px;">
                                📈 <strong>Goal-based Investing:</strong> Create separate funds for each financial goal
                            </div>
                            <div style="margin: 10px 0; padding: 10px; background: #1a1a1a; border-radius: 5px;">
                                📈 <strong>Review & Rebalance:</strong> Quarterly portfolio review and rebalancing
                            </div>
                        </div>
                    </div>

                    <div style="margin-bottom: 30px;">
                        <h4 style="color: #17a2b8; border-bottom: 2px solid #17a2b8; padding-bottom: 10px;">
                            Long-term Strategy (1+ Years)
                        </h4>
                        <div style="margin: 15px 0;">
                            <div style="margin: 10px 0; padding: 10px; background: #1a1a1a; border-radius: 5px;">
                                🚀 <strong>Wealth Creation:</strong> Focus on equity investments for long-term wealth building
                            </div>
                            <div style="margin: 10px 0; padding: 10px; background: #1a1a1a; border-radius: 5px;">
                                🚀 <strong>Retirement Planning:</strong> Increase retirement corpus contributions
                            </div>
                            <div style="margin: 10px 0; padding: 10px; background: #1a1a1a; border-radius: 5px;">
                                🚀 <strong>Estate Planning:</strong> Create will and succession planning
                            </div>
                        </div>
                    </div>
                </div>
            `;

            document.getElementById('report-preview').style.display = 'block';
            document.getElementById('report-content').innerHTML = reportContent;
        }

        function downloadDetailedReport() {
            generatePDFReport('Detailed Financial Report');
        }

        function downloadInvestmentReport() {
            generatePDFReport('Investment Strategy Report');
        }

        function downloadActionPlan() {
            generatePDFReport('Financial Action Plan');
        }

        function generatePDFReport(title) {
            // This is a demo implementation
            // In a real application, you would use jsPDF to generate actual PDFs
            showAlert(`${title} PDF generation initiated. This is a demo version - in production, this would generate and download a professional PDF report.`, 'info');
        }

        // Executive Summary Functions
        function generateExecutiveSummary() {
            const totalAssets = clientData.assets.reduce((sum, asset) => sum + asset.value, 0);
            const totalLiabilities = clientData.loans.reduce((sum, loan) => sum + loan.amount, 0);
            const netWorth = totalAssets - totalLiabilities;
            const monthlyIncome = clientData.financialStatus.monthlyIncome || 0;
            const monthlyExpenses = clientData.financialStatus.monthlyExpenses || 0;
            const savingsRate = monthlyIncome > 0 ? ((monthlyIncome - monthlyExpenses) / monthlyIncome * 100) : 0;

            const summaryContent = `
                <div class="alert alert-success">
                    <h4><i class="fas fa-chart-line"></i> Executive Summary</h4>
                    <p>Generated on ${new Date().toLocaleDateString()}</p>
                </div>

                <div class="form-grid">
                    <div class="card">
                        <div class="card-header">
                            <h4><i class="fas fa-user"></i> Client Overview</h4>
                        </div>
                        <div class="data-display">
                            <div class="data-row">
                                <span class="data-label">Name:</span>
                                <span class="data-value">${clientData.basicInfo.name || 'Not provided'}</span>
                            </div>
                            <div class="data-row">
                                <span class="data-label">Age:</span>
                                <span class="data-value">${clientData.basicInfo.age || 'Not provided'} years</span>
                            </div>
                            <div class="data-row">
                                <span class="data-label">Investor Type:</span>
                                <span class="data-value">${clientData.assessmentResults.personalityType || 'Not assessed'}</span>
                            </div>
                            <div class="data-row">
                                <span class="data-label">Risk Profile:</span>
                                <span class="data-value">${clientData.riskProfile.tolerance || 'Not defined'}</span>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h4><i class="fas fa-chart-bar"></i> Financial Health</h4>
                        </div>
                        <div class="data-display">
                            <div class="data-row">
                                <span class="data-label">Net Worth:</span>
                                <span class="data-value">₹${formatCurrency(netWorth)}</span>
                            </div>
                            <div class="data-row">
                                <span class="data-label">Monthly Income:</span>
                                <span class="data-value">₹${formatCurrency(monthlyIncome)}</span>
                            </div>
                            <div class="data-row">
                                <span class="data-label">Savings Rate:</span>
                                <span class="data-value">${savingsRate.toFixed(1)}%</span>
                            </div>
                            <div class="data-row">
                                <span class="data-label">Financial Goals:</span>
                                <span class="data-value">${clientData.goals.length} active goals</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h4><i class="fas fa-bullseye"></i> Key Recommendations</h4>
                    </div>
                    <ul style="margin-left: 20px; line-height: 1.8;">
                        ${savingsRate < 10 ? '<li style="color: #dc3545;">⚠️ Increase your savings rate to at least 20% of income</li>' : ''}
                        ${netWorth < 0 ? '<li style="color: #dc3545;">⚠️ Focus on debt reduction to improve net worth</li>' : ''}
                        ${clientData.goals.length === 0 ? '<li style="color: #ffc107;">📋 Define clear financial goals with timelines</li>' : ''}
                        ${!clientData.assessmentResults.personalityType ? '<li style="color: #17a2b8;">📊 Complete personality assessment for better recommendations</li>' : ''}
                        <li style="color: #28a745;">✅ Consider starting SIP of ₹${formatCurrency(clientData.riskProfile.monthlyInvestment || 10000)} monthly</li>
                        <li style="color: #28a745;">✅ Build emergency fund of ₹${formatCurrency(monthlyExpenses * 6)}</li>
                        <li style="color: #28a745;">✅ Review and optimize insurance coverage</li>
                    </ul>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h4><i class="fas fa-road"></i> Next Steps</h4>
                    </div>
                    <div class="alert alert-info">
                        <ol style="margin-left: 20px; line-height: 1.8;">
                            <li>Complete all sections of the financial planner</li>
                            <li>Review and finalize investment strategy</li>
                            <li>Implement recommended portfolio allocation</li>
                            <li>Set up automatic investments (SIP)</li>
                            <li>Schedule quarterly review meetings</li>
                        </ol>
                    </div>
                </div>
            `;

            document.getElementById('executive-summary-content').innerHTML = summaryContent;
        }

        // Chatbot Functions
        function toggleChatbot() {
            const chatbotWindow = document.getElementById('chatbot-window');
            isChatbotOpen = !isChatbotOpen;
            chatbotWindow.style.display = isChatbotOpen ? 'block' : 'none';
            
            if (isChatbotOpen && document.getElementById('chat-messages').children.length === 0) {
                addMessageToChat('bot', 'Hello! I\'m your financial planning assistant. I can help you with investment advice, retirement planning, tax saving strategies, and more. What would you like to know about your financial plan?');
            }
        }

        function sendMessage() {
            const input = document.getElementById('chat-input');
            const message = input.value.trim();
            
            if (message === '') return;

            // Add user message to chat
            addMessageToChat('user', message);
            
            // Clear input
            input.value = '';

            // Simulate bot response
            setTimeout(() => {
                const response = generateBotResponse(message);
                addMessageToChat('bot', response);
            }, 1000);
        }

        function addMessageToChat(sender, message) {
            const chatMessages = document.getElementById('chat-messages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `chat-message ${sender}`;
            
            if (sender === 'bot') {
                messageDiv.innerHTML = `
                    <div class="message-avatar">
                        <i class="fas fa-robot"></i>
                    </div>
                    <div class="message-content">${message}</div>
                `;
            } else {
                messageDiv.innerHTML = `
                    <div class="message-content">${message}</div>
                    <div class="message-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                `;
            }
            
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function generateBotResponse(message) {
            const lowerMessage = message.toLowerCase();
            
            if (lowerMessage.includes('sip') || lowerMessage.includes('investment')) {
                return "SIP (Systematic Investment Plan) is a great way to build wealth over time. Based on your risk profile, I recommend starting with ₹" + formatCurrency(clientData.riskProfile.monthlyInvestment || 10000) + " monthly. Would you like me to show you some fund recommendations?";
            }
            
            if (lowerMessage.includes('retirement')) {
                return "Retirement planning is crucial! Based on your current age and expenses, you should aim to accumulate a corpus that can provide 25-30 times your annual expenses. Have you calculated your retirement needs using our retirement calculator?";
            }
            
            if (lowerMessage.includes('tax') || lowerMessage.includes('saving')) {
                return "Tax saving is important for wealth building. You can save up to ₹46,800 annually by investing ₹1.5 lakh in 80C and ₹25,000 in health insurance under 80D. ELSS funds are particularly good as they offer equity returns with tax benefits.";
            }
            
            if (lowerMessage.includes('emergency') || lowerMessage.includes('fund')) {
                return "An emergency fund should cover 6-12 months of expenses. Based on your monthly expenses of ₹" + formatCurrency(clientData.financialStatus.monthlyExpenses || 50000) + ", you should maintain ₹" + formatCurrency((clientData.financialStatus.monthlyExpenses || 50000) * 6) + " in liquid funds or savings account.";
            }
            
            if (lowerMessage.includes('insurance')) {
                return "Insurance is your financial safety net. You need life insurance of 10-15 times your annual income and health insurance of at least ₹5 lakhs. Have you reviewed your current insurance coverage in our insurance section?";
            }
            
            if (lowerMessage.includes('goal') || lowerMessage.includes('planning')) {
                return "Goal-based financial planning is the key to success. I see you have " + clientData.goals.length + " goals defined. Each goal should have a specific timeline and investment strategy. Would you like help prioritizing your goals?";
            }
            
            if (lowerMessage.includes('risk')) {
                return "Your risk profile shows you're a " + (clientData.riskProfile.tolerance || 'moderate') + " investor. This means you should allocate " + (clientData.riskProfile.tolerance === 'aggressive' ? '70-80%' : clientData.riskProfile.tolerance === 'conservative' ? '20-40%' : '50-70%') + " to equity investments for optimal returns.";
            }
            
            if (lowerMessage.includes('debt') || lowerMessage.includes('loan')) {
                return "Debt management is crucial for financial health. Focus on paying off high-interest debts first (credit cards, personal loans). For home loans, consider prepayment if the interest rate is above 8%. Your current debt-to-income ratio should be below 40%.";
            }
            
            if (lowerMessage.includes('hello') || lowerMessage.includes('hi')) {
                return "Hello! I'm your financial planning assistant. I can help you with investment advice, retirement planning, tax saving strategies, and more. What would you like to know about your financial plan?";
            }
            
            // Default response
            return "That's a great question! Based on your financial profile, I'd recommend focusing on building a diversified portfolio aligned with your risk tolerance. You can explore our investment advisory section for personalized recommendations, or feel free to ask me about specific areas like SIP planning, tax saving, or retirement planning.";
        }

        function handleChatKeyPress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        // Utility Functions
        function formatCurrency(amount) {
            if (amount >= 10000000) {
                return (amount / 10000000).toFixed(2) + ' Cr';
            } else if (amount >= 100000) {
                return (amount / 100000).toFixed(2) + ' L';
            } else if (amount >= 1000) {
                return (amount / 1000).toFixed(0) + 'K';
            }
            return Math.round(amount).toString();
        }

        function showAlert(message, type = 'success') {
            const alertDiv = document.createElement('div');
            alertDiv.className = `alert alert-${type}`;
            alertDiv.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                z-index: 1000;
                min-width: 300px;
                animation: slideIn 0.3s ease-out;
            `;
            alertDiv.innerHTML = `
                <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'danger' ? 'exclamation-triangle' : 'info-circle'}"></i>
                ${message}
                <button onclick="this.parentElement.remove()" style="float: right; background: none; border: none; color: inherit; font-size: 1.2em; cursor: pointer;">&times;</button>
            `;
            
            document.body.appendChild(alertDiv);
            
            setTimeout(() => {
                if (alertDiv.parentElement) {
                    alertDiv.remove();
                }
            }, 5000);
        }

        // Modal Functions
        function showProfileModal() {
            document.getElementById('save-profile-modal').style.display = 'flex';
            document.getElementById('profile-name-input').focus();
        }

        function hideProfileModal() {
            document.getElementById('save-profile-modal').style.display = 'none';
            document.getElementById('profile-name-input').value = '';
        }

        function saveCurrentProfile() {
            const profileName = document.getElementById('profile-name-input').value.trim();
            
            if (!profileName) {
                showAlert('Please enter a profile name', 'danger');
                return;
            }

            const profileId = Date.now().toString();
            const profiles = JSON.parse(localStorage.getItem('financialPlannerProfiles') || '{}');
            
            // Update client data with profile info
            clientData.profileInfo = {
                name: profileName,
                createdDate: new Date().toISOString(),
                lastModified: new Date().toISOString()
            };

            profiles[profileId] = clientData;
            localStorage.setItem('financialPlannerProfiles', JSON.stringify(profiles));
            
            currentProfileId = profileId;
            hideProfileModal();
            showAlert(`Profile "${profileName}" saved successfully!`, 'success');
            
            // Update header
            updateHeaderProfileInfo();
        }

        function showExportModal() {
            document.getElementById('export-modal').style.display = 'flex';
        }

        function hideExportModal() {
            document.getElementById('export-modal').style.display = 'none';
        }

        function showImportModal() {
            document.getElementById('import-data-modal').style.display = 'flex';
        }

        function hideImportModal() {
            document.getElementById('import-data-modal').style.display = 'none';
        }

        function importFromFile() {
            const fileInput = document.getElementById('import-file-input');
            const file = fileInput.files[0];
            
            if (!file) {
                showAlert('Please select a file to import', 'danger');
                return;
            }

            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const importedData = JSON.parse(e.target.result);
                    
                    // Validate data structure
                    if (importedData.basicInfo || importedData.financialStatus || importedData.assets) {
                        clientData = { ...clientData, ...importedData };
                        
                        // Generate new profile ID
                        currentProfileId = Date.now().toString();
                        
                        // Save imported profile
                        const profiles = JSON.parse(localStorage.getItem('financialPlannerProfiles') || '{}');
                        profiles[currentProfileId] = clientData;
                        localStorage.setItem('financialPlannerProfiles', JSON.stringify(profiles));
                        
                        hideImportModal();
                        showAlert('Data imported successfully!', 'success');
                        
                        // Refresh all displays
                        loadClientData();
                    } else {
                        showAlert('Invalid file format', 'danger');
                    }
                } catch (error) {
                    showAlert('Error reading file. Please check the format.', 'danger');
                }
            };
            
            reader.readAsText(file);
        }

        function exportCurrentData() {
            const dataToExport = {
                ...clientData,
                exportDate: new Date().toISOString(),
                version: '1.0'
            };
            
            const dataStr = JSON.stringify(dataToExport, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            
            const link = document.createElement('a');
            link.href = URL.createObjectURL(dataBlob);
            link.download = `financial_data_${new Date().toISOString().split('T')[0]}.json`;
            link.click();
            
            hideExportModal();
            showAlert('Data exported successfully!', 'success');
        }

        function updateHeaderProfileInfo() {
            const profileInfo = clientData.profileInfo;
            const nameElement = document.getElementById('current-profile-name');
            
            if (profileInfo && profileInfo.name) {
                nameElement.textContent = profileInfo.name;
            } else {
                nameElement.textContent = 'Unsaved Profile';
            }
        }

        function loadClientData() {
            // Update all form fields with current data
            if (clientData.basicInfo.name) {
                document.getElementById('client-name').value = clientData.basicInfo.name;
                document.getElementById('client-age').value = clientData.basicInfo.age;
                document.getElementById('client-occupation').value = clientData.basicInfo.occupation;
                document.getElementById('marital-status').value = clientData.basicInfo.maritalStatus;
                document.getElementById('dependents').value = clientData.basicInfo.dependents;
                document.getElementById('client-city').value = clientData.basicInfo.city;
                displayBasicInfo();
            }

            if (clientData.financialStatus.monthlyIncome) {
                document.getElementById('monthly-income').value = clientData.financialStatus.monthlyIncome;
                document.getElementById('monthly-expenses').value = clientData.financialStatus.monthlyExpenses;
                document.getElementById('current-savings').value = clientData.financialStatus.currentSavings;
                document.getElementById('annual-income').value = clientData.financialStatus.annualIncome;
                displayFinancialInfo();
            }

            if (clientData.riskProfile.experience) {
                document.getElementById('investment-experience').value = clientData.riskProfile.experience;
                document.getElementById('risk-tolerance').value = clientData.riskProfile.tolerance;
                document.getElementById('investment-horizon').value = clientData.riskProfile.horizon;
                document.getElementById('monthly-investment').value = clientData.riskProfile.monthlyInvestment;
                displayRiskInfo();
            }

            if (clientData.insuranceProfile.currentLifeInsurance) {
                document.getElementById('current-life-insurance').value = clientData.insuranceProfile.currentLifeInsurance;
                document.getElementById('current-health-insurance').value = clientData.insuranceProfile.currentHealthInsurance;
                document.getElementById('outstanding-loans').value = clientData.insuranceProfile.outstandingLoans;
                document.getElementById('family-expenses').value = clientData.insuranceProfile.familyExpenses;
                document.getElementById('income-years').value = clientData.insuranceProfile.incomeYears;
                displayInsuranceInfo();
            }

            // Update lists
            updateAssetsList();
            updateLoansList();
            updateGoalsList();
            updateNetWorth();
            updateHeaderProfileInfo();
        }
    </script>
</body>
</html>
