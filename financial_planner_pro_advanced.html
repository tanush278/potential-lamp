<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Financial Planner Pro - Advanced Edition</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.3.0/dist/chart.umd.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css" rel="stylesheet">
    <style>
        :root {
            --primary-black: #111216; /* Slightly softer black */
            --secondary-black: #18191d; /* Slightly lighter for contrast */
            --card-black: #1c1d22; /* Lighter for cards */
            --border-gray: #2a2b2f; /* Softer border */
            --text-white: #f7f7f7; /* Softer white */
            --text-gray: #cccccc; /* Lighter gray for text */
            --accent-white: #ffffff;
            --success-green: #00ff88;
            --warning-orange: #ff9f43;
            --error-red: #ff6b6b;
            --info-blue: #00d4ff;
            --gradient-primary: linear-gradient(135deg, #18191d 0%, #111216 100%);
            --gradient-card: linear-gradient(145deg, #23242a 0%, #18191d 100%);
            --gradient-accent: linear-gradient(90deg, #f7f7f7 0%, #cccccc 100%);
            --shadow-light: 0 4px 24px rgba(255,255,255,0.04);
            --shadow-heavy: 0 20px 60px rgba(0,0,0,0.7);
            --border-radius-sm: 10px;
            --border-radius-md: 18px;
            --border-radius-lg: 30px;
            --transition-smooth: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-bounce: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: var(--primary-black);
            color: var(--text-white);
            line-height: 1.6;
            overflow-x: hidden;
            scroll-behavior: smooth;
            font-size: 17px;
        }

        /* Enhanced Container System */
        .container {
            max-width: 1300px; /* Standard professional width */
            margin: 0 auto;
            padding: 0 2rem; /* Comfortable padding */
        }

        .container-fluid {
            width: 100%;
            padding: 0 1rem;
        }

        /* Stunning Profile Management Screen */
        .profile-management {
            min-height: 100vh;
            background: var(--primary-black);
            position: relative;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .profile-management::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(120deg, rgba(255,255,255,0.03) 0%, transparent 100%);
            z-index: 0;
        }

        .profile-card {
            background: var(--gradient-card);
            border: 1.5px solid var(--border-gray);
            border-radius: var(--border-radius-lg);
            padding: 2.5rem 2rem 2rem 2rem;
            max-width: 900px;
            width: 98%;
            position: relative;
            box-shadow: var(--shadow-heavy);
            z-index: 2;
            animation: slideInUp 1s ease-out;
        }

        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .profile-header {
            text-align: center;
            margin-bottom: 3rem;
            position: relative;
        }

        .profile-header::after {
            content: '';
            position: absolute;
            bottom: -1rem;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 3px;
            background: var(--gradient-accent);
            border-radius: 2px;
        }

        .profile-header h1 {
            font-family: 'Poppins', sans-serif;
            font-size: clamp(1.4rem, 2.5vw, 2.1rem); /* Reduced for professional look */
            font-weight: 800;
            margin-bottom: 1rem;
            background: var(--gradient-accent);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: -0.02em;
            line-height: 1.1;
        }

        .profile-header .subtitle {
            font-size: 1.15rem;
            color: var(--text-gray);
            font-weight: 400;
            margin-bottom: 0.5rem;
        }

        .profile-header .tagline {
            font-size: 1rem;
            color: var(--text-gray);
            font-style: italic;
            opacity: 0.7;
        }

        /* Enhanced Welcome Section */
        .welcome-section {
            text-align: center;
            margin: 2rem 0 3rem;
            padding: 2rem 1.5rem;
            background: var(--card-black);
            border-radius: var(--border-radius-md);
            border: 1px solid var(--border-gray);
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow-light);
        }

        .welcome-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            animation: shimmer 3s infinite;
        }

        @keyframes shimmer {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        .welcome-section h3 {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
            color: var(--text-white);
        }

        .welcome-section p {
            font-size: 1.05rem;
            color: var(--text-gray);
            line-height: 1.7;
            max-width: 600px;
            margin: 0 auto;
        }

        /* Profile List Enhancement */
        .profile-list {
            margin: 2rem 0;
        }

        .profile-list h3 {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
            color: var(--text-white);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .profiles-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-top: 1.5rem;
        }

        .profile-item {
            background: var(--gradient-card);
            border: 2px solid var(--border-gray);
            border-radius: var(--border-radius-md);
            padding: 1.5rem;
            position: relative;
            transition: var(--transition-smooth);
            overflow: hidden;
        }

        .profile-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--gradient-accent);
            transform: scaleX(0);
            transition: var(--transition-smooth);
        }

        .profile-item:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-light);
            border-color: var(--accent-white);
        }

        .profile-item:hover::before {
            transform: scaleX(1);
        }

        .profile-item-info h4 {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--text-white);
            margin-bottom: 0.5rem;
        }

        .profile-item-info p {
            color: var(--text-gray);
            font-size: 0.9rem;
            margin-bottom: 0.25rem;
        }

        .profile-item-actions {
            display: flex;
            gap: 0.75rem;
            margin-top: 1rem;
        }

        /* Enhanced Action Buttons */
        .action-buttons {
            display: flex;
            gap: 1.2rem;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 2.2rem;
        }

        /* Stunning Cover Page */
        .cover-page {
            min-height: 100vh;
            background: var(--primary-black);
            position: relative;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .cover-page::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(120deg, rgba(255,255,255,0.04) 0%, transparent 100%);
            z-index: 0;
        }

        .cover-content {
            max-width: 700px;
            text-align: center;
            padding: 2.5rem 1.5rem;
            position: relative;
            z-index: 2;
            background: var(--card-black);
            border-radius: var(--border-radius-lg);
            box-shadow: var(--shadow-light);
        }

        .app-title {
            font-family: 'Poppins', sans-serif;
            font-size: clamp(1.5rem, 3vw, 2.2rem); /* Reduced for professional look */
            font-weight: 900;
            margin-bottom: 1.2rem;
            background: var(--gradient-accent);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: -0.03em;
            line-height: 1;
        }

        @keyframes titleGlow {
            0%, 100% { filter: brightness(1); }
            50% { filter: brightness(1.2); }
        }

        .app-subtitle {
            font-size: 1.2rem;
            color: var(--text-gray);
            margin-bottom: 2rem;
            font-weight: 400;
            line-height: 1.4;
        }

        .features-highlight {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin: 2rem 0 3rem;
        }

        .feature-item {
            background: var(--gradient-card);
            border: 1px solid var(--border-gray);
            border-radius: var(--border-radius-md);
            padding: 1.5rem;
            text-align: center;
            transition: var(--transition-bounce);
        }

        .feature-item:hover {
            transform: translateY(-10px) scale(1.05);
            box-shadow: var(--shadow-light);
        }

        .feature-icon {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            color: var(--accent-white);
        }

        .feature-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .feature-desc {
            font-size: 0.9rem;
            color: var(--text-gray);
        }

        /* Revolutionary Button Design */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
            padding: 1.2rem 2.5rem; /* Increased padding */
            border: none;
            border-radius: var(--border-radius-lg);
            font-weight: 600;
            font-size: 1.2rem; /* Increased font size */
            cursor: pointer;
            transition: var(--transition-bounce);
            text-decoration: none;
            position: relative;
            overflow: hidden;
            min-width: 200px; /* Increased min width */
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: var(--transition-smooth);
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn-primary {
            background: var(--gradient-accent);
            color: var(--primary-black);
            box-shadow: 0 8px 25px rgba(255, 255, 255, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 15px 35px rgba(255, 255, 255, 0.4);
        }

        .btn-secondary {
            background: var(--card-black);
            color: var(--text-white);
            border: 1.5px solid var(--border-gray);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
        }

        .btn-secondary:hover {
            transform: translateY(-3px) scale(1.05);
            border-color: var(--accent-white);
            box-shadow: 0 15px 35px rgba(255, 255, 255, 0.1);
        }

        .btn-danger {
            background: linear-gradient(135deg, var(--error-red), #ff5252);
            color: var(--text-white);
            box-shadow: 0 8px 25px rgba(255, 107, 107, 0.3);
        }

        .btn-danger:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 15px 35px rgba(255, 107, 107, 0.4);
        }

        .btn-small {
            padding: 0.6rem 1.2rem;
            font-size: 0.9rem;
            min-width: 120px;
        }

        .btn-large {
            padding: 1.5rem 3rem; /* Increased padding */
            font-size: 1.3rem; /* Increased font size */
            min-width: 260px; /* Increased min width */
        }

        /* Enhanced Main App Layout */
        .main-app {
            display: none;
            min-height: 100vh;
            background: var(--primary-black);
        }

        /* Premium Header */
        .app-header {
            background: var(--gradient-card);
            border-bottom: 2px solid var(--border-gray);
            padding: 1rem 0;
            position: sticky;
            top: 0;
            z-index: 100;
            backdrop-filter: blur(20px);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .app-logo {
            font-family: 'Poppins', sans-serif;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text-white);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .app-logo i {
            font-size: 1.8rem;
            background: var(--gradient-accent);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .profile-info-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .current-profile {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            background: var(--secondary-black);
            border-radius: var(--border-radius-md);
            border: 1px solid var(--border-gray);
        }

        /* Advanced Navigation */
        .main-nav, .sub-nav {
            background: var(--secondary-black);
            border-bottom: 1px solid var(--border-gray);
            padding: 1rem 0;
            position: sticky;
            top: 64px; /* Height of header (approx 64px) */
            z-index: 99;
            backdrop-filter: blur(10px);
        }

        .nav-buttons, .sub-nav-buttons {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
            justify-content: center;
        }

        .nav-btn, .sub-nav-btn {
            background: var(--card-black);
            color: var(--text-white);
            border: 2px solid var(--border-gray);
            padding: 0.8rem 1.5rem;
            border-radius: var(--border-radius-lg);
            cursor: pointer;
            font-weight: 500;
            font-size: 0.95rem;
            transition: var(--transition-smooth);
            position: relative;
            overflow: hidden;
        }

        .nav-btn::before, .sub-nav-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transition: var(--transition-smooth);
        }

        .nav-btn:hover, .sub-nav-btn:hover {
            transform: translateY(-2px);
            border-color: var(--accent-white);
            box-shadow: var(--shadow-light);
        }

        .nav-btn:hover::before, .sub-nav-btn:hover::before {
            left: 100%;
        }

        .nav-btn.active, .sub-nav-btn.active {
            background: var(--gradient-accent);
            color: var(--primary-black);
            border-color: var(--accent-white);
            box-shadow: 0 5px 20px rgba(255, 255, 255, 0.3);
        }

        /* Premium Section Layout */
        .section {
            display: none;
            padding: 2.5rem 0;
            min-height: calc(100vh - 200px);
        }

        .section.active {
            display: block;
            animation: sectionFadeIn 0.5s ease-out;
        }

        @keyframes sectionFadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .section-header {
            text-align: center;
            margin-bottom: 3rem;
            position: relative;
        }

        .section-header::after {
            content: '';
            position: absolute;
            bottom: -1rem;
            left: 50%;
            transform: translateX(-50%);
            width: 80px;
            height: 3px;
            background: var(--gradient-accent);
            border-radius: 2px;
        }

        .section-title {
            font-family: 'Poppins', sans-serif;
            font-size: clamp(1.2rem, 2vw, 1.7rem); /* Reduced for professional look */
            font-weight: 700;
            margin-bottom: 1rem;
            color: var(--text-white);
            letter-spacing: -0.01em;
        }

        .section-subtitle {
            font-size: 1.2rem;
            color: var(--text-gray);
            max-width: 600px;
            margin: 0 auto;
            line-height: 1.6;
        }

        /* Revolutionary Card Design */
        .card {
            background: var(--gradient-card);
            border: 2px solid var(--border-gray);
            border-radius: var(--border-radius-md);
            padding: 3rem; /* Increased from 2rem */
            margin: 2rem 0; /* Increased margin */
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            position: relative;
            overflow: hidden;
            transition: var(--transition-smooth);
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: var(--gradient-accent);
            transform: scaleX(0);
            transition: var(--transition-smooth);
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.7);
            border-color: var(--accent-white);
        }

        .card:hover::before {
            transform: scaleX(1);
        }

        .card-header {
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--border-gray);
            position: relative;
        }

        .card-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--text-white);
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .card-subtitle {
            color: var(--text-gray);
            font-size: 0.95rem;
            line-height: 1.5;
        }

        /* Advanced Form System */
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin: 2rem 0;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: var(--text-white);
            font-size: 0.95rem;
        }

        .required {
            color: var(--error-red);
            margin-left: 0.25rem;
        }

        .form-input, .form-select {
            width: 100%;
            padding: 1rem 1.25rem;
            background: var(--secondary-black);
            border: 2px solid var(--border-gray);
            border-radius: var(--border-radius-md);
            color: var(--text-white);
            font-size: 1rem;
            transition: var(--transition-smooth);
            font-family: inherit;
        }

        .form-input:focus, .form-select:focus {
            outline: none;
            border-color: var(--accent-white);
            background: var(--card-black);
            box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.1);
        }

        .form-input::placeholder {
            color: var(--text-gray);
        }

        /* Enhanced Assessment Design */
        .assessment-container {
            max-width: 900px;
            margin: 0 auto;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: var(--secondary-black);
            border-radius: 4px;
            margin-bottom: 2rem;
            overflow: hidden;
            border: 1px solid var(--border-gray);
        }

        .progress-fill {
            height: 100%;
            background: var(--gradient-accent);
            transition: width 0.8s cubic-bezier(0.4, 0, 0.2, 1);
            border-radius: 4px;
        }

        .question-card {
            background: var(--gradient-card);
            border: 2px solid var(--border-gray);
            border-radius: var(--border-radius-md);
            padding: 3rem;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .question-number {
            color: var(--text-gray);
            font-size: 1rem;
            margin-bottom: 1.5rem;
            font-weight: 500;
        }

        .question-text {
            font-size: 1.6rem;
            font-weight: 600;
            margin-bottom: 2rem;
            color: var(--text-white);
            line-height: 1.4;
        }

        .options-grid {
            display: grid;
            gap: 1rem;
            margin: 2rem 0;
        }

        .option-btn {
            background: var(--secondary-black);
            color: var(--text-white);
            border: 2px solid var(--border-gray);
            padding: 1.25rem 1.5rem;
            border-radius: var(--border-radius-md);
            cursor: pointer;
            font-size: 1rem;
            transition: var(--transition-bounce);
            text-align: left;
            position: relative;
            overflow: hidden;
        }

        .option-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            transition: var(--transition-smooth);
        }

        .option-btn:hover {
            transform: translateY(-2px) scale(1.02);
            border-color: var(--accent-white);
            box-shadow: var(--shadow-light);
        }

        .option-btn:hover::before {
            left: 100%;
        }

        .option-btn.selected {
            background: var(--gradient-accent);
            color: var(--primary-black);
            border-color: var(--accent-white);
            transform: translateY(-2px) scale(1.02);
            box-shadow: 0 10px 30px rgba(255, 255, 255, 0.3);
        }

        .results-container {
            text-align: center;
            padding: 3rem;
            background: var(--gradient-card);
            border-radius: var(--border-radius-md);
            border: 2px solid var(--border-gray);
        }

        .personality-type {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--text-white);
            margin: 1.5rem 0;
            background: var(--gradient-accent);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .personality-description {
            font-size: 1.2rem;
            color: var(--text-gray);
            margin-bottom: 2rem;
            line-height: 1.7;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        /* Premium Data Display */
        .data-display {
            background: var(--secondary-black);
            border: 1px solid var(--border-gray);
            border-radius: var(--border-radius-md);
            padding: 1.5rem;
            margin: 1rem 0;
        }

        .data-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem 0;
            border-bottom: 1px solid var(--border-gray);
        }

        .data-row:last-child {
            border-bottom: none;
        }

        .data-label {
            font-weight: 500;
            color: var(--text-gray);
            flex: 1;
        }

        .data-value {
            font-weight: 600;
            color: var(--text-white);
            text-align: right;
            flex: 1;
        }

        /* Enhanced List Items */
        .items-list {
            margin: 1.5rem 0;
        }

        .list-item {
            background: var(--gradient-card);
            border: 2px solid var(--border-gray);
            border-radius: var(--border-radius-md);
            padding: 1.5rem;
            margin: 1rem 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: var(--transition-smooth);
            position: relative;
            overflow: hidden;
        }

        .list-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: var(--gradient-accent);
            transform: scaleY(0);
            transition: var(--transition-smooth);
        }

        .list-item:hover {
            transform: translateX(5px);
            border-color: var(--accent-white);
            box-shadow: var(--shadow-light);
        }

        .list-item:hover::before {
            transform: scaleY(1);
        }

        .item-info {
            flex: 1;
        }

        .item-title {
            font-weight: 600;
            color: var(--text-white);
            margin-bottom: 0.5rem;
            font-size: 1.1rem;
        }

        .item-details {
            color: var(--text-gray);
            font-size: 0.9rem;
            line-height: 1.4;
        }

        .item-actions {
            display: flex;
            gap: 0.75rem;
            flex-shrink: 0;
        }

        /* Revolutionary Charts */
        .charts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
            margin: 2rem 0;
        }

        .chart-container {
            background: var(--gradient-card);
            border: 2px solid var(--border-gray);
            border-radius: var(--border-radius-md);
            padding: 2rem;
            position: relative;
            overflow: hidden;
        }

        .chart-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--gradient-accent);
            transform: scaleX(0);
            transition: var(--transition-smooth);
        }

        .chart-container:hover::before {
            transform: scaleX(1);
        }

        .chart-title {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
            text-align: center;
            color: var(--text-white);
        }

        /* Advanced Widgets */
        .widgets-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .widget {
            background: var(--gradient-card);
            border: 2px solid var(--border-gray);
            border-radius: var(--border-radius-md);
            padding: 2rem;
            text-align: center;
            position: relative;
            overflow: hidden;
            transition: var(--transition-bounce);
        }

        .widget::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--gradient-accent);
            transform: scaleX(0);
            transition: var(--transition-smooth);
        }

        .widget:hover {
            transform: translateY(-8px) scale(1.03);
            box-shadow: var(--shadow-light);
        }

        .widget:hover::before {
            transform: scaleX(1);
        }

        .widget-icon {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            color: var(--accent-white);
        }

        .widget-value {
            font-size: 2.2rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            color: var(--text-white);
            font-family: 'Poppins', sans-serif;
        }

        .widget-label {
            color: var(--text-gray);
            font-size: 0.95rem;
            font-weight: 500;
        }

        /* Premium Chatbot */
        .chatbot-container {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            z-index: 1000;
        }

        .chatbot-toggle {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            background: var(--gradient-accent);
            color: var(--primary-black);
            border: none;
            font-size: 1.8rem;
            cursor: pointer;
            box-shadow: 0 10px 30px rgba(255, 255, 255, 0.3);
            transition: var(--transition-bounce);
            position: relative;
            overflow: hidden;
        }

        .chatbot-toggle::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transform: translateX(-100%);
            transition: var(--transition-smooth);
        }

        .chatbot-toggle:hover {
            transform: scale(1.1) rotate(5deg);
            box-shadow: 0 15px 40px rgba(255, 255, 255, 0.4);
        }

        .chatbot-toggle:hover::before {
            transform: translateX(100%);
        }

        .chatbot-window {
            display: none;
            position: absolute;
            bottom: 90px;
            right: 0;
            width: 400px;
            height: 600px;
            background: var(--gradient-card);
            border: 2px solid var(--border-gray);
            border-radius: var(--border-radius-md);
            box-shadow: var(--shadow-heavy);
            overflow: hidden;
        }

        .chatbot-header {
            background: var(--secondary-black);
            padding: 1.5rem;
            border-bottom: 1px solid var(--border-gray);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chatbot-header h4 {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 600;
        }

        .chatbot-messages {
            height: 450px;
            overflow-y: auto;
            padding: 1rem;
            scroll-behavior: smooth;
        }

        .chat-message {
            margin: 1rem 0;
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
            animation: messageSlideIn 0.3s ease-out;
        }

        @keyframes messageSlideIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .chat-message.user {
            flex-direction: row-reverse;
        }

        .message-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--gradient-accent);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
            color: var(--primary-black);
            flex-shrink: 0;
        }

        .chat-message.user .message-avatar {
            background: var(--secondary-black);
            color: var(--text-white);
            border: 2px solid var(--border-gray);
        }

        .message-content {
            background: var(--secondary-black);
            color: var(--text-white);
            padding: 1rem 1.25rem;
            border-radius: var(--border-radius-md);
            max-width: 80%;
            word-wrap: break-word;
            line-height: 1.5;
            border: 1px solid var(--border-gray);
        }

        .chat-message.user .message-content {
            background: var(--gradient-accent);
            color: var(--primary-black);
            border-color: var(--accent-white);
        }

        .chatbot-input {
            display: flex;
            padding: 1rem;
            border-top: 1px solid var(--border-gray);
            gap: 0.75rem;
            background: var(--secondary-black);
        }

        .chatbot-input input {
            flex: 1;
            padding: 0.75rem 1rem;
            background: var(--card-black);
            border: 1px solid var(--border-gray);
            border-radius: var(--border-radius-md);
            color: var(--text-white);
            font-size: 0.95rem;
        }

        .chatbot-input input:focus {
            outline: none;
            border-color: var(--accent-white);
        }

        /* Enhanced Modals */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(10px);
        }

        .modal-content {
            background: var(--gradient-card);
            border: 2px solid var(--border-gray);
            border-radius: var(--border-radius-md);
            padding: 2.5rem;
            max-width: 600px;
            width: 95%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            animation: modalSlideIn 0.3s ease-out;
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-50px) scale(0.9);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--border-gray);
        }

        .modal-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--text-white);
        }

        .close-btn {
            background: none;
            border: none;
            color: var(--text-gray);
            font-size: 1.5rem;
            cursor: pointer;
            transition: var(--transition-smooth);
            padding: 0.5rem;
            border-radius: 50%;
        }

        .close-btn:hover {
            color: var(--text-white);
            background: var(--secondary-black);
        }

        /* Premium Alerts */
        .alert {
            padding: 1.25rem 1.5rem;
            border-radius: var(--border-radius-md);
            margin: 1rem 0;
            font-weight: 500;
            border: 2px solid;
            position: relative;
            overflow: hidden;
        }

        .alert::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: currentColor;
        }

        .alert-success {
            background: rgba(0, 255, 136, 0.1);
            border-color: var(--success-green);
            color: var(--success-green);
        }

        .alert-danger {
            background: rgba(255, 107, 107, 0.1);
            border-color: var(--error-red);
            color: var(--error-red);
        }

        .alert-info {
            background: rgba(0, 212, 255, 0.1);
            border-color: var(--info-blue);
            color: var(--info-blue);
        }

        .alert-warning {
            background: rgba(255, 159, 67, 0.1);
            border-color: var(--warning-orange);
            color: var(--warning-orange);
        }

        /* File Upload Enhancement */
        .file-upload {
            border: 3px dashed var(--border-gray);
            border-radius: var(--border-radius-md);
            padding: 3rem 2rem;
            text-align: center;
            background: var(--secondary-black);
            transition: var(--transition-smooth);
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .file-upload::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.05), transparent);
            transition: var(--transition-smooth);
        }

        .file-upload:hover {
            border-color: var(--accent-white);
            background: var(--card-black);
            transform: scale(1.02);
        }

        .file-upload:hover::before {
            left: 100%;
        }

        .file-upload.dragover {
            border-color: var(--success-green);
            background: rgba(0, 255, 136, 0.05);
            transform: scale(1.05);
        }

        .upload-icon {
            font-size: 4rem;
            color: var(--text-gray);
            margin-bottom: 1.5rem;
            transition: var(--transition-smooth);
        }

        .file-upload:hover .upload-icon {
            color: var(--accent-white);
            transform: scale(1.1);
        }

        .upload-text {
            color: var(--text-gray);
            margin-bottom: 1rem;
            font-size: 1.1rem;
            font-weight: 500;
        }

        .upload-formats {
            color: var(--text-gray);
            font-size: 0.9rem;
            opacity: 0.7;
        }

        /* Export Options Enhancement */
        .export-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin: 1.5rem 0;
        }

        .export-option {
            background: var(--gradient-card);
            border: 2px solid var(--border-gray);
            border-radius: var(--border-radius-md);
            padding: 2rem;
            text-align: center;
            cursor: pointer;
            transition: var(--transition-bounce);
            position: relative;
            overflow: hidden;
        }

        .export-option::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: var(--gradient-accent);
            transform: scaleX(0);
            transition: var(--transition-smooth);
        }

        .export-option:hover {
            transform: translateY(-5px) scale(1.03);
            border-color: var(--accent-white);
            box-shadow: var(--shadow-light);
        }

        .export-option:hover::before {
            transform: scaleX(1);
        }

        .export-icon {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            color: var(--accent-white);
            transition: var(--transition-smooth);
        }

        .export-option:hover .export-icon {
            transform: scale(1.1) rotate(5deg);
        }

        .export-title {
            font-weight: 600;
            margin-bottom: 0.75rem;
            font-size: 1.1rem;
        }

        .export-description {
            color: var(--text-gray);
            font-size: 0.9rem;
            line-height: 1.4;
        }

        /* Advanced Responsive Design */
        @media (max-width: 1200px) {
            .container {
                max-width: 1140px;
                padding: 0 1.5rem;
            }
        }

        @media (max-width: 992px) {
            .container {
                max-width: 960px;
                padding: 0 1rem;
            }
            
            .form-grid {
                grid-template-columns: 1fr;
            }
            
            .charts-grid {
                grid-template-columns: 1fr;
            }
            
            .widgets-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .profile-card {
                padding: 2rem;
            }
            
            .cover-content {
                padding: 1rem;
            }
            
            .features-highlight {
                grid-template-columns: 1fr;
            }
            
            .action-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .btn {
                width: 100%;
                max-width: 300px;
            }
            
            .header-content {
                flex-direction: column;
                text-align: center;
            }
            
            .profile-info-header {
                justify-content: center;
            }
            
            .nav-buttons, .sub-nav-buttons {
                justify-content: flex-start;
                overflow-x: auto;
                padding-bottom: 0.5rem;
            }
            
            .nav-btn, .sub-nav-btn {
                flex-shrink: 0;
            }
            
            .widgets-grid {
                grid-template-columns: 1fr;
            }
            
            .chatbot-window {
                width: 350px;
                height: 500px;
            }
            
            .chatbot-messages {
                height: 350px;
            }
            
            .modal-content {
                padding: 1.5rem;
                margin: 1rem;
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: 0 0.75rem;
            }
            
            .profile-card {
                padding: 1.5rem;
            }
            
            .card {
                padding: 1.5rem;
            }
            
            .section {
                padding: 2rem 0;
            }
            
            .question-card {
                padding: 2rem;
            }
            
            .chatbot-container {
                bottom: 1rem;
                right: 1rem;
            }
            
            .chatbot-window {
                width: 320px;
                height: 450px;
            }
            
            .chatbot-messages {
                height: 300px;
            }
        }

        /* Loading Animation */
        .loading {
            display: inline-block;
            width: 24px;
            height: 24px;
            border: 3px solid var(--border-gray);
            border-radius: 50%;
            border-top-color: var(--accent-white);
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Scrollbar Styling */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--secondary-black);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--border-gray);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--text-gray);
        }

        /* Selection Styling */
        ::selection {
            background: rgba(255, 255, 255, 0.2);
            color: var(--text-white);
        }

        /* Focus Styling */
        *:focus {
            outline: 2px solid rgba(255, 255, 255, 0.3);
            outline-offset: 2px;
        }

        /* Print Styles */
        @media print {
            .chatbot-container,
            .app-header,
            .main-nav,
            .sub-nav {
                display: none !important;
            }
            
            .card {
                break-inside: avoid;
            }
        }

        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        @keyframes slideInUp {
            from { opacity: 0; transform: translateY(40px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(255,255,255,0.15); }
            70% { box-shadow: 0 0 0 10px rgba(255,255,255,0); }
            100% { box-shadow: 0 0 0 0 rgba(255,255,255,0); }
        }
        /* Card and Button Hover Effects */
        .card, .profile-card, .cover-content, .feature-item, .widget, .export-option {
            transition: box-shadow 0.3s, transform 0.3s, border-color 0.3s;
        }
        .card:hover, .profile-card:hover, .cover-content:hover, .feature-item:hover, .widget:hover, .export-option:hover {
            box-shadow: 0 8px 32px rgba(255,255,255,0.10);
            border-color: var(--accent-white);
            transform: translateY(-6px) scale(1.03);
        }
        .btn, .nav-btn, .sub-nav-btn {
            transition: box-shadow 0.2s, transform 0.2s, filter 0.2s;
        }
        .btn:hover, .nav-btn:hover, .sub-nav-btn:hover {
            filter: brightness(1.12);
            box-shadow: 0 4px 16px rgba(255,255,255,0.10);
            transform: scale(1.04);
        }
        .btn:active {
            animation: pulse 0.4s;
        }
        /* Section Alternating Backgrounds */
        .section:nth-of-type(even) {
            background: #16171a;
        }
        .section:nth-of-type(odd) {
            background: #111216;
        }
        /* Fade/slide-in on section/card entry */
        .section, .card, .profile-card, .cover-content {
            opacity: 0;
            animation: fadeIn 0.8s forwards;
        }
        .section.active, .card[data-animate], .profile-card[data-animate], .cover-content[data-animate] {
            animation: slideInUp 0.8s forwards;
        }
        /* Expandable Card */
        .expandable-card {
            overflow: hidden;
            transition: max-height 0.5s cubic-bezier(0.4,0,0.2,1), box-shadow 0.3s;
            max-height: 80px;
            cursor: pointer;
        }
        .expandable-card.expanded {
            max-height: 600px;
            box-shadow: 0 8px 32px rgba(255,255,255,0.10);
        }
        .expandable-card .expand-content {
            opacity: 0;
            transition: opacity 0.4s;
            height: 0;
        }
        .expandable-card.expanded .expand-content {
            opacity: 1;
            height: auto;
        }
    </style>
</head>
<body>
    <!-- Enhanced Profile Management Screen -->
    <div id="profile-management" class="profile-management">
        <div class="profile-card" data-aos="fade-up" data-aos-duration="1000">
            <div class="profile-header">
                <h1><i class="fas fa-chart-line"></i> Financial Planner Pro</h1>
                <p class="subtitle">Advanced Financial Planning Platform</p>
                <p class="tagline">Your Gateway to Financial Freedom</p>
            </div>

            <!-- Enhanced Welcome Section -->
            <div id="welcome-message" class="welcome-section" data-aos="fade-up" data-aos-delay="200">
                <h3><i class="fas fa-rocket"></i> Welcome to Your Financial Journey!</h3>
                <p>Experience the most advanced financial planning platform designed to transform your financial future. Create your personalized profile and unlock powerful insights, comprehensive analytics, and professional-grade reporting tools.</p>
            </div>

            <!-- Enhanced Saved Profiles List -->
            <div id="saved-profiles" class="profile-list" style="display: none;" data-aos="fade-up" data-aos-delay="300">
                <h3><i class="fas fa-folder-open"></i> Your Saved Profiles</h3>
                <div id="profiles-container" class="profiles-grid"></div>
            </div>

            <!-- Enhanced Action Buttons -->
            <div class="action-buttons" data-aos="fade-up" data-aos-delay="400">
                <button class="btn btn-primary btn-large" onclick="createNewProfile()">
                    <i class="fas fa-plus-circle"></i> Create New Profile
                </button>
                <button class="btn btn-secondary btn-large" onclick="showImportModal()">
                    <i class="fas fa-cloud-upload-alt"></i> Import Data
                </button>
            </div>
        </div>
    </div>

    <!-- Revolutionary Cover Page -->
    <div id="cover-page" class="cover-page" style="display: none;">
        <div class="cover-content" data-aos="zoom-in" data-aos-duration="1200">
            <h1 class="app-title">Financial Planner Pro</h1>
            <p class="app-subtitle">Your Complete Financial Planning & Wealth Management Solution</p>
            
            <!-- Features Highlight -->
            <div class="features-highlight" data-aos="fade-up" data-aos-delay="300">
                <div class="feature-item" data-aos="flip-left" data-aos-delay="400">
                    <div class="feature-icon"><i class="fas fa-brain"></i></div>
                    <div class="feature-title">Smart Assessment</div>
                    <div class="feature-desc">AI-powered personality analysis</div>
                </div>
                <div class="feature-item" data-aos="flip-left" data-aos-delay="500">
                    <div class="feature-icon"><i class="fas fa-chart-bar"></i></div>
                    <div class="feature-title">Advanced Analytics</div>
                    <div class="feature-desc">Real-time financial insights</div>
                </div>
                <div class="feature-item" data-aos="flip-left" data-aos-delay="600">
                    <div class="feature-icon"><i class="fas fa-file-pdf"></i></div>
                    <div class="feature-title">Professional Reports</div>
                    <div class="feature-desc">Export-ready PDF reports</div>
                </div>
                <div class="feature-item" data-aos="flip-left" data-aos-delay="700">
                    <div class="feature-icon"><i class="fas fa-shield-alt"></i></div>
                    <div class="feature-title">Secure Storage</div>
                    <div class="feature-desc">Bank-grade data protection</div>
                </div>
            </div>
            
            <div class="action-buttons" data-aos="fade-up" data-aos-delay="800">
                <button class="btn btn-primary btn-large" onclick="startPersonalityAssessment()">
                    <i class="fas fa-play-circle"></i> Start Assessment
                </button>
                <button class="btn btn-secondary" onclick="startClientProfiling()">
                    <i class="fas fa-user-cog"></i> Skip to Profiling
                </button>
                <button class="btn btn-secondary" onclick="goBackToProfiles()">
                    <i class="fas fa-arrow-left"></i> Back to Profiles
                </button>
            </div>
        </div>
    </div>

    <!-- Advanced Main Application -->
    <div id="main-app" class="main-app">
        <!-- Premium Header -->
        <header class="app-header">
            <div class="container">
                <div class="header-content">
                    <div class="app-logo">
                        <i class="fas fa-chart-line"></i>
                        Financial Planner Pro
                    </div>
                    <div class="profile-info-header">
                        <div class="current-profile">
                            <i class="fas fa-user-circle"></i>
                            <span id="current-profile-name">Profile Name</span>
                            <span id="current-profile-status" class="profile-status"></span>
                        </div>
                        <button class="btn btn-small btn-primary" onclick="saveCurrentProfile()">
                            <i class="fas fa-save"></i> Save
                        </button>
                        <button class="btn btn-small btn-secondary" onclick="showExportModal()">
                            <i class="fas fa-download"></i> Export
                        </button>
                        <button class="btn btn-small btn-secondary" onclick="showSettingsModal()">
                            <i class="fas fa-cog"></i> Settings
                        </button>
                        <button class="btn btn-small btn-secondary" onclick="goBackToProfiles()">
                            <i class="fas fa-home"></i> Home
                        </button>
                    </div>
                </div>
            </div>
        </header>

        <!-- Advanced Navigation -->
        <nav class="main-nav">
            <div class="container">
                <div class="nav-buttons">
                    <button class="nav-btn active" onclick="showMainSection('client-data')">
                        <i class="fas fa-user-edit"></i> Client Data
                    </button>
                    <button class="nav-btn" onclick="showMainSection('investment-advisory')">
                        <i class="fas fa-chart-line"></i> Investment Advisory
                    </button>
                    <button class="nav-btn" onclick="showMainSection('analytics-reports')">
                        <i class="fas fa-analytics"></i> Analytics & Reports
                    </button>
                    <button class="nav-btn" onclick="showMainSection('advanced-tools')">
                        <i class="fas fa-tools"></i> Advanced Tools
                    </button>
                </div>
            </div>
        </nav>

        <!-- Enhanced Sub Navigation -->
        <nav class="sub-nav">
            <div class="container">
                <!-- Client Data Sub-nav -->
                <div id="client-data-subnav" class="sub-nav-buttons">
                    <button class="sub-nav-btn active" onclick="showSubSection('personality', this)">
                        <i class="fas fa-brain"></i> Assessment
                    </button>
                    <button class="sub-nav-btn" onclick="showSubSection('profile', this)">
                        <i class="fas fa-id-card"></i> Basic Info
                    </button>
                    <button class="sub-nav-btn" onclick="showSubSection('financial', this)">
                        <i class="fas fa-wallet"></i> Financial Status
                    </button>
                    <button class="sub-nav-btn" onclick="showSubSection('networth', this)">
                        <i class="fas fa-calculator"></i> Net Worth
                    </button>
                    <button class="sub-nav-btn" onclick="showSubSection('goals', this)">
                        <i class="fas fa-bullseye"></i> Goals & Insurance
                    </button>
                    <button class="sub-nav-btn" onclick="showSubSection('risk', this)">
                        <i class="fas fa-chart-area"></i> Risk Profile
                    </button>
                </div>

                <!-- Investment Advisory Sub-nav -->
                <div id="investment-advisory-subnav" class="sub-nav-buttons" style="display: none;">
                    <button class="sub-nav-btn active" onclick="showSubSection('recommendations', this)">
                        <i class="fas fa-lightbulb"></i> Investment Plan
                    </button>
                    <button class="sub-nav-btn" onclick="showSubSection('portfolio', this)">
                        <i class="fas fa-pie-chart"></i> Portfolio Analysis
                    </button>
                    <button class="sub-nav-btn" onclick="showSubSection('sip', this)">
                        <i class="fas fa-calendar-check"></i> SIP Calculator
                    </button>
                    <button class="sub-nav-btn" onclick="showSubSection('tax', this)">
                        <i class="fas fa-receipt"></i> Tax Planning
                    </button>
                    <button class="sub-nav-btn" onclick="showSubSection('retirement', this)">
                        <i class="fas fa-umbrella"></i> Retirement
                    </button>
                    <button class="sub-nav-btn" onclick="showSubSection('comparison', this)">
                        <i class="fas fa-balance-scale"></i> Product Compare
                    </button>
                </div>

                <!-- Analytics & Reports Sub-nav -->
                <div id="analytics-reports-subnav" class="sub-nav-buttons" style="display: none;">
                    <button class="sub-nav-btn active" onclick="showSubSection('analytics', this)">
                        <i class="fas fa-chart-bar"></i> Analytics
                    </button>
                    <button class="sub-nav-btn" onclick="showSubSection('reports', this)">
                        <i class="fas fa-file-alt"></i> Reports
                    </button>
                    <button class="sub-nav-btn" onclick="showSubSection('summary', this)">
                        <i class="fas fa-clipboard-list"></i> Executive Summary
                    </button>
                    <button class="sub-nav-btn" onclick="showSubSection('alerts', this)">
                        <i class="fas fa-bell"></i> Smart Alerts
                    </button>
                </div>

                <!-- Advanced Tools Sub-nav -->
                <div id="advanced-tools-subnav" class="sub-nav-buttons" style="display: none;">
                    <button class="sub-nav-btn active" onclick="showSubSection('loan-calculator', this)">
                        <i class="fas fa-home"></i> Loan Calculator
                    </button>
                    <button class="sub-nav-btn" onclick="showSubSection('budget-planner', this)">
                        <i class="fas fa-chart-pie"></i> Budget Planner
                    </button>
                    <button class="sub-nav-btn" onclick="showSubSection('investment-tracker', this)">
                        <i class="fas fa-trending-up"></i> Investment Tracker
                    </button>
                    <button class="sub-nav-btn" onclick="showSubSection('financial-calendar', this)">
                        <i class="fas fa-calendar-alt"></i> Financial Calendar
                    </button>
                </div>
            </div>
        </nav>

        <!-- Sections Container -->
        <main class="container">
            <!-- Enhanced Personality Assessment Section -->
            <section id="personality" class="section active">
                <div class="section-header" data-aos="fade-down">
                    <h2 class="section-title">
                        <i class="fas fa-brain"></i>
                        Advanced Financial Personality Assessment
                    </h2>
                    <p class="section-subtitle">
                        Discover your unique financial DNA through our scientifically-designed assessment that analyzes your investment behavior, risk tolerance, and wealth-building preferences.
                    </p>
                </div>

                <div class="assessment-container" data-aos="fade-up" data-aos-delay="200">
                    <!-- Progress Indicator -->
                    <div class="progress-bar">
                        <div class="progress-fill" id="assessment-progress" style="width: 0%"></div>
                    </div>

                    <!-- Assessment Questions -->
                    <div id="assessment-questions">
                        <div class="question-card">
                            <div class="question-number" id="question-number">Question 1 of 10</div>
                            <div class="question-text" id="question-text">Loading question...</div>
                            <div class="options-grid" id="question-options">
                                <!-- Options will be loaded here -->
                            </div>
                        </div>

                        <div style="text-align: center; margin-top: 2rem;">
                            <button class="btn btn-secondary" id="prev-btn" onclick="previousQuestion()" style="display: none;">
                                <i class="fas fa-arrow-left"></i> Previous
                            </button>
                            <button class="btn btn-primary" id="next-btn" onclick="nextQuestion()" style="display: none;">
                                Next <i class="fas fa-arrow-right"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Assessment Results -->
                    <div id="assessment-results" style="display: none;" data-aos="zoom-in">
                        <div class="results-container">
                            <div style="text-align: center; margin-bottom: 2rem;">
                                <i class="fas fa-trophy" style="font-size: 3rem; color: var(--warning-orange); margin-bottom: 1rem;"></i>
                                <h3>Your Financial Personality Revealed</h3>
                            </div>
                            <div class="personality-type" id="personality-type"></div>
                            <div class="personality-description" id="personality-description"></div>
                            
                            <!-- Personality Insights -->
                            <div id="personality-insights" class="card" style="margin-top: 2rem;">
                                <div class="card-header">
                                    <h4 class="card-title"><i class="fas fa-lightbulb"></i> Personalized Insights</h4>
                                </div>
                                <div id="insights-content"></div>
                            </div>
                            
                            <div style="text-align: center; margin-top: 2rem;">
                                <button class="btn btn-primary btn-large" onclick="proceedToClientProfiling()">
                                    Continue to Profile Setup <i class="fas fa-arrow-right"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Enhanced Basic Client Information -->
            <section id="profile" class="section">
                <div class="section-header" data-aos="fade-down">
                    <h2 class="section-title">
                        <i class="fas fa-user-edit"></i>
                        Comprehensive Client Profile
                    </h2>
                    <p class="section-subtitle">
                        Build your detailed financial profile with our advanced data collection system that ensures personalized recommendations and accurate planning.
                    </p>
                </div>

                <div class="card" data-aos="fade-up" data-aos-delay="200">
                    <form id="basic-info-form">
                        <div class="form-grid">
                            <div class="form-group">
                                <label class="form-label">Full Name <span class="required">*</span></label>
                                <input type="text" id="client-name" class="form-input" placeholder="Enter your full name" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Age <span class="required">*</span></label>
                                <input type="number" id="client-age" class="form-input" min="18" max="100" placeholder="Enter your age" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Occupation <span class="required">*</span></label>
                                <input type="text" id="client-occupation" class="form-input" placeholder="Enter your occupation" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Marital Status <span class="required">*</span></label>
                                <select id="marital-status" class="form-select" required>
                                    <option value="">Select Status</option>
                                    <option value="single">Single</option>
                                    <option value="married">Married</option>
                                    <option value="divorced">Divorced</option>
                                    <option value="widowed">Widowed</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Number of Dependents <span class="required">*</span></label>
                                <input type="number" id="dependents" class="form-input" min="0" placeholder="Enter number of dependents" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">City <span class="required">*</span></label>
                                <input type="text" id="client-city" class="form-input" placeholder="Enter your city" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Annual Income Range</label>
                                <select id="income-range" class="form-select">
                                    <option value="">Select Range</option>
                                    <option value="below-3">Below 3 Lakhs</option>
                                    <option value="3-5">3-5 Lakhs</option>
                                    <option value="5-10">5-10 Lakhs</option>
                                    <option value="10-25">10-25 Lakhs</option>
                                    <option value="25-50">25-50 Lakhs</option>
                                    <option value="above-50">Above 50 Lakhs</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Education Level</label>
                                <select id="education-level" class="form-select">
                                    <option value="">Select Education</option>
                                    <option value="high-school">High School</option>
                                    <option value="bachelor">Bachelor's Degree</option>
                                    <option value="master">Master's Degree</option>
                                    <option value="doctorate">Doctorate</option>
                                    <option value="professional">Professional Certification</option>
                                </select>
                            </div>
                        </div>
                        <div style="text-align: center; margin-top: 2rem;">
                            <button type="submit" class="btn btn-primary btn-large">
                                <i class="fas fa-save"></i> Save Profile Information
                            </button>
                        </div>
                    </form>

                    <div id="saved-basic-info" style="display: none;" data-aos="fade-in">
                        <div class="alert alert-success">
                            <i class="fas fa-check-circle"></i> Profile information saved successfully!
                        </div>
                        <div id="basic-info-display"></div>
                        <div style="text-align: center; margin-top: 1.5rem;">
                            <button class="btn btn-secondary" onclick="editBasicInfo()">
                                <i class="fas fa-edit"></i> Modify Information
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Enhanced Financial Status -->
            <section id="financial" class="section">
                <div class="section-header" data-aos="fade-down">
                    <h2 class="section-title">
                        <i class="fas fa-chart-line"></i>
                        Advanced Financial Status Analysis
                    </h2>
                    <p class="section-subtitle">
                        Provide comprehensive details about your current financial situation for accurate planning and personalized recommendations.
                    </p>
                </div>

                <div class="card" data-aos="fade-up" data-aos-delay="200">
                    <form id="financial-form">
                        <div class="form-grid">
                            <div class="form-group">
                                <label class="form-label">Monthly Income () <span class="required">*</span></label>
                                <input type="number" id="monthly-income" class="form-input" min="0" placeholder="Enter monthly income" required>
                                <small style="color: var(--text-gray); margin-top: 0.5rem; display: block;">Include salary, business income, rental income, etc.</small>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Monthly Expenses () <span class="required">*</span></label>
                                <input type="number" id="monthly-expenses" class="form-input" min="0" placeholder="Enter monthly expenses" required>
                                <small style="color: var(--text-gray); margin-top: 0.5rem; display: block;">Include all recurring expenses</small>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Current Savings () <span class="required">*</span></label>
                                <input type="number" id="current-savings" class="form-input" min="0" placeholder="Enter current savings" required>
                                <small style="color: var(--text-gray); margin-top: 0.5rem; display: block;">Total liquid savings available</small>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Annual Income () <span class="required">*</span></label>
                                <input type="number" id="annual-income" class="form-input" min="0" placeholder="Enter annual income" required>
                                <small style="color: var(--text-gray); margin-top: 0.5rem; display: block;">Gross annual income before taxes</small>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Emergency Fund Target (Months)</label>
                                <input type="number" id="emergency-target" class="form-input" min="3" max="12" value="6" placeholder="6">
                                <small style="color: var(--text-gray); margin-top: 0.5rem; display: block;">Recommended: 6-12 months of expenses</small>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Current Debt ()</label>
                                <input type="number" id="current-debt" class="form-input" min="0" placeholder="Enter total debt">
                                <small style="color: var(--text-gray); margin-top: 0.5rem; display: block;">Total outstanding debt amount</small>
                            </div>
                        </div>
                        <div style="text-align: center; margin-top: 2rem;">
                            <button type="submit" class="btn btn-primary btn-large">
                                <i class="fas fa-chart-bar"></i> Analyze Financial Status
                            </button>
                        </div>
                    </form>

                    <div id="saved-financial-info" style="display: none;" data-aos="fade-in">
                        <div class="alert alert-success">
                            <i class="fas fa-check-circle"></i> Financial status analyzed successfully!
                        </div>
                        <div id="financial-info-display"></div>
                        <div id="financial-insights" class="card" style="margin-top: 1.5rem;">
                            <div class="card-header">
                                <h4 class="card-title"><i class="fas fa-lightbulb"></i> Financial Health Insights</h4>
                            </div>
                            <div id="financial-insights-content"></div>
                        </div>
                        <div style="text-align: center; margin-top: 1.5rem;">
                            <button class="btn btn-secondary" onclick="editFinancialInfo()">
                                <i class="fas fa-edit"></i> Modify Financial Status
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Revolutionary Net Worth Calculator -->
            <section id="networth" class="section">
                <div class="section-header" data-aos="fade-down">
                    <h2 class="section-title">
                        <i class="fas fa-calculator"></i>
                        Advanced Net Worth Calculator
                    </h2>
                    <p class="section-subtitle">
                        Build a comprehensive picture of your financial position with our advanced asset and liability tracking system featuring real-time calculations and visual analytics.
                    </p>
                </div>

                <div class="form-grid">
                    <!-- Enhanced Assets Section -->
                    <div class="card" data-aos="fade-right" data-aos-delay="200">
                        <div class="card-header">
                            <h3 class="card-title">
                                <i class="fas fa-plus-circle"></i>
                                Asset Portfolio
                            </h3>
                            <p class="card-subtitle">Add and manage your assets with detailed categorization</p>
                        </div>
                        
                        <form id="asset-form">
                            <div class="form-group">
                                <label class="form-label">Asset Category <span class="required">*</span></label>
                                <select id="asset-type" class="form-select" required>
                                    <option value="">Select Asset Category</option>
                                    <option value="cash"> Cash & Bank Deposits</option>
                                    <option value="stocks"> Stocks & Mutual Funds</option>
                                    <option value="property"> Real Estate</option>
                                    <option value="gold"> Gold & Precious Metals</option>
                                    <option value="crypto"> Cryptocurrency</option>
                                    <option value="business"> Business Assets</option>
                                    <option value="other"> Other Assets</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Asset Description <span class="required">*</span></label>
                                <input type="text" id="asset-name" class="form-input" placeholder="e.g., HDFC Equity Fund, Apartment in Mumbai" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Current Value () <span class="required">*</span></label>
                                <input type="number" id="asset-value" class="form-input" min="0" placeholder="Enter current market value" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Purchase Date</label>
                                <input type="date" id="asset-date" class="form-input">
                            </div>
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-plus"></i> Add Asset
                            </button>
                        </form>

                        <div id="assets-list" class="items-list">
                            <!-- Assets will be displayed here -->
                        </div>
                    </div>

                    <!-- Enhanced Liabilities Section -->
                    <div class="card" data-aos="fade-left" data-aos-delay="300">
                        <div class="card-header">
                            <h3 class="card-title">
                                <i class="fas fa-minus-circle"></i>
                                Liability Management
                            </h3>
                            <p class="card-subtitle">Track and analyze your debts and liabilities</p>
                        </div>
                        
                        <form id="loan-form">
                            <div class="form-group">
                                <label class="form-label">Loan Type <span class="required">*</span></label>
                                <select id="loan-type" class="form-select" required>
                                    <option value="">Select Loan Type</option>
                                    <option value="home"> Home Loan</option>
                                    <option value="car"> Car Loan</option>
                                    <option value="personal"> Personal Loan</option>
                                    <option value="education"> Education Loan</option>
                                    <option value="credit"> Credit Card Debt</option>
                                    <option value="business"> Business Loan</option>
                                    <option value="other"> Other Loans</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Outstanding Amount () <span class="required">*</span></label>
                                <input type="number" id="loan-amount" class="form-input" min="0" placeholder="Enter outstanding amount" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Interest Rate (%) <span class="required">*</span></label>
                                <input type="number" id="loan-rate" class="form-input" min="0" max="50" step="0.1" placeholder="Enter interest rate" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Remaining Tenure (Years) <span class="required">*</span></label>
                                <input type="number" id="loan-tenure" class="form-input" min="0" max="50" placeholder="Enter remaining years" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Monthly EMI ()</label>
                                <input type="number" id="loan-emi" class="form-input" min="0" placeholder="Enter monthly EMI">
                            </div>
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-plus"></i> Add Liability
                            </button>
                        </form>

                        <div id="loans-list" class="items-list">
                            <!-- Loans will be displayed here -->
                        </div>
                    </div>
                </div>

                <!-- Enhanced Net Worth Summary -->
                <div class="card" data-aos="fade-up" data-aos-delay="400">
                    <div class="card-header">
                        <h3 class="card-title">
                            <i class="fas fa-chart-pie"></i>
                            Comprehensive Net Worth Analysis
                        </h3>
                        <p class="card-subtitle">Real-time calculation with detailed breakdown and insights</p>
                    </div>
                    
                    <div class="form-grid">
                        <div id="networth-summary">
                            <div class="data-display">
                                <div class="data-row">
                                    <span class="data-label"> Total Assets:</span>
                                    <span class="data-value" id="total-assets">0</span>
                                </div>
                                <div class="data-row">
                                    <span class="data-label"> Total Liabilities:</span>
                                    <span class="data-value" id="total-liabilities">0</span>
                                </div>
                                <div class="data-row" style="border-top: 2px solid var(--accent-white); font-weight: bold; font-size: 1.3rem; padding-top: 1rem;">
                                    <span class="data-label"> Net Worth:</span>
                                    <span class="data-value" id="net-worth">0</span>
                                </div>
                                <div class="data-row">
                                    <span class="data-label"> Asset-to-Liability Ratio:</span>
                                    <span class="data-value" id="asset-liability-ratio">0:1</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="charts-grid">
                            <div class="chart-container">
                                <h5 class="chart-title">Asset Distribution</h5>
                                <canvas id="asset-chart"></canvas>
                            </div>
                        </div>
                    </div>
                    
                    <div id="networth-insights" class="card" style="margin-top: 1.5rem;">
                        <div class="card-header">
                            <h4 class="card-title"><i class="fas fa-lightbulb"></i> Net Worth Insights</h4>
                        </div>
                        <div id="networth-insights-content"></div>
                    </div>
                </div>
            </section>

            <!-- Revolutionary Goals and Insurance Planning -->
            <section id="goals" class="section">
                <div class="section-header" data-aos="fade-down">
                    <h2 class="section-title">
                        <i class="fas fa-bullseye"></i>
                        Smart Goals & Insurance Planning
                    </h2>
                    <p class="section-subtitle">
                        Set intelligent financial goals with inflation adjustment and comprehensive insurance planning with automated calculations for optimal coverage.
                    </p>
                </div>

                <div class="form-grid">
                    <!-- Advanced Financial Goals -->
                    <div class="card" data-aos="fade-right" data-aos-delay="200">
                        <div class="card-header">
                            <h3 class="card-title">
                                <i class="fas fa-target"></i>
                                Intelligent Goal Setting
                            </h3>
                            <p class="card-subtitle">AI-powered goal planning with inflation adjustment and smart recommendations</p>
                        </div>
                        
                        <form id="goal-form">
                            <div class="form-group">
                                <label class="form-label">Goal Name <span class="required">*</span></label>
                                <input type="text" id="goal-name" class="form-input" placeholder="e.g., Dream Home, Child's Education, World Tour" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Goal Category</label>
                                <select id="goal-category" class="form-select">
                                    <option value="lifestyle"> Lifestyle</option>
                                    <option value="education"> Education</option>
                                    <option value="property"> Property</option>
                                    <option value="business"> Business</option>
                                    <option value="retirement"> Retirement</option>
                                    <option value="emergency"> Emergency</option>
                                    <option value="other"> Other</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Target Amount ( in today's terms) <span class="required">*</span></label>
                                <input type="number" id="goal-amount" class="form-input" min="0" placeholder="Enter amount in current value" required>
                                <small style="color: var(--text-gray); margin-top: 0.5rem; display: block;">Enter the amount in today's purchasing power</small>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Time Frame (Years) <span class="required">*</span></label>
                                <input type="number" id="goal-timeframe" class="form-input" min="1" max="50" placeholder="Years to achieve goal" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Expected Inflation Rate (%)</label>
                                <input type="number" id="goal-inflation" class="form-input" value="6" min="0" max="20" step="0.1">
                                <small style="color: var(--text-gray); margin-top: 0.5rem; display: block;">Default: 6% per annum (adjustable)</small>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Priority Level <span class="required">*</span></label>
                                <select id="goal-priority" class="form-select" required>
                                    <option value="">Select Priority</option>
                                    <option value="critical"> Critical</option>
                                    <option value="high"> High</option>
                                    <option value="medium"> Medium</option>
                                    <option value="low"> Low</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Current Progress ()</label>
                                <input type="number" id="goal-progress-amount" class="form-input" min="0" placeholder="Amount already saved">
                            </div>
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-plus"></i> Add Smart Goal
                            </button>
                        </form>

                        <div id="goals-list" class="items-list">
                            <!-- Goals will be displayed here -->
                        </div>
                    </div>

                    <!-- Advanced Insurance Planning -->
                    <div class="card" data-aos="fade-left" data-aos-delay="300">
                        <div class="card-header">
                            <h3 class="card-title">
                                <i class="fas fa-shield-alt"></i>
                                Comprehensive Insurance Analysis
                            </h3>
                            <p class="card-subtitle">Advanced insurance needs calculation with personalized recommendations</p>
                        </div>
                        
                        <form id="insurance-form">
                            <div class="form-group">
                                <label class="form-label">Current Life Insurance Coverage ()</label>
                                <input type="number" id="current-life-insurance" class="form-input" min="0" placeholder="Enter current coverage">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Current Health Insurance Coverage ()</label>
                                <input type="number" id="current-health-insurance" class="form-input" min="0" placeholder="Enter current coverage">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Outstanding Loans ()</label>
                                <input type="number" id="outstanding-loans" class="form-input" min="0" placeholder="Total outstanding debt">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Family Annual Expenses () <span class="required">*</span></label>
                                <input type="number" id="family-expenses" class="form-input" min="0" placeholder="Annual family expenses" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Income Replacement Period (Years)</label>
                                <input type="number" id="income-years" class="form-input" value="15" min="1" max="50" placeholder="Years of income replacement">
                                <small style="color: var(--text-gray); margin-top: 0.5rem; display: block;">Recommended: 10-20 years</small>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Number of Dependents</label>
                                <input type="number" id="insurance-dependents" class="form-input" min="0" placeholder="Number of dependents">
                            </div>
                            
                            <div style="text-align: center; margin: 1.5rem 0;">
                                <button type="button" class="btn btn-secondary" onclick="calculateAdvancedInsurance()">
                                    <i class="fas fa-calculator"></i> Calculate Insurance Needs
                                </button>
                            </div>
                            
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-save"></i> Save Insurance Profile
                            </button>
                        </form>

                        <div id="insurance-results" style="display: none;">
                            <!-- Insurance calculation results -->
                        </div>

                        <div id="saved-insurance-info" style="display: none;" data-aos="fade-in">
                            <div class="alert alert-success">
                                <i class="fas fa-check-circle"></i> Insurance profile saved successfully!
                            </div>
                            <div id="insurance-info-display"></div>
                            <div style="text-align: center; margin-top: 1.5rem;">
                                <button class="btn btn-secondary" onclick="editInsuranceInfo()">
                                    <i class="fas fa-edit"></i> Modify Insurance Profile
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Enhanced Risk Profile Assessment -->
            <section id="risk" class="section">
                <div class="section-header" data-aos="fade-down">
                    <h2 class="section-title">
                        <i class="fas fa-chart-area"></i>
                        Advanced Risk Profile Analysis
                    </h2>
                    <p class="section-subtitle">
                        Comprehensive risk assessment using behavioral finance principles to determine your optimal investment strategy and risk tolerance levels.
                    </p>
                </div>

                <div class="card" data-aos="fade-up" data-aos-delay="200">
                    <form id="risk-form">
                        <div class="form-grid">
                            <div class="form-group">
                                <label class="form-label">Investment Experience <span class="required">*</span></label>
                                <select id="investment-experience" class="form-select" required>
                                    <option value="">Select Experience Level</option>
                                    <option value="beginner"> Beginner (0-2 years)</option>
                                    <option value="intermediate"> Intermediate (3-7 years)</option>
                                    <option value="experienced"> Experienced (8-15 years)</option>
                                    <option value="expert"> Expert (15+ years)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Risk Tolerance <span class="required">*</span></label>
                                <select id="risk-tolerance" class="form-select" required>
                                    <option value="">Select Risk Level</option>
                                    <option value="very-conservative"> Very Conservative - Capital preservation</option>
                                    <option value="conservative"> Conservative - Stable returns</option>
                                    <option value="moderate"> Moderate - Balanced approach</option>
                                    <option value="aggressive"> Aggressive - Growth focused</option>
                                    <option value="very-aggressive"> Very Aggressive - Maximum returns</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Investment Horizon <span class="required">*</span></label>
                                <select id="investment-horizon" class="form-select" required>
                                    <option value="">Select Time Horizon</option>
                                    <option value="short"> Short Term (1-3 years)</option>
                                    <option value="medium"> Medium Term (3-7 years)</option>
                                    <option value="long"> Long Term (7-15 years)</option>
                                    <option value="very-long"> Very Long Term (15+ years)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Monthly Investment Capacity () <span class="required">*</span></label>
                                <input type="number" id="monthly-investment" class="form-input" min="0" placeholder="Amount you can invest monthly" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Investment Knowledge Areas</label>
                                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 0.5rem; margin-top: 0.5rem;">
                                    <label style="display: flex; align-items: center; gap: 0.5rem; color: var(--text-gray);">
                                        <input type="checkbox" id="knowledge-stocks" value="stocks">
                                         Stocks & Equity
                                    </label>
                                    <label style="display: flex; align-items: center; gap: 0.5rem; color: var(--text-gray);">
                                        <input type="checkbox" id="knowledge-bonds" value="bonds">
                                         Bonds & Fixed Income
                                    </label>
                                    <label style="display: flex; align-items: center; gap: 0.5rem; color: var(--text-gray);">
                                        <input type="checkbox" id="knowledge-mutual-funds" value="mutual-funds">
                                         Mutual Funds
                                    </label>
                                    <label style="display: flex; align-items: center; gap: 0.5rem; color: var(--text-gray);">
                                        <input type="checkbox" id="knowledge-real-estate" value="real-estate">
                                         Real Estate
                                    </label>
                                    <label style="display: flex; align-items: center; gap: 0.5rem; color: var(--text-gray);">
                                        <input type="checkbox" id="knowledge-crypto" value="crypto">
                                         Cryptocurrency
                                    </label>
                                    <label style="display: flex; align-items: center; gap: 0.5rem; color: var(--text-gray);">
                                        <input type="checkbox" id="knowledge-commodities" value="commodities">
                                         Commodities
                                    </label>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Preferred Investment Style</label>
                                <select id="investment-style" class="form-select">
                                    <option value="">Select Style</option>
                                    <option value="passive"> Passive - Set and forget</option>
                                    <option value="active"> Active - Regular monitoring</option>
                                    <option value="mixed"> Mixed - Balanced approach</option>
                                </select>
                            </div>
                        </div>
                        <div style="text-align: center; margin-top: 2rem;">
                            <button type="submit" class="btn btn-primary btn-large">
                                <i class="fas fa-chart-area"></i> Analyze Risk Profile
                            </button>
                        </div>
                    </form>

                    <div id="saved-risk-info" style="display: none;" data-aos="fade-in">
                        <div class="alert alert-success">
                            <i class="fas fa-check-circle"></i> Risk profile analyzed successfully!
                        </div>
                        <div id="risk-info-display"></div>
                        <div id="risk-recommendations" class="card" style="margin-top: 1.5rem;">
                            <div class="card-header">
                                <h4 class="card-title"><i class="fas fa-lightbulb"></i> Personalized Risk Insights</h4>
                            </div>
                            <div id="risk-recommendations-content"></div>
                        </div>
                        <div style="text-align: center; margin-top: 1.5rem;">
                            <button class="btn btn-secondary" onclick="editRiskInfo()">
                                <i class="fas fa-edit"></i> Modify Risk Profile
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Revolutionary Investment Recommendations -->
            <section id="recommendations" class="section">
                <div class="section-header" data-aos="fade-down">
                    <h2 class="section-title">
                        <i class="fas fa-lightbulb"></i>
                        AI-Powered Investment Recommendations
                    </h2>
                    <p class="section-subtitle">
                        Get personalized investment strategies powered by advanced algorithms that analyze your complete financial profile, goals, and market conditions.
                    </p>
                </div>

                <div class="card" data-aos="fade-up" data-aos-delay="200">
                    <div style="text-align: center; margin-bottom: 2rem;">
                        <button class="btn btn-primary btn-large" onclick="generateAdvancedInvestmentPlan()">
                            <i class="fas fa-magic"></i> Generate Smart Investment Plan
                        </button>
                        <button class="btn btn-secondary" onclick="generateQuickRecommendations()">
                            <i class="fas fa-bolt"></i> Quick Recommendations
                        </button>
                    </div>
                    
                    <div id="investment-plan-results">
                        <!-- Investment plan will be displayed here -->
                    </div>
                </div>
            </section>

            <!-- Advanced Portfolio Analysis -->
            <section id="portfolio" class="section">
                <div class="section-header" data-aos="fade-down">
                    <h2 class="section-title">
                        <i class="fas fa-pie-chart"></i>
                        Advanced Portfolio Analysis
                    </h2>
                    <p class="section-subtitle">
                        Comprehensive portfolio analysis with risk metrics, performance tracking, and intelligent rebalancing recommendations.
                    </p>
                </div>

                <div class="card" data-aos="fade-up" data-aos-delay="200">
                    <div style="text-align: center; margin-bottom: 2rem;">
                        <button class="btn btn-primary" onclick="analyzeAdvancedPortfolio()">
                            <i class="fas fa-search-plus"></i> Deep Portfolio Analysis
                        </button>
                        <button class="btn btn-secondary" onclick="generateRebalancingPlan()">
                            <i class="fas fa-balance-scale"></i> Smart Rebalancing
                        </button>
                        <button class="btn btn-secondary" onclick="performRiskAnalysis()">
                            <i class="fas fa-exclamation-triangle"></i> Risk Analysis
                        </button>
                    </div>
                    
                    <div id="portfolio-analysis-results">
                        <!-- Portfolio analysis will be displayed here -->
                    </div>
                </div>
            </section>

            <!-- Enhanced SIP Calculator -->
            <section id="sip" class="section">
                <div class="section-header" data-aos="fade-down">
                    <h2 class="section-title">
                        <i class="fas fa-calendar-check"></i>
                        Advanced SIP Calculator
                    </h2>
                    <p class="section-subtitle">
                        Sophisticated SIP planning with inflation adjustment, step-up calculations, and goal-based recommendations.
                    </p>
                </div>

                <div class="card" data-aos="fade-up" data-aos-delay="200">
                    <form id="sip-form">
                        <div class="form-grid">
                            <div class="form-group">
                                <label class="form-label">Monthly SIP Amount () <span class="required">*</span></label>
                                <input type="number" id="sip-amount" class="form-input" min="500" placeholder="Minimum 500" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Expected Annual Return (%) <span class="required">*</span></label>
                                <input type="number" id="sip-return" class="form-input" value="12" min="1" max="30" step="0.1" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Investment Period (Years) <span class="required">*</span></label>
                                <input type="number" id="sip-period" class="form-input" min="1" max="50" placeholder="Investment duration" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Expected Inflation Rate (%)</label>
                                <input type="number" id="sip-inflation" class="form-input" value="6" min="0" max="20" step="0.1">
                                <small style="color: var(--text-gray); margin-top: 0.5rem; display: block;">For real returns calculation</small>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Annual Step-up (%)</label>
                                <input type="number" id="sip-stepup" class="form-input" value="10" min="0" max="50" step="0.1">
                                <small style="color: var(--text-gray); margin-top: 0.5rem; display: block;">Yearly increase in SIP amount</small>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Tax Rate (%)</label>
                                <input type="number" id="sip-tax" class="form-input" value="10" min="0" max="50" step="0.1">
                                <small style="color: var(--text-gray); margin-top: 0.5rem; display: block;">Expected tax on returns</small>
                            </div>
                        </div>
                        
                        <div style="text-align: center; margin: 2rem 0;">
                            <button type="submit" class="btn btn-primary btn-large">
                                <i class="fas fa-calculator"></i> Calculate Advanced SIP Returns
                            </button>
                        </div>
                    </form>

                    <div id="sip-results" style="display: none;">
                        <!-- SIP calculation results will be displayed here -->
                    </div>
                </div>
            </section>

            <!-- Advanced Tax Planning -->
            <section id="tax" class="section">
                <div class="section-header" data-aos="fade-down">
                    <h2 class="section-title">
                        <i class="fas fa-receipt"></i>
                        Comprehensive Tax Planning
                    </h2>
                    <p class="section-subtitle">
                        Advanced tax optimization strategies with detailed analysis of both old and new tax regimes, including smart investment recommendations.
                    </p>
                </div>

                <div class="card" data-aos="fade-up" data-aos-delay="200">
                    <form id="tax-planning-form">
                        <div class="form-grid">
                            <div class="form-group">
                                <label class="form-label">Annual Gross Income () <span class="required">*</span></label>
                                <input type="number" id="taxable-income" class="form-input" min="0" placeholder="Enter gross annual income" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Preferred Tax Regime <span class="required">*</span></label>
                                <select id="tax-regime" class="form-select" required>
                                    <option value="">Select Tax Regime</option>
                                    <option value="old"> Old Tax Regime (with deductions)</option>
                                    <option value="new"> New Tax Regime (lower rates)</option>
                                    <option value="compare"> Compare Both Regimes</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Current 80C Investments ()</label>
                                <input type="number" id="current-80c" class="form-input" min="0" max="150000" placeholder="Current 80C investments">
                                <small style="color: var(--text-gray); margin-top: 0.5rem; display: block;">Maximum limit: 1.5 lakhs</small>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Health Insurance Premium ()</label>
                                <input type="number" id="health-premium" class="form-input" min="0" placeholder="Health insurance premium">
                                <small style="color: var(--text-gray); margin-top: 0.5rem; display: block;">For 80D deduction</small>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Home Loan Interest ()</label>
                                <input type="number" id="home-loan-interest" class="form-input" min="0" placeholder="Annual home loan interest">
                                <small style="color: var(--text-gray); margin-top: 0.5rem; display: block;">For 24(b) deduction</small>
                            </div>
                            <div class="form-group">
                                <label class="form-label">HRA Received ()</label>
                                <input type="number" id="hra-received" class="form-input" min="0" placeholder="Annual HRA received">
                                <small style="color: var(--text-gray); margin-top: 0.5rem; display: block;">House Rent Allowance</small>
                            </div>
                        </div>
                        
                        <div style="text-align: center; margin: 2rem 0;">
                            <button type="submit" class="btn btn-primary btn-large">
                                <i class="fas fa-calculator"></i> Generate Advanced Tax Plan
                            </button>
                        </div>
                    </form>

                    <div id="tax-plan-results" style="display: none;">
                        <!-- Tax planning results will be displayed here -->
                    </div>
                </div>
            </section>

            <!-- Advanced Retirement Planning -->
            <section id="retirement" class="section">
                <div class="section-header" data-aos="fade-down">
                    <h2 class="section-title">
                        <i class="fas fa-umbrella"></i>
                        Comprehensive Retirement Planning
                    </h2>
                    <p class="section-subtitle">
                        Advanced retirement planning with inflation modeling, lifestyle adjustments, healthcare considerations, and multiple scenario analysis.
                    </p>
                </div>

                <div class="card" data-aos="fade-up" data-aos-delay="200">
                    <form id="retirement-form">
                        <div class="form-grid">
                            <div class="form-group">
                                <label class="form-label">Current Age <span class="required">*</span></label>
                                <input type="number" id="current-age" class="form-input" min="18" max="65" placeholder="Your current age" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Planned Retirement Age <span class="required">*</span></label>
                                <input type="number" id="retirement-age" class="form-input" min="50" max="75" placeholder="When you plan to retire" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Current Monthly Expenses () <span class="required">*</span></label>
                                <input type="number" id="current-monthly-expenses" class="form-input" min="0" placeholder="Current monthly expenses" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Expected Inflation Rate (%)</label>
                                <input type="number" id="retirement-inflation" class="form-input" value="6" min="0" max="15" step="0.1">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Life Expectancy <span class="required">*</span></label>
                                <input type="number" id="life-expectancy" class="form-input" value="85" min="65" max="100" placeholder="Expected life expectancy" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Expected Return on Investments (%)</label>
                                <input type="number" id="retirement-return" class="form-input" value="10" min="5" max="20" step="0.1">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Post-Retirement Expense Ratio (%)</label>
                                <input type="number" id="expense-ratio" class="form-input" value="80" min="50" max="120" step="5">
                                <small style="color: var(--text-gray); margin-top: 0.5rem; display: block;">% of current expenses needed in retirement</small>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Healthcare Inflation (%)</label>
                                <input type="number" id="healthcare-inflation" class="form-input" value="8" min="0" max="20" step="0.1">
                                <small style="color: var(--text-gray); margin-top: 0.5rem; display: block;">Healthcare costs typically rise faster</small>
                            </div>
                        </div>
                        
                        <div style="text-align: center; margin: 2rem 0;">
                            <button type="submit" class="btn btn-primary btn-large">
                                <i class="fas fa-calculator"></i> Calculate Retirement Needs
                            </button>
                        </div>
                    </form>

                    <div id="retirement-results" style="display: none;">
                        <!-- Retirement planning results will be displayed here -->
                    </div>
                </div>
            </section>

            <!-- Smart Product Comparison -->
            <section id="comparison" class="section">
                <div class="section-header" data-aos="fade-down">
                    <h2 class="section-title">
                        <i class="fas fa-balance-scale"></i>
                        AI-Powered Product Comparison
                    </h2>
                    <p class="section-subtitle">
                        Intelligent product comparison engine that analyzes thousands of financial products to find the perfect match for your profile and goals.
                    </p>
                </div>

                <div class="card" data-aos="fade-up" data-aos-delay="200">
                    <div style="text-align: center; margin-bottom: 2rem;">
                        <button class="btn btn-primary btn-large" onclick="generateSmartComparison()">
                            <i class="fas fa-magic"></i> Generate Smart Recommendations
                        </button>
                        <button class="btn btn-secondary" onclick="compareSpecificProducts()">
                            <i class="fas fa-search"></i> Compare Specific Products
                        </button>
                    </div>
                    
                    <div id="product-comparison-results">
                        <!-- Product comparison will be displayed here -->
                    </div>
                </div>
            </section>

            <!-- Revolutionary Analytics Dashboard -->
            <section id="analytics" class="section">
                <div class="section-header" data-aos="fade-down">
                    <h2 class="section-title">
                        <i class="fas fa-chart-bar"></i>
                        Advanced Financial Analytics
                    </h2>
                    <p class="section-subtitle">
                        Comprehensive financial analytics with real-time insights, predictive modeling, and interactive visualizations powered by advanced algorithms.
                    </p>
                </div>

                <!-- Enhanced Financial Health Widgets -->
                <div class="widgets-grid" data-aos="fade-up" data-aos-delay="200">
                    <div class="widget">
                        <div class="widget-icon"><i class="fas fa-heartbeat"></i></div>
                        <div class="widget-value" id="financial-score">0</div>
                        <div class="widget-label">Financial Health Score</div>
                    </div>
                    <div class="widget">
                        <div class="widget-icon"><i class="fas fa-wallet"></i></div>
                        <div class="widget-value" id="net-worth-widget">0</div>
                        <div class="widget-label">Net Worth</div>
                    </div>
                    <div class="widget">
                        <div class="widget-icon"><i class="fas fa-piggy-bank"></i></div>
                        <div class="widget-value" id="savings-rate">0%</div>
                        <div class="widget-label">Savings Rate</div>
                    </div>
                    <div class="widget">
                        <div class="widget-icon"><i class="fas fa-shield"></i></div>
                        <div class="widget-value" id="emergency-fund-months">0</div>
                        <div class="widget-label">Emergency Fund (Months)</div>
                    </div>
                    <div class="widget">
                        <div class="widget-icon"><i class="fas fa-chart-line"></i></div>
                        <div class="widget-value" id="investment-growth">0%</div>
                        <div class="widget-label">Investment Growth</div>
                    </div>
                    <div class="widget">
                        <div class="widget-icon"><i class="fas fa-target"></i></div>
                        <div class="widget-value" id="goal-progress">0%</div>
                        <div class="widget-label">Goals Progress</div>
                    </div>
                </div>

                <!-- Advanced Charts Grid -->
                <div class="charts-grid" data-aos="fade-up" data-aos-delay="300">
                    <div class="chart-container">
                        <h5 class="chart-title">Asset Allocation Analysis</h5>
                        <canvas id="analytics-asset-chart"></canvas>
                    </div>
                    <div class="chart-container">
                        <h5 class="chart-title">Income vs Expenses Trend</h5>
                        <canvas id="income-expense-chart"></canvas>
                    </div>
                    <div class="chart-container">
                        <h5 class="chart-title">Goal Achievement Progress</h5>
                        <canvas id="goal-progress-chart"></canvas>
                    </div>
                    <div class="chart-container">
                        <h5 class="chart-title">Net Worth Projection</h5>
                        <canvas id="networth-projection-chart"></canvas>
                    </div>
                </div>

                <div style="text-align: center; margin: 2rem 0;" data-aos="fade-up" data-aos-delay="400">
                    <button class="btn btn-primary" onclick="updateAllCharts()">
                        <i class="fas fa-sync-alt"></i> Refresh Analytics
                    </button>
                    <button class="btn btn-secondary" onclick="exportAnalytics()">
                        <i class="fas fa-download"></i> Export Analytics
                    </button>
                </div>
            </section>

            <!-- Professional Reports Section -->
            <section id="reports" class="section">
                <div class="section-header" data-aos="fade-down">
                    <h2 class="section-title">
                        <i class="fas fa-file-alt"></i>
                        Professional Report Generation
                    </h2>
                    <p class="section-subtitle">
                        Generate comprehensive, professional-grade financial reports with advanced analytics, insights, and recommendations in multiple formats.
                    </p>
                </div>

                <div class="form-grid" data-aos="fade-up" data-aos-delay="200">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <i class="fas fa-chart-bar"></i>
                                Comprehensive Financial Report
                            </h3>
                            <p class="card-subtitle">Complete analysis of your financial position with detailed insights and recommendations</p>
                        </div>
                        <div style="text-align: center;">
                            <button class="btn btn-primary" onclick="generateDetailedReport()">
                                <i class="fas fa-eye"></i> Preview Report
                            </button>
                            <button class="btn btn-secondary" onclick="downloadDetailedReport()">
                                <i class="fas fa-download"></i> Download PDF
                            </button>
                            <button class="btn btn-secondary" onclick="scheduleReport('detailed')">
                                <i class="fas fa-calendar"></i> Schedule Report
                            </button>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <i class="fas fa-lightbulb"></i>
                                Investment Strategy Report
                            </h3>
                            <p class="card-subtitle">Personalized investment recommendations with risk analysis and portfolio optimization</p>
                        </div>
                        <div style="text-align: center;">
                            <button class="btn btn-primary" onclick="generateInvestmentReport()">
                                <i class="fas fa-eye"></i> Preview Report
                            </button>
                            <button class="btn btn-secondary" onclick="downloadInvestmentReport()">
                                <i class="fas fa-download"></i> Download PDF
                            </button>
                            <button class="btn btn-secondary" onclick="scheduleReport('investment')">
                                <i class="fas fa-calendar"></i> Schedule Report
                            </button>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <i class="fas fa-tasks"></i>
                                Action Plan Report
                            </h3>
                            <p class="card-subtitle">Step-by-step financial action items with timelines and priority levels</p>
                        </div>
                        <div style="text-align: center;">
                            <button class="btn btn-primary" onclick="generateActionPlan()">
                                <i class="fas fa-eye"></i> Preview Report
                            </button>
                            <button class="btn btn-secondary" onclick="downloadActionPlan()">
                                <i class="fas fa-download"></i> Download PDF
                            </button>
                            <button class="btn btn-secondary" onclick="scheduleReport('action')">
                                <i class="fas fa-calendar"></i> Schedule Report
                            </button>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <i class="fas fa-shield-alt"></i>
                                Risk Assessment Report
                            </h3>
                            <p class="card-subtitle">Comprehensive risk analysis with mitigation strategies and insurance recommendations</p>
                        </div>
                        <div style="text-align: center;">
                            <button class="btn btn-primary" onclick="generateRiskReport()">
                                <i class="fas fa-eye"></i> Preview Report
                            </button>
                            <button class="btn btn-secondary" onclick="downloadRiskReport()">
                                <i class="fas fa-download"></i> Download PDF
                            </button>
                            <button class="btn btn-secondary" onclick="scheduleReport('risk')">
                                <i class="fas fa-calendar"></i> Schedule Report
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Report Preview Area -->
                <div id="report-preview" style="display: none;" data-aos="fade-in">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">
                                <i class="fas fa-eye"></i>
                                Report Preview
                            </h3>
                            <div style="float: right;">
                                <button class="btn btn-small btn-secondary" onclick="closeReportPreview()">
                                    <i class="fas fa-times"></i> Close
                                </button>
                            </div>
                        </div>
                        <div id="report-content">
                            <!-- Report content will be displayed here -->
                        </div>
                    </div>
                </div>
            </section>

            <!-- Executive Summary & Alerts -->
            <section id="summary" class="section">
                <div class="section-header" data-aos="fade-down">
                    <h2 class="section-title">
                        <i class="fas fa-clipboard-list"></i>
                        Executive Summary & Intelligence
                    </h2>
                    <p class="section-subtitle">
                        AI-powered executive summary with key insights, actionable alerts, and strategic recommendations for optimal financial decisions.
                    </p>
                </div>

                <div class="card" data-aos="fade-up" data-aos-delay="200">
                    <div style="text-align: center; margin-bottom: 2rem;">
                        <button class="btn btn-primary btn-large" onclick="generateExecutiveSummary()">
                            <i class="fas fa-magic"></i> Generate AI Summary
                        </button>
                        <button class="btn btn-secondary" onclick="generateQuickInsights()">
                            <i class="fas fa-bolt"></i> Quick Insights
                        </button>
                    </div>
                    
                    <div id="executive-summary-content">
                        <!-- Executive summary will be displayed here -->
                    </div>
                </div>
            </section>

            <!-- Smart Alerts Section -->
            <section id="alerts" class="section">
                <div class="section-header" data-aos="fade-down">
                    <h2 class="section-title">
                        <i class="fas fa-bell"></i>
                        Smart Financial Alerts
                    </h2>
                    <p class="section-subtitle">
                        Intelligent alert system that monitors your financial health and provides timely notifications for important financial decisions.
                    </p>
                </div>

                <div class="card" data-aos="fade-up" data-aos-delay="200">
                    <div class="card-header">
                        <h3 class="card-title">
                            <i class="fas fa-exclamation-triangle"></i>
                            Active Financial Alerts
                        </h3>
                    </div>
                    <div id="financial-alerts">
                        <!-- Alerts will be displayed here -->
                    </div>
                    
                    <div style="text-align: center; margin-top: 2rem;">
                        <button class="btn btn-primary" onclick="refreshAlerts()">
                            <i class="fas fa-sync-alt"></i> Refresh Alerts
                        </button>
                        <button class="btn btn-secondary" onclick="configureAlerts()">
                            <i class="fas fa-cog"></i> Configure Alerts
                        </button>
                    </div>
                </div>
            </section>

            <!-- Advanced Tools Section -->
            <!-- Loan Calculator -->
            <section id="loan-calculator" class="section">
                <div class="section-header" data-aos="fade-down">
                    <h2 class="section-title">
                        <i class="fas fa-home"></i>
                        Advanced Loan Calculator
                    </h2>
                    <p class="section-subtitle">
                        Comprehensive loan analysis with EMI calculations, amortization schedules, and prepayment strategies.
                    </p>
                </div>

                <div class="card" data-aos="fade-up" data-aos-delay="200">
                    <form id="loan-calculator-form">
                        <div class="form-grid">
                            <div class="form-group">
                                <label class="form-label">Loan Amount () <span class="required">*</span></label>
                                <input type="number" id="loan-principal" class="form-input" min="0" placeholder="Enter loan amount" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Interest Rate (% per annum) <span class="required">*</span></label>
                                <input type="number" id="loan-interest-rate" class="form-input" min="0" max="50" step="0.1" placeholder="Enter interest rate" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Loan Tenure (Years) <span class="required">*</span></label>
                                <input type="number" id="loan-tenure-years" class="form-input" min="1" max="50" placeholder="Enter tenure in years" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Loan Type</label>
                                <select id="loan-calc-type" class="form-select">
                                    <option value="reducing">Reducing Balance (Standard)</option>
                                    <option value="flat">Flat Rate</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Prepayment Amount ()</label>
                                <input type="number" id="prepayment-amount" class="form-input" min="0" placeholder="Optional prepayment">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Prepayment After (Years)</label>
                                <input type="number" id="prepayment-after" class="form-input" min="1" placeholder="Years after which prepayment">
                            </div>
                        </div>
                        
                        <div style="text-align: center; margin: 2rem 0;">
                            <button type="submit" class="btn btn-primary btn-large">
                                <i class="fas fa-calculator"></i> Calculate Loan Details
                            </button>
                        </div>
                    </form>

                    <div id="loan-calculator-results" style="display: none;">
                        <!-- Loan calculator results will be displayed here -->
                    </div>
                </div>
            </section>

            <!-- Budget Planner -->
            <section id="budget-planner" class="section">
                <div class="section-header" data-aos="fade-down">
                    <h2 class="section-title">
                        <i class="fas fa-chart-pie"></i>
                        Smart Budget Planner
                    </h2>
                    <p class="section-subtitle">
                        Intelligent budget planning with expense categorization, spending analysis, and optimization recommendations.
                    </p>
                </div>

                <div class="card" data-aos="fade-up" data-aos-delay="200">
                    <div class="card-header">
                        <h3 class="card-title">
                            <i class="fas fa-plus"></i>
                            Budget Categories
                        </h3>
                    </div>
                    
                    <form id="budget-form">
                        <div class="form-grid">
                            <div class="form-group">
                                <label class="form-label">Category</label>
                                <select id="budget-category" class="form-select">
                                    <option value="housing"> Housing</option>
                                    <option value="food"> Food & Dining</option>
                                    <option value="transportation"> Transportation</option>
                                    <option value="utilities"> Utilities</option>
                                    <option value="healthcare"> Healthcare</option>
                                    <option value="entertainment"> Entertainment</option>
                                    <option value="shopping"> Shopping</option>
                                    <option value="education"> Education</option>
                                    <option value="savings"> Savings</option>
                                    <option value="other"> Other</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Budgeted Amount ()</label>
                                <input type="number" id="budget-amount" class="form-input" min="0" placeholder="Enter budget amount">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Actual Spent ()</label>
                                <input type="number" id="actual-spent" class="form-input" min="0" placeholder="Enter actual spending">
                            </div>
                        </div>
                        
                        <div style="text-align: center; margin: 1.5rem 0;">
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-plus"></i> Add Budget Item
                            </button>
                        </div>
                    </form>

                    <div id="budget-list" class="items-list">
                        <!-- Budget items will be displayed here -->
                    </div>

                    <div id="budget-analysis" style="display: none;">
                        <!-- Budget analysis will be displayed here -->
                    </div>
                </div>
            </section>

            <!-- Investment Tracker -->
            <section id="investment-tracker" class="section">
                <div class="section-header" data-aos="fade-down">
                    <h2 class="section-title">
                        <i class="fas fa-trending-up"></i>
                        Investment Performance Tracker
                    </h2>
                    <p class="section-subtitle">
                        Track and analyze your investment performance with real-time data, benchmarking, and portfolio optimization insights.
                    </p>
                </div>

                <div class="card" data-aos="fade-up" data-aos-delay="200">
                    <div class="card-header">
                        <h3 class="card-title">
                            <i class="fas fa-plus"></i>
                            Add Investment
                        </h3>
                    </div>
                    
                    <form id="investment-form">
                        <div class="form-grid">
                            <div class="form-group">
                                <label class="form-label">Investment Name</label>
                                <input type="text" id="investment-name" class="form-input" placeholder="e.g., HDFC Top 100 Fund">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Investment Type</label>
                                <select id="investment-type" class="form-select">
                                    <option value="mutual-fund"> Mutual Fund</option>
                                    <option value="stock"> Stock</option>
                                    <option value="bond"> Bond</option>
                                    <option value="etf"> ETF</option>
                                    <option value="fd"> Fixed Deposit</option>
                                    <option value="ppf"> PPF</option>
                                    <option value="other"> Other</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Investment Amount ()</label>
                                <input type="number" id="investment-amount" class="form-input" min="0" placeholder="Enter investment amount">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Current Value ()</label>
                                <input type="number" id="current-value" class="form-input" min="0" placeholder="Enter current value">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Purchase Date</label>
                                <input type="date" id="purchase-date" class="form-input">
                            </div>
                        </div>
                        
                        <div style="text-align: center; margin: 1.5rem 0;">
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-plus"></i> Add Investment
                            </button>
                        </div>
                    </form>

                    <div id="investment-list" class="items-list">
                        <!-- Investment items will be displayed here -->
                    </div>

                    <div id="investment-performance" style="display: none;">
                        <!-- Investment performance analysis will be displayed here -->
                    </div>
                </div>
            </section>

            <!-- Financial Calendar -->
            <section id="financial-calendar" class="section">
                <div class="section-header" data-aos="fade-down">
                    <h2 class="section-title">
                        <i class="fas fa-calendar-alt"></i>
                        Smart Financial Calendar
                    </h2>
                    <p class="section-subtitle">
                        Never miss important financial deadlines with our intelligent calendar that tracks tax dates, investment reviews, and financial milestones.
                    </p>
                </div>

                <div class="card" data-aos="fade-up" data-aos-delay="200">
                    <div class="card-header">
                        <h3 class="card-title">
                            <i class="fas fa-calendar-plus"></i>
                            Financial Events & Reminders
                        </h3>
                    </div>
                    
                    <div id="financial-calendar-content">
                        <!-- Calendar content will be displayed here -->
                    </div>
                    
                    <div style="text-align: center; margin: 2rem 0;">
                        <button class="btn btn-primary" onclick="loadFinancialCalendar()">
                            <i class="fas fa-calendar"></i> Load Calendar
                        </button>
                        <button class="btn btn-secondary" onclick="addFinancialEvent()">
                            <i class="fas fa-plus"></i> Add Event
                        </button>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Premium Chatbot -->
    <div class="chatbot-container">
        <button class="chatbot-toggle" onclick="toggleChatbot()">
            <i class="fas fa-robot"></i>
        </button>
        <div class="chatbot-window" id="chatbot-window">
            <div class="chatbot-header">
                <h4><i class="fas fa-robot"></i> AI Financial Assistant</h4>
                <button class="close-btn" onclick="toggleChatbot()"></button>
            </div>
            <div class="chatbot-messages" id="chat-messages">
                <!-- Messages will be added here -->
            </div>
            <div class="chatbot-input">
                <input type="text" id="chat-input" placeholder="Ask me anything about finance..." onkeypress="handleChatKeyPress(event)">
                <button class="btn btn-primary btn-small" onclick="sendMessage()">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- Enhanced Modals -->
    <!-- Save Profile Modal -->
    <div id="save-profile-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title"><i class="fas fa-save"></i> Save Profile</h3>
                <button class="close-btn" onclick="hideProfileModal()">&times;</button>
            </div>
            <form id="save-profile-form">
                <div class="form-group">
                    <label class="form-label">Profile Name <span class="required">*</span></label>
                    <input type="text" id="profile-name-input" class="form-input" placeholder="Enter a memorable name for this profile" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Description</label>
                    <textarea id="profile-description" class="form-input" rows="3" placeholder="Optional description or notes"></textarea>
                </div>
                <div style="text-align: center; margin-top: 1.5rem;">
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-save"></i> Save Profile
                    </button>
                    <button type="button" class="btn btn-secondary" onclick="hideProfileModal()">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Export Modal -->
    <div id="export-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title"><i class="fas fa-download"></i> Export Your Data</h3>
                <button class="close-btn" onclick="hideExportModal()">&times;</button>
            </div>
            <div class="export-options">
                <div class="export-option" onclick="exportCurrentData('json')">
                    <div class="export-icon"><i class="fas fa-file-code"></i></div>
                    <div class="export-title">JSON Data File</div>
                    <div class="export-description">Complete backup for import and data portability</div>
                </div>
                <div class="export-option" onclick="exportCurrentData('pdf')">
                    <div class="export-icon"><i class="fas fa-file-pdf"></i></div>
                    <div class="export-title">PDF Summary</div>
                    <div class="export-description">Professional report format for sharing</div>
                </div>
                <div class="export-option" onclick="exportCurrentData('excel')">
                    <div class="export-icon"><i class="fas fa-file-excel"></i></div>
                    <div class="export-title">Excel Spreadsheet</div>
                    <div class="export-description">Structured data for analysis</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Import Modal -->
    <div id="import-data-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title"><i class="fas fa-upload"></i> Import Your Data</h3>
                <button class="close-btn" onclick="hideImportModal()">&times;</button>
            </div>
            <div class="file-upload" onclick="document.getElementById('import-file-input').click()">
                <div class="upload-icon"><i class="fas fa-cloud-upload-alt"></i></div>
                <div class="upload-text">Click to select or drag & drop your file here</div>
                <div class="upload-formats">Supported formats: JSON, CSV, Excel</div>
                <input type="file" id="import-file-input" accept=".json,.csv,.xlsx" style="display: none;" onchange="handleFileUpload(event)">
            </div>
            <div style="text-align: center; margin-top: 1.5rem;">
                <button class="btn btn-primary" onclick="importFromFile()">
                    <i class="fas fa-upload"></i> Import Data
                </button>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settings-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title"><i class="fas fa-cog"></i> Application Settings</h3>
                <button class="close-btn" onclick="hideSettingsModal()">&times;</button>
            </div>
            <div class="form-group">
                <label class="form-label">Currency</label>
                <select id="currency-setting" class="form-select">
                    <option value="INR"> Indian Rupee (INR)</option>
                    <option value="USD">$ US Dollar (USD)</option>
                    <option value="EUR"> Euro (EUR)</option>
                    <option value="GBP"> British Pound (GBP)</option>
                </select>
            </div>
            <div class="form-group">
                <label class="form-label">Default Inflation Rate (%)</label>
                <input type="number" id="default-inflation" class="form-input" value="6" min="0" max="20" step="0.1">
            </div>
            <div class="form-group">
                <label class="form-label">Auto-save Interval</label>
                <select id="autosave-interval" class="form-select">
                    <option value="30">Every 30 seconds</option>
                    <option value="60">Every minute</option>
                    <option value="300">Every 5 minutes</option>
                    <option value="0">Disabled</option>
                </select>
            </div>
            <div style="text-align: center; margin-top: 1.5rem;">
                <button class="btn btn-primary" onclick="saveSettings()">
                    <i class="fas fa-save"></i> Save Settings
                </button>
                <button class="btn btn-secondary" onclick="hideSettingsModal()">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loading-overlay" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 9999; align-items: center; justify-content: center;">
        <div style="text-align: center; color: white;">
            <div class="loading" style="margin-bottom: 1rem;"></div>
            <div>Processing your request...</div>
        </div>
    </div>

    <!-- AOS Animation Library -->
    <script>
        // Initialize AOS (Animate On Scroll)
        document.addEventListener('DOMContentLoaded', function() {
            AOS.init({
                duration: 800,
                easing: 'ease-in-out',
                once: true,
                offset: 100
            });
        });
    </script>

    <script>
        // Enhanced Global Variables
        let currentProfileId = null;
        let clientData = {
            profileInfo: {},
            basicInfo: {},
            financialStatus: {},
            assets: [],
            loans: [],
            goals: [],
            insuranceProfile: {},
            riskProfile: {},
            assessmentResults: {},
            budgetItems: [],
            investments: [],
            settings: {
                currency: 'INR',
                defaultInflation: 6,
                autoSaveInterval: 60
            }
        };

        // Enhanced Assessment Questions (10 questions for more accuracy)
        let assessmentQuestions = [
            {
                question: "How do you react when your investments lose 20% of their value in a market downturn?",
                options: [
                    { text: "I panic and sell everything immediately to prevent further losses", score: 1 },
                    { text: "I feel very uncomfortable but hold on, hoping for recovery", score: 2 },
                    { text: "I stay calm and continue with my original investment plan", score: 3 },
                    { text: "I see it as an opportunity and invest more money", score: 4 },
                    { text: "I'm completely comfortable and might even increase my risk exposure", score: 5 }
                ]
            },
            {
                question: "What's your primary investment objective?",
                options: [
                    { text: "Preserve my capital at all costs, even if returns are minimal", score: 1 },
                    { text: "Generate steady income with minimal risk to principal", score: 2 },
                    { text: "Achieve moderate growth while maintaining some stability", score: 3 },
                    { text: "Maximize long-term wealth creation with higher risk tolerance", score: 4 },
                    { text: "Pursue maximum returns regardless of volatility or risk", score: 5 }
                ]
            },
            {
                question: "How much of your investment portfolio would you be comfortable putting in high-risk, high-reward investments?",
                options: [
                    { text: "0% - I prefer guaranteed returns only", score: 1 },
                    { text: "10-20% - Just a small portion for potential upside", score: 2 },
                    { text: "30-50% - A balanced approach with moderate risk", score: 3 },
                    { text: "60-80% - Majority in growth investments", score: 4 },
                    { text: "90-100% - Almost everything in high-growth opportunities", score: 5 }
                ]
            },
            {
                question: "What percentage of your monthly income can you comfortably invest without affecting your lifestyle?",
                options: [
                    { text: "Less than 5% - I have very tight finances", score: 1 },
                    { text: "5-10% - I can invest a small amount regularly", score: 2 },
                    { text: "10-20% - I have decent savings capacity", score: 3 },
                    { text: "20-30% - I have good surplus for investments", score: 4 },
                    { text: "More than 30% - I have substantial excess funds", score: 5 }
                ]
            },
            {
                question: "How important is it for you to access your invested money quickly if needed?",
                options: [
                    { text: "Extremely important - I need immediate access anytime", score: 1 },
                    { text: "Very important - I might need access within a few months", score: 2 },
                    { text: "Somewhat important - I can wait 1-2 years if needed", score: 3 },
                    { text: "Not very important - I can wait 3-5 years", score: 4 },
                    { text: "Not important at all - I can lock money for 10+ years", score: 5 }
                ]
            },
            {
                question: "How would you describe your investment knowledge and experience?",
                options: [
                    { text: "Complete beginner - I know very little about investing", score: 1 },
                    { text: "Basic knowledge - I understand simple investment concepts", score: 2 },
                    { text: "Moderate knowledge - I've made some investments before", score: 3 },
                    { text: "Good knowledge - I actively manage my investments", score: 4 },
                    { text: "Expert level - I have extensive investment experience", score: 5 }
                ]
            },
            {
                question: "If you had 1 lakh to invest today, what would you do?",
                options: [
                    { text: "Put it all in a fixed deposit or savings account", score: 1 },
                    { text: "Invest mostly in bonds and a little in mutual funds", score: 2 },
                    { text: "Split equally between debt and equity mutual funds", score: 3 },
                    { text: "Invest mostly in equity funds with some debt allocation", score: 4 },
                    { text: "Put it all in high-growth stocks or aggressive funds", score: 5 }
                ]
            },
            {
                question: "How do you feel about the possibility of losing money in the short term for potentially higher long-term gains?",
                options: [
                    { text: "Completely unacceptable - I cannot afford any losses", score: 1 },
                    { text: "Very uncomfortable - I prefer predictable returns", score: 2 },
                    { text: "Somewhat acceptable - if the potential gains justify it", score: 3 },
                    { text: "Quite comfortable - long-term growth is my priority", score: 4 },
                    { text: "Perfectly fine - I understand volatility is part of growth", score: 5 }
                ]
            },
            {
                question: "What's your typical reaction to financial news about market crashes or economic uncertainty?",
                options: [
                    { text: "I get very anxious and want to move everything to safe investments", score: 1 },
                    { text: "I worry but try to stick to my original plan", score: 2 },
                    { text: "I pay attention but don't make hasty decisions", score: 3 },
                    { text: "I see it as temporary and focus on long-term trends", score: 4 },
                    { text: "I view it as a buying opportunity and consider investing more", score: 5 }
                ]
            },
            {
                question: "How do you prefer to make investment decisions?",
                options: [
                    { text: "I want guaranteed returns and complete safety", score: 1 },
                    { text: "I prefer professional advice and conservative strategies", score: 2 },
                    { text: "I like balanced approaches with professional guidance", score: 3 },
                    { text: "I enjoy researching and making informed decisions myself", score: 4 },
                    { text: "I'm comfortable with complex strategies and high-risk investments", score: 5 }
                ]
            }
        ];

        let currentQuestion = 0;
        let selectedAnswers = [];
        let charts = {};
        let isChatbotOpen = false;
        let autoSaveInterval = null;

        // Enhanced Application Initialization
        document.addEventListener('DOMContentLoaded', function() {
            loadProfiles();
            initializeEventListeners();
            loadSettings();
            startAutoSave();
            loadAssessmentQuestion();
            
            // Initialize tooltips and animations
            setTimeout(() => {
                AOS.refresh();
            }, 100);
        });

        // Enhanced Event Listeners
        function initializeEventListeners() {
            // Form event listeners
            document.getElementById('basic-info-form').addEventListener('submit', function(e) {
                e.preventDefault();
                saveBasicInfo();
            });
            
            document.getElementById('financial-form').addEventListener('submit', function(e) {
                e.preventDefault();
                saveFinancialStatus();
            });
            
            document.getElementById('asset-form').addEventListener('submit', function(e) {
                e.preventDefault();
                addAsset();
            });
            
            document.getElementById('loan-form').addEventListener('submit', function(e) {
                e.preventDefault();
                addLoan();
            });
            
            document.getElementById('goal-form').addEventListener('submit', function(e) {
                e.preventDefault();
                addGoal();
            });
            
            document.getElementById('insurance-form').addEventListener('submit', function(e) {
                e.preventDefault();
                saveInsuranceProfile();
            });
            
            document.getElementById('risk-form').addEventListener('submit', function(e) {
                e.preventDefault();
                saveRiskProfile();
            });
            
            document.getElementById('sip-form').addEventListener('submit', function(e) {
                e.preventDefault();
                calculateAdvancedSIPReturns();
            });
            
            document.getElementById('tax-planning-form').addEventListener('submit', function(e) {
                e.preventDefault();
                generateAdvancedTaxPlan();
            });
            
            document.getElementById('retirement-form').addEventListener('submit', function(e) {
                e.preventDefault();
                calculateAdvancedRetirement();
            });
            
            document.getElementById('save-profile-form').addEventListener('submit', function(e) {
                e.preventDefault();
                saveCurrentProfile();
            });
            
            document.getElementById('loan-calculator-form').addEventListener('submit', function(e) {
                e.preventDefault();
                calculateLoanDetails();
            });
            
            document.getElementById('budget-form').addEventListener('submit', function(e) {
                e.preventDefault();
                addBudgetItem();
            });
            
            document.getElementById('investment-form').addEventListener('submit', function(e) {
                e.preventDefault();
                addInvestment();
            });
        }

        // Enhanced Profile Management
        function loadProfiles() {
            const profiles = JSON.parse(localStorage.getItem('financialPlannerProfiles') || '{}');
            const profilesContainer = document.getElementById('profiles-container');
            const welcomeMessage = document.getElementById('welcome-message');
            const savedProfiles = document.getElementById('saved-profiles');

            if (Object.keys(profiles).length === 0) {
                welcomeMessage.style.display = 'block';
                savedProfiles.style.display = 'none';
            } else {
                welcomeMessage.style.display = 'none';
                savedProfiles.style.display = 'block';
                
                profilesContainer.innerHTML = '';
                
                Object.entries(profiles).forEach(([id, profile]) => {
                    const profileCard = document.createElement('div');
                    profileCard.className = 'profile-item';
                    profileCard.setAttribute('data-aos', 'fade-up');
                    profileCard.innerHTML = `
                        <div class="profile-item-info">
                            <h4>${profile.profileInfo.name || 'Unnamed Profile'}</h4>
                            <p><i class="fas fa-calendar"></i> Created: ${new Date(profile.profileInfo.createdDate).toLocaleDateString()}</p>
                            <p><i class="fas fa-clock"></i> Last Modified: ${new Date(profile.profileInfo.lastModified).toLocaleDateString()}</p>
                            <p><i class="fas fa-info-circle"></i> ${profile.profileInfo.description || 'No description'}</p>
                        </div>
                        <div class="profile-item-actions">
                            <button class="btn btn-primary btn-small" onclick="loadProfile('${id}')">
                                <i class="fas fa-folder-open"></i> Open
                            </button>
                            <button class="btn btn-danger btn-small" onclick="deleteProfile('${id}')">
                                <i class="fas fa-trash"></i> Delete
                            </button>
                        </div>
                    `;
                    profilesContainer.appendChild(profileCard);
                });
                
                // Refresh AOS animations
                AOS.refresh();
            }
        }

        function createNewProfile() {
            currentProfileId = null;
            clientData = {
                profileInfo: {},
                basicInfo: {},
                financialStatus: {},
                assets: [],
                loans: [],
                goals: [],
                insuranceProfile: {},
                riskProfile: {},
                assessmentResults: {},
                budgetItems: [],
                investments: [],
                settings: {
                    currency: 'INR',
                    defaultInflation: 6,
                    autoSaveInterval: 60
                }
            };
            
            document.getElementById('profile-management').style.display = 'none';
            document.getElementById('cover-page').style.display = 'flex';
        }

        function loadProfile(profileId) {
            const profiles = JSON.parse(localStorage.getItem('financialPlannerProfiles') || '{}');
            const profile = profiles[profileId];
            
            if (profile) {
                currentProfileId = profileId;
                clientData = { ...clientData, ...profile };
                
                document.getElementById('profile-management').style.display = 'none';
                document.getElementById('main-app').style.display = 'block';
                
                loadClientData();
                updateHeaderProfileInfo();
                showAlert(`Profile "${profile.profileInfo.name}" loaded successfully!`, 'success');
            }
        }

        function deleteProfile(profileId) {
            if (confirm('Are you sure you want to delete this profile? This action cannot be undone.')) {
                const profiles = JSON.parse(localStorage.getItem('financialPlannerProfiles') || '{}');
                delete profiles[profileId];
                localStorage.setItem('financialPlannerProfiles', JSON.stringify(profiles));
                loadProfiles();
                showAlert('Profile deleted successfully!', 'success');
            }
        }

        function goBackToProfiles() {
            document.getElementById('profile-management').style.display = 'flex';
            document.getElementById('cover-page').style.display = 'none';
            document.getElementById('main-app').style.display = 'none';
            loadProfiles();
        }

        // Enhanced Navigation Functions
        function startPersonalityAssessment() {
            document.getElementById('cover-page').style.display = 'none';
            document.getElementById('main-app').style.display = 'block';
            showMainSection('client-data');
            showSubSection('personality', document.querySelector('[onclick="showSubSection(\'personality\', this)"]'));
            loadAssessmentQuestion();
        }

        function startClientProfiling() {
            document.getElementById('cover-page').style.display = 'none';
            document.getElementById('main-app').style.display = 'block';
            showMainSection('client-data');
            showSubSection('profile', document.querySelector('[onclick="showSubSection(\'profile\', this)"]'));
        }

        function showMainSection(section) {
            // Hide all sub-nav groups
            document.querySelectorAll('[id$="-subnav"]').forEach(nav => nav.style.display = 'none');
            
            // Show selected sub-nav
            document.getElementById(section + '-subnav').style.display = 'flex';
            
            // Update main navigation
            document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            // Show first sub-section of the selected main section
            const firstSubBtn = document.querySelector(`#${section}-subnav .sub-nav-btn`);
            if (firstSubBtn) {
                firstSubBtn.click();
            }
        }

        function showSubSection(section, element) {
            // Hide all sections
            document.querySelectorAll('.section').forEach(sec => sec.classList.remove('active'));
            
            // Show selected section
            document.getElementById(section).classList.add('active');

            // Update sub-navigation
            document.querySelectorAll('.sub-nav-btn').forEach(btn => btn.classList.remove('active'));
            if (element) element.classList.add('active');

            // Auto-save when switching sections
            if (currentProfileId) {
                autoSave();
            }
            
            // Refresh AOS animations for the new section
            setTimeout(() => {
                AOS.refresh();
            }, 100);
        }

        // Enhanced Auto-save System
        function startAutoSave() {
            const interval = clientData.settings?.autoSaveInterval || 60;
            if (interval > 0) {
                autoSaveInterval = setInterval(() => {
                    if (currentProfileId) {
                        autoSave();
                    }
                }, interval * 1000);
            }
        }

        function autoSave() {
            if (!currentProfileId) return;
            
            clientData.profileInfo.lastModified = new Date().toISOString();
            const profiles = JSON.parse(localStorage.getItem('financialPlannerProfiles') || '{}');
            profiles[currentProfileId] = clientData;
            localStorage.setItem('financialPlannerProfiles', JSON.stringify(profiles));
            
            // Update profile status indicator
            const statusIndicator = document.getElementById('current-profile-status');
            if (statusIndicator) {
                statusIndicator.style.color = '#00ff88';
                setTimeout(() => {
                    statusIndicator.style.color = '#aaaaaa';
                }, 1000);
            }
        }

        // Enhanced Assessment Functions
        function loadAssessmentQuestion() {
            if (currentQuestion >= assessmentQuestions.length) {
                completeAssessment();
                return;
            }

            const question = assessmentQuestions[currentQuestion];
            document.getElementById('question-number').textContent = `Question ${currentQuestion + 1} of ${assessmentQuestions.length}`;
            document.getElementById('question-text').textContent = question.question;

            const optionsContainer = document.getElementById('question-options');
            optionsContainer.innerHTML = '';

            question.options.forEach((option, index) => {
                const optionBtn = document.createElement('button');
                optionBtn.className = 'option-btn';
                optionBtn.textContent = option.text;
                optionBtn.onclick = () => selectOption(index);
                optionBtn.setAttribute('data-aos', 'fade-up');
                optionBtn.setAttribute('data-aos-delay', (index * 100).toString());
                optionsContainer.appendChild(optionBtn);
            });

            // Update progress bar
            const progress = ((currentQuestion) / assessmentQuestions.length) * 100;
            document.getElementById('assessment-progress').style.width = progress + '%';

            // Show/hide navigation buttons
            document.getElementById('prev-btn').style.display = currentQuestion > 0 ? 'inline-flex' : 'none';
            document.getElementById('next-btn').style.display = 'none';
            
            // Refresh AOS animations
            AOS.refresh();
        }

        function selectOption(optionIndex) {
            // Remove previous selection
            document.querySelectorAll('.option-btn').forEach(btn => btn.classList.remove('selected'));
            
            // Add selection to clicked option
            event.target.classList.add('selected');
            
            // Store answer
            selectedAnswers[currentQuestion] = {
                questionIndex: currentQuestion,
                optionIndex: optionIndex,
                score: assessmentQuestions[currentQuestion].options[optionIndex].score
            };

            // Show next button
            document.getElementById('next-btn').style.display = 'inline-flex';
        }

        function nextQuestion() {
            if (selectedAnswers[currentQuestion]) {
                currentQuestion++;
                loadAssessmentQuestion();
            }
        }

        function previousQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                loadAssessmentQuestion();
                
                // Restore previous selection
                if (selectedAnswers[currentQuestion]) {
                    const optionBtns = document.querySelectorAll('.option-btn');
                    optionBtns[selectedAnswers[currentQuestion].optionIndex].classList.add('selected');
                    document.getElementById('next-btn').style.display = 'inline-flex';
                }
            }
        }

        function completeAssessment() {
            // Calculate total score
            const totalScore = selectedAnswers.reduce((sum, answer) => sum + answer.score, 0);
            const averageScore = totalScore / assessmentQuestions.length;

            let personalityType, description, insights;

            if (averageScore <= 1.5) {
                personalityType = "Ultra Conservative Investor";
                description = "You prioritize capital preservation above all else. Your investment strategy should focus on guaranteed returns through fixed deposits, government bonds, and conservative debt funds.";
                insights = [
                    " Focus on capital protection strategies",
                    " Consider government securities and high-grade bonds",
                    " Build a substantial emergency fund",
                    " Start with small equity exposure (5-10%) to build confidence"
                ];
            } else if (averageScore <= 2.5) {
                personalityType = "Conservative Investor";
                description = "You prefer stability and steady returns. A balanced approach with emphasis on debt instruments and gradual equity exposure suits your profile.";
                insights = [
                    " Maintain 70% debt, 30% equity allocation",
                    " Focus on large-cap mutual funds for equity exposure",
                    " Consider hybrid funds for balanced growth",
                    " Regular portfolio reviews to build confidence"
                ];
            } else if (averageScore <= 3.5) {
                personalityType = "Moderate Investor";
                description = "You seek balanced growth with moderate risk. A diversified portfolio with equal emphasis on growth and stability aligns with your investment philosophy.";
                insights = [
                    " Balanced 50-60% equity, 40-50% debt allocation",
                    " Include international diversification",
                    " Mix of large-cap and mid-cap funds",
                    " Perfect for long-term SIP strategies"
                ];
            } else if (averageScore <= 4.5) {
                personalityType = "Growth Investor";
                description = "You're comfortable with higher risk for better returns. Equity-focused investments with some debt allocation for stability suits your profile.";
                insights = [
                    " Aggressive 70-80% equity allocation",
                    " Include mid-cap and small-cap exposure",
                    " Consider ELSS funds for tax benefits",
                    " Regular rebalancing for optimal returns"
                ];
            } else {
                personalityType = "Aggressive Investor";
                description = "You're willing to take high risks for maximum returns. Focus on high-growth equity investments, emerging markets, and alternative investments.";
                insights = [
                    " Maximum equity exposure (80-90%)",
                    " Include international and emerging market funds",
                    " Consider alternative investments",
                    " High-risk, high-reward strategies"
                ];
            }

            // Store results
            clientData.assessmentResults = {
                personalityType: personalityType,
                description: description,
                score: averageScore,
                insights: insights,
                completedDate: new Date().toISOString()
            };

            // Display results
            document.getElementById('assessment-questions').style.display = 'none';
            document.getElementById('assessment-results').style.display = 'block';
            document.getElementById('personality-type').textContent = personalityType;
            document.getElementById('personality-description').textContent = description;
            
            // Display insights
            const insightsContent = document.getElementById('insights-content');
            insightsContent.innerHTML = `
                <ul style="list-style: none; padding: 0; margin: 1rem 0;">
                    ${insights.map(insight => `<li style="padding: 0.5rem 0; border-bottom: 1px solid var(--border-gray);">${insight}</li>`).join('')}
                </ul>
            `;

            // Update progress bar to 100%
            document.getElementById('assessment-progress').style.width = '100%';
            
            // Auto-save results
            if (currentProfileId) {
                autoSave();
            }
        }

        function proceedToClientProfiling() {
            showSubSection('profile', document.querySelector('[onclick="showSubSection(\'profile\', this)"]'));
        }

        // Enhanced Basic Info Functions
        function saveBasicInfo() {
            clientData.basicInfo = {
                name: document.getElementById('client-name').value,
                age: parseInt(document.getElementById('client-age').value),
                occupation: document.getElementById('client-occupation').value,
                maritalStatus: document.getElementById('marital-status').value,
                dependents: parseInt(document.getElementById('dependents').value),
                city: document.getElementById('client-city').value,
                incomeRange: document.getElementById('income-range').value,
                educationLevel: document.getElementById('education-level').value,
                lastUpdated: new Date().toISOString()
            };

            displayBasicInfo();
            autoSave();
            showAlert('Profile information saved successfully!', 'success');
        }

        function displayBasicInfo() {
            const info = clientData.basicInfo;
            document.getElementById('basic-info-form').style.display = 'none';
            document.getElementById('saved-basic-info').style.display = 'block';
            
            document.getElementById('basic-info-display').innerHTML = `
                <div class="data-display">
                    <div class="data-row">
                        <span class="data-label"> Name:</span>
                        <span class="data-value">${info.name}</span>
                    </div>
                    <div class="data-row">
                        <span class="data-label"> Age:</span>
                        <span class="data-value">${info.age} years</span>
                    </div>
                    <div class="data-row">
                        <span class="data-label"> Occupation:</span>
                        <span class="data-value">${info.occupation}</span>
                    </div>
                    <div class="data-row">
                        <span class="data-label"> Marital Status:</span>
                        <span class="data-value">${info.maritalStatus}</span>
                    </div>
                    <div class="data-row">
                        <span class="data-label"> Dependents:</span>
                        <span class="data-value">${info.dependents}</span>
                    </div>
                    <div class="data-row">
                        <span class="data-label"> City:</span>
                        <span class="data-value">${info.city}</span>
                    </div>
                    ${info.incomeRange ? `
                    <div class="data-row">
                        <span class="data-label"> Income Range:</span>
                        <span class="data-value">${info.incomeRange}</span>
                    </div>
                    ` : ''}
                    ${info.educationLevel ? `
                    <div class="data-row">
                        <span class="data-label"> Education:</span>
                        <span class="data-value">${info.educationLevel}</span>
                    </div>
                    ` : ''}
                </div>
            `;
        }

        function editBasicInfo() {
            document.getElementById('basic-info-form').style.display = 'block';
            document.getElementById('saved-basic-info').style.display = 'none';
        }

        // Enhanced Financial Status Functions
        function saveFinancialStatus() {
            const monthlyIncome = parseFloat(document.getElementById('monthly-income').value);
            const monthlyExpenses = parseFloat(document.getElementById('monthly-expenses').value);
            const currentSavings = parseFloat(document.getElementById('current-savings').value);
            const annualIncome = parseFloat(document.getElementById('annual-income').value);
            const emergencyTarget = parseInt(document.getElementById('emergency-target').value) || 6;
            const currentDebt = parseFloat(document.getElementById('current-debt').value) || 0;

            clientData.financialStatus = {
                monthlyIncome,
                monthlyExpenses,
                currentSavings,
                annualIncome,
                emergencyTarget,
                currentDebt,
                monthlySavings: monthlyIncome - monthlyExpenses,
                savingsRate: monthlyIncome > 0 ? ((monthlyIncome - monthlyExpenses) / monthlyIncome * 100) : 0,
                emergencyFundNeeded: monthlyExpenses * emergencyTarget,
                debtToIncomeRatio: annualIncome > 0 ? (currentDebt / annualIncome * 100) : 0,
                lastUpdated: new Date().toISOString()
            };

            displayFinancialInfo();
            generateFinancialInsights();
            autoSave();
            showAlert('Financial status analyzed successfully!', 'success');
        }

        function displayFinancialInfo() {
            const info = clientData.financialStatus;
            document.getElementById('financial-form').style.display = 'none';
            document.getElementById('saved-financial-info').style.display = 'block';
            
            document.getElementById('financial-info-display').innerHTML = `
                <div class="data-display">
                    <div class="data-row">
                        <span class="data-label"> Monthly Income:</span>
                        <span class="data-value">${formatCurrency(info.monthlyIncome)}</span>
                    </div>
                    <div class="data-row">
                        <span class="data-label"> Monthly Expenses:</span>
                        <span class="data-value">${formatCurrency(info.monthlyExpenses)}</span>
                    </div>
                    <div class="data-row">
                        <span class="data-label"> Monthly Savings:</span>
                        <span class="data-value">${formatCurrency(info.monthlySavings)}</span>
                    </div>
                    <div class="data-row">
                        <span class="data-label"> Savings Rate:</span>
                        <span class="data-value">${info.savingsRate.toFixed(1)}%</span>
                    </div>
                    <div class="data-row">
                        <span class="data-label"> Current Savings:</span>
                        <span class="data-value">${formatCurrency(info.currentSavings)}</span>
                    </div>
                    <div class="data-row">
                        <span class="data-label"> Annual Income:</span>
                        <span class="data-value">${formatCurrency(info.annualIncome)}</span>
                    </div>
                    <div class="data-row">
                        <span class="data-label"> Emergency Fund Needed:</span>
                        <span class="data-value">${formatCurrency(info.emergencyFundNeeded)}</span>
                    </div>
                    ${info.currentDebt > 0 ? `
                    <div class="data-row">
                        <span class="data-label"> Debt-to-Income Ratio:</span>
                        <span class="data-value">${info.debtToIncomeRatio.toFixed(1)}%</span>
                    </div>
                    ` : ''}
                </div>
            `;
        }

        function generateFinancialInsights() {
            const info = clientData.financialStatus;
            const insights = [];
            
            if (info.savingsRate < 10) {
                insights.push(" Your savings rate is below 10%. Consider reducing expenses or increasing income.");
            } else if (info.savingsRate >= 20) {
                insights.push(" Excellent savings rate! You're on track for strong financial growth.");
            }
            
            if (info.currentSavings < info.emergencyFundNeeded) {
                const shortfall = info.emergencyFundNeeded - info.currentSavings;
                insights.push(` Emergency fund shortfall: ${formatCurrency(shortfall)}. Build this as priority.`);
            }
            
            if (info.debtToIncomeRatio > 40) {
                insights.push(" High debt-to-income ratio. Focus on debt reduction strategies.");
            }
            
            if (info.monthlySavings > 0) {
                const monthsToEmergencyFund = Math.ceil((info.emergencyFundNeeded - info.currentSavings) / info.monthlySavings);
                if (monthsToEmergencyFund > 0) {
                    insights.push(` At current savings rate, you can build emergency fund in ${monthsToEmergencyFund} months.`);
                }
            }
            
            document.getElementById('financial-insights-content').innerHTML = `
                <ul style="list-style: none; padding: 0; margin: 1rem 0;">
                    ${insights.map(insight => `<li style="padding: 0.75rem 0; border-bottom: 1px solid var(--border-gray);">${insight}</li>`).join('')}
                </ul>
            `;
        }

        function editFinancialInfo() {
            document.getElementById('financial-form').style.display = 'block';
            document.getElementById('saved-financial-info').style.display = 'none';
        }

        // Utility Functions
        function formatCurrency(amount) {
            if (amount >= 10000000) {
                return (amount / 10000000).toFixed(2) + ' Cr';
            } else if (amount >= 100000) {
                return (amount / 100000).toFixed(2) + ' L';
            } else if (amount >= 1000) {
                return (amount / 1000).toFixed(0) + 'K';
            }
            return Math.round(amount).toLocaleString('en-IN');
        }

        function showAlert(message, type = 'success') {
            const alertDiv = document.createElement('div');
            alertDiv.className = `alert alert-${type}`;
            alertDiv.style.cssText = `
                position: fixed;
                top: 2rem;
                right: 2rem;
                z-index: 10000;
                min-width: 350px;
                max-width: 500px;
                animation: slideIn 0.3s ease-out;
            `;
            alertDiv.innerHTML = `
                <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'danger' ? 'exclamation-triangle' : 'info-circle'}"></i>
                ${message}
                <button onclick="this.parentElement.remove()" style="float: right; background: none; border: none; color: inherit; font-size: 1.2em; cursor: pointer; padding: 0.25rem;">&times;</button>
            `;
            
            document.body.appendChild(alertDiv);
            
            setTimeout(() => {
                if (alertDiv.parentElement) {
                    alertDiv.style.animation = 'slideOut 0.3s ease-in';
                    setTimeout(() => alertDiv.remove(), 300);
                }
            }, 5000);
        }

        // Enhanced Chatbot Functions
        function toggleChatbot() {
            const chatbotWindow = document.getElementById('chatbot-window');
            isChatbotOpen = !isChatbotOpen;
            chatbotWindow.style.display = isChatbotOpen ? 'block' : 'none';
            
            if (isChatbotOpen && document.getElementById('chat-messages').children.length === 0) {
                addMessageToChat('bot', 'Hello! I\'m your AI Financial Assistant. I can help you with investment strategies, financial planning, tax optimization, and answer any questions about your financial journey. What would you like to know?');
            }
        }

        function sendMessage() {
            const input = document.getElementById('chat-input');
            const message = input.value.trim();
            
            if (message === '') return;

            // Add user message to chat
            addMessageToChat('user', message);
            
            // Clear input
            input.value = '';

            // Show typing indicator
            showTypingIndicator();

            // Simulate bot response with delay
            setTimeout(() => {
                hideTypingIndicator();
                const response = generateAdvancedBotResponse(message);
                addMessageToChat('bot', response);
            }, 1500);
        }

        function addMessageToChat(sender, message) {
            const chatMessages = document.getElementById('chat-messages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `chat-message ${sender}`;
            
            if (sender === 'bot') {
                messageDiv.innerHTML = `
                    <div class="message-avatar">
                        <i class="fas fa-robot"></i>
                    </div>
                    <div class="message-content">${message}</div>
                `;
            } else {
                messageDiv.innerHTML = `
                    <div class="message-content">${message}</div>
                    <div class="message-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                `;
            }
            
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function showTypingIndicator() {
            const chatMessages = document.getElementById('chat-messages');
            const typingDiv = document.createElement('div');
            typingDiv.className = 'chat-message bot typing-indicator';
            typingDiv.id = 'typing-indicator';
            typingDiv.innerHTML = `
                <div class="message-avatar">
                    <i class="fas fa-robot"></i>
                </div>
                <div class="message-content">
                    <div class="typing-dots">
                        <span></span><span></span><span></span>
                    </div>
                </div>
            `;
            chatMessages.appendChild(typingDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function hideTypingIndicator() {
            const typingIndicator = document.getElementById('typing-indicator');
            if (typingIndicator) {
                typingIndicator.remove();
            }
        }

        function generateAdvancedBotResponse(message) {
            const lowerMessage = message.toLowerCase();
            
            // Analyze user's financial data for personalized responses
            const hasFinancialData = clientData.financialStatus && clientData.financialStatus.monthlyIncome;
            const hasAssessment = clientData.assessmentResults && clientData.assessmentResults.personalityType;
            
            if (lowerMessage.includes('sip') || lowerMessage.includes('systematic investment')) {
                const monthlyCapacity = hasFinancialData ? clientData.financialStatus.monthlySavings : 10000;
                return `SIP is an excellent wealth-building strategy! ${hasFinancialData ? `Based on your monthly savings of ${formatCurrency(monthlyCapacity)}, you could start with a SIP of ${formatCurrency(monthlyCapacity * 0.7)} across diversified funds.` : 'I recommend starting with at least 5,000 monthly.'} ${hasAssessment ? `Given your ${clientData.assessmentResults.personalityType} profile, I can suggest specific fund categories that match your risk tolerance.` : 'Complete the assessment for personalized fund recommendations!'} Would you like me to calculate potential returns for different SIP amounts?`;
            }
            
            if (lowerMessage.includes('retirement') || lowerMessage.includes('retire')) {
                const age = hasFinancialData && clientData.basicInfo.age ? clientData.basicInfo.age : 30;
                const yearsToRetirement = 60 - age;
                return `Retirement planning is crucial for financial freedom! ${age ? `At ${age} years, you have approximately ${yearsToRetirement} years until retirement.` : ''} ${hasFinancialData ? `With your current monthly expenses of ${formatCurrency(clientData.financialStatus.monthlyExpenses)}, you'd need approximately ${formatCurrency(clientData.financialStatus.monthlyExpenses * 12 * 25)} as a retirement corpus (25x annual expenses rule).` : 'The general rule is to accumulate 25-30 times your annual expenses.'} Start early to leverage the power of compounding! Would you like me to create a detailed retirement plan?`;
            }
            
            if (lowerMessage.includes('tax') || lowerMessage.includes('80c') || lowerMessage.includes('saving tax')) {
                return `Smart tax planning can save you significant money! Under Section 80C, you can save up to 46,800 annually by investing 1.5 lakhs. Best options include ELSS mutual funds (equity returns + tax benefits), PPF (15-year lock-in), and EPF contributions. ${hasFinancialData && clientData.financialStatus.annualIncome ? `Based on your income level, you could be in the ${clientData.financialStatus.annualIncome > 1000000 ? '30%' : clientData.financialStatus.annualIncome > 500000 ? '20%' : '5%'} tax bracket.` : ''} Section 80D offers additional savings for health insurance premiums. Would you like a detailed tax optimization strategy?`;
            }
            
            if (lowerMessage.includes('emergency') || lowerMessage.includes('fund')) {
                const emergencyNeeded = hasFinancialData ? clientData.financialStatus.emergencyFundNeeded : 300000;
                const currentSavings = hasFinancialData ? clientData.financialStatus.currentSavings : 0;
                return `An emergency fund is your financial safety net! ${hasFinancialData ? `You need ${formatCurrency(emergencyNeeded)} (${clientData.financialStatus.emergencyTarget} months of expenses). You currently have ${formatCurrency(currentSavings)}, so you need ${formatCurrency(Math.max(0, emergencyNeeded - currentSavings))} more.` : 'Aim for 6-12 months of expenses in easily accessible accounts.'} Keep this in liquid funds, savings accounts, or short-term FDs. Build this before investing in market-linked products. Need help creating an emergency fund strategy?`;
            }
            
            if (lowerMessage.includes('insurance') || lowerMessage.includes('life insurance') || lowerMessage.includes('health insurance')) {
                const annualIncome = hasFinancialData ? clientData.financialStatus.annualIncome : 600000;
                return `Insurance is crucial for financial protection! Life insurance should be 10-15 times your annual income. ${hasFinancialData ? `For your income of ${formatCurrency(annualIncome)}, consider ${formatCurrency(annualIncome * 12)} life coverage.` : 'For most people, 50-75 lakhs is a good starting point.'} Health insurance should be minimum 5 lakhs per family member, preferably 10+ lakhs in metro cities. Term insurance is cost-effective for life cover. ${hasFinancialData && clientData.basicInfo.dependents ? `With ${clientData.basicInfo.dependents} dependents, adequate coverage is even more critical.` : ''} Want help calculating your exact insurance needs?`;
            }
            
            if (lowerMessage.includes('goal') || lowerMessage.includes('planning') || lowerMessage.includes('financial plan')) {
                const goalsCount = clientData.goals ? clientData.goals.length : 0;
                return `Goal-based financial planning is the foundation of wealth creation! ${goalsCount > 0 ? `I see you have ${goalsCount} goals defined. Each goal needs a specific investment strategy based on time horizon and risk tolerance.` : 'Start by defining SMART financial goals - Specific, Measurable, Achievable, Relevant, Time-bound.'} ${hasAssessment ? `Your ${clientData.assessmentResults.personalityType} profile suggests specific strategies for each goal type.` : ''} Short-term goals (1-3 years) need debt instruments, medium-term (3-7 years) need balanced funds, and long-term (7+ years) can handle more equity exposure. Ready to create a comprehensive financial plan?`;
            }
            
            if (lowerMessage.includes('risk') || lowerMessage.includes('volatile') || lowerMessage.includes('loss')) {
                const riskProfile = hasAssessment ? clientData.assessmentResults.personalityType : 'Moderate Investor';
                return `Understanding risk is key to successful investing! ${hasAssessment ? `As a ${riskProfile}, your risk tolerance is well-defined. This means you should allocate ${riskProfile.includes('Conservative') ? '20-40%' : riskProfile.includes('Aggressive') ? '70-90%' : '50-70%'} to equity investments.` : 'Complete the risk assessment to get personalized recommendations!'} Remember: Higher risk = Higher potential returns, but also higher volatility. Diversification across asset classes, time horizons, and geographies reduces overall portfolio risk. The key is matching your investments to your risk capacity and tolerance. Want specific risk management strategies?`;
            }
            
            if (lowerMessage.includes('debt') || lowerMessage.includes('loan') || lowerMessage.includes('emi')) {
                const debtRatio = hasFinancialData ? clientData.financialStatus.debtToIncomeRatio : 0;
                return `Smart debt management is crucial for financial health! ${hasFinancialData && debtRatio > 0 ? `Your debt-to-income ratio is ${debtRatio.toFixed(1)}%. ${debtRatio > 40 ? 'This is high - focus on debt reduction as priority.' : 'This is manageable, but still optimize it.'}` : ''} Priority order: 1) Pay off high-interest debt (credit cards, personal loans) first, 2) Consider prepayment for home loans if rate > 8%, 3) Maintain good EMI-to-income ratio (<40%). For home loans, every 1 lakh prepayment can save 2-3 lakhs in interest over the loan tenure. Need a debt optimization strategy?`;
            }
            
            if (lowerMessage.includes('mutual fund') || lowerMessage.includes('mf') || lowerMessage.includes('fund')) {
                const riskProfile = hasAssessment ? clientData.assessmentResults.personalityType : null;
                return `Mutual funds are excellent for diversified investing! ${riskProfile ? `For ${riskProfile}s, I recommend: ${riskProfile.includes('Conservative') ? 'Large-cap funds, hybrid funds, and debt funds' : riskProfile.includes('Aggressive') ? 'Mid-cap, small-cap, and international funds' : 'Balanced mix of large-cap, mid-cap, and debt funds'}.` : ''} Key factors: 1) Expense ratio (<1% for equity, <0.5% for debt), 2) Consistent performance over 3-5 years, 3) Fund manager track record, 4) AUM size (500Cr - 20,000Cr ideal). Always invest through SIP for rupee cost averaging. Want specific fund recommendations based on your profile?`;
            }
            
            if (lowerMessage.includes('stock') || lowerMessage.includes('equity') || lowerMessage.includes('share')) {
                return `Direct equity investing requires knowledge and time! Start with mutual funds if you're new to markets. For direct stocks: 1) Invest only surplus money, 2) Research company fundamentals, 3) Diversify across sectors, 4) Have 3-5 year minimum horizon, 5) Never invest based on tips. Blue-chip stocks are safer but offer moderate returns. Mid and small-cap stocks are riskier but offer higher growth potential. ${hasAssessment && clientData.assessmentResults.personalityType.includes('Conservative') ? 'Given your conservative nature, stick to large-cap stocks or equity mutual funds.' : ''} Want to learn fundamental analysis basics?`;
            }
            
            if (lowerMessage.includes('hello') || lowerMessage.includes('hi') || lowerMessage.includes('hey')) {
                const name = hasFinancialData && clientData.basicInfo.name ? clientData.basicInfo.name : 'there';
                return `Hello ${name}!  I'm your AI Financial Assistant, here to help you make informed financial decisions. ${hasAssessment ? `I see you're a ${clientData.assessmentResults.personalityType} - great choice completing the assessment!` : ''} ${hasFinancialData ? `I have access to your financial profile and can provide personalized advice.` : 'Complete your financial profile for personalized recommendations.'} I can help with investment strategies, retirement planning, tax optimization, insurance planning, and answer any financial questions. What would you like to explore today?`;
            }
            
            if (lowerMessage.includes('help') || lowerMessage.includes('what can you do')) {
                return `I'm here to be your comprehensive financial guide!  Here's how I can help:\n\n **Investment Advice**: SIP strategies, mutual funds, stocks, asset allocation\n **Financial Planning**: Goal-based planning, retirement strategies\n **Tax Optimization**: 80C, 80D, tax-saving investments\n **Insurance Planning**: Life & health insurance calculations\n **Portfolio Analysis**: Risk assessment, rebalancing strategies\n **Banking**: Emergency funds, loan optimization\n **Financial Education**: Concepts, strategies, market insights\n\nJust ask me anything about your financial journey - I'll provide personalized advice based on your profile!`;
            }
            
            // Default personalized response
            const personalizedGreeting = hasFinancialData && clientData.basicInfo.name ? `Hi ${clientData.basicInfo.name}! ` : 'Hello! ';
            return `${personalizedGreeting}That's a great question about financial planning! ${hasAssessment ? `Based on your ${clientData.assessmentResults.personalityType} profile, ` : ''}I'd recommend focusing on building a diversified portfolio aligned with your risk tolerance and financial goals. ${hasFinancialData ? `With your current financial situation, we can create a customized strategy for wealth building.` : 'Complete your financial profile for personalized recommendations.'} Feel free to ask about specific areas like SIP planning, tax saving, retirement planning, insurance, or any other financial topics. I'm here to help you make informed decisions! `;
        }

        function handleChatKeyPress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        // Settings Functions
        function showSettingsModal() {
            document.getElementById('settings-modal').style.display = 'flex';
            loadCurrentSettings();
        }

        function hideSettingsModal() {
            document.getElementById('settings-modal').style.display = 'none';
        }

        function loadCurrentSettings() {
            document.getElementById('currency-setting').value = clientData.settings?.currency || 'INR';
            document.getElementById('default-inflation').value = clientData.settings?.defaultInflation || 6;
            document.getElementById('autosave-interval').value = clientData.settings?.autoSaveInterval || 60;
        }

        function saveSettings() {
            clientData.settings = {
                currency: document.getElementById('currency-setting').value,
                defaultInflation: parseFloat(document.getElementById('default-inflation').value),
                autoSaveInterval: parseInt(document.getElementById('autosave-interval').value)
            };
            
            // Restart auto-save with new interval
            if (autoSaveInterval) {
                clearInterval(autoSaveInterval);
            }
            startAutoSave();
            
            autoSave();
            hideSettingsModal();
            showAlert('Settings saved successfully!', 'success');
        }

        function loadSettings() {
            const savedSettings = localStorage.getItem('financialPlannerSettings');
            if (savedSettings) {
                clientData.settings = { ...clientData.settings, ...JSON.parse(savedSettings) };
            }
        }

        // Modal Functions
        function showProfileModal() {
            document.getElementById('save-profile-modal').style.display = 'flex';
            document.getElementById('profile-name-input').focus();
        }

        function hideProfileModal() {
            document.getElementById('save-profile-modal').style.display = 'none';
            document.getElementById('profile-name-input').value = '';
            document.getElementById('profile-description').value = '';
        }

        function showExportModal() {
            document.getElementById('export-modal').style.display = 'flex';
        }

        function hideExportModal() {
            document.getElementById('export-modal').style.display = 'none';
        }

        function showImportModal() {
            document.getElementById('import-data-modal').style.display = 'flex';
        }

        function hideImportModal() {
            document.getElementById('import-data-modal').style.display = 'none';
        }

        function saveCurrentProfile() {
            if (currentProfileId) {
                autoSave();
                showAlert('Profile updated successfully!', 'success');
            } else {
                showProfileModal();
            }
        }

        // Enhanced Profile Save Function
        function saveProfile() {
            const profileName = document.getElementById('profile-name-input').value.trim();
            const profileDescription = document.getElementById('profile-description').value.trim();
            
            if (!profileName) {
                showAlert('Please enter a profile name', 'danger');
                return;
            }

            const profileId = Date.now().toString();
            const profiles = JSON.parse(localStorage.getItem('financialPlannerProfiles') || '{}');
            
            clientData.profileInfo = {
                name: profileName,
                description: profileDescription,
                createdDate: new Date().toISOString(),
                lastModified: new Date().toISOString()
            };

            profiles[profileId] = clientData;
            localStorage.setItem('financialPlannerProfiles', JSON.stringify(profiles));
            
            currentProfileId = profileId;
            hideProfileModal();
            showAlert(`Profile "${profileName}" saved successfully!`, 'success');
            updateHeaderProfileInfo();
        }

        // Event listener for profile form
        document.getElementById('save-profile-form').addEventListener('submit', function(e) {
            e.preventDefault();
            saveProfile();
        });

        function updateHeaderProfileInfo() {
            const profileInfo = clientData.profileInfo;
            const nameElement = document.getElementById('current-profile-name');
            
            if (profileInfo && profileInfo.name) {
                nameElement.textContent = profileInfo.name;
            } else {
                nameElement.textContent = 'Unsaved Profile';
            }
        }

        // Export Functions
        function exportCurrentData(format) {
            const dataToExport = {
                ...clientData,
                exportDate: new Date().toISOString(),
                version: '2.0',
                appName: 'Financial Planner Pro Advanced'
            };
            
            if (format === 'json') {
                const dataStr = JSON.stringify(dataToExport, null, 2);
                const dataBlob = new Blob([dataStr], { type: 'application/json' });
                const link = document.createElement('a');
                link.href = URL.createObjectURL(dataBlob);
                link.download = `financial_data_${clientData.profileInfo.name || 'profile'}_${new Date().toISOString().split('T')[0]}.json`;
                link.click();
                showAlert('Data exported successfully as JSON!', 'success');
            } else if (format === 'pdf') {
                generatePDFExport();
            } else if (format === 'excel') {
                generateExcelExport();
            }
            
            hideExportModal();
        }

        function generatePDFExport() {
            showAlert('PDF export feature coming soon! This will generate a comprehensive financial report.', 'info');
        }

        function generateExcelExport() {
            showAlert('Excel export feature coming soon! This will create a structured spreadsheet with all your data.', 'info');
        }

        // Import Functions
        function importFromFile() {
            const fileInput = document.getElementById('import-file-input');
            const file = fileInput.files[0];
            
            if (!file) {
                showAlert('Please select a file to import', 'danger');
                return;
            }

            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const importedData = JSON.parse(e.target.result);
                    
                    if (importedData.basicInfo || importedData.financialStatus || importedData.assets) {
                        // Merge imported data with current structure
                        clientData = { ...clientData, ...importedData };
                        
                        // Generate new profile ID
                        currentProfileId = Date.now().toString();
                        clientData.profileInfo.lastModified = new Date().toISOString();
                        
                        // Save imported profile
                        const profiles = JSON.parse(localStorage.getItem('financialPlannerProfiles') || '{}');
                        profiles[currentProfileId] = clientData;
                        localStorage.setItem('financialPlannerProfiles', JSON.stringify(profiles));
                        
                        hideImportModal();
                        showAlert('Data imported successfully! Profile has been created.', 'success');
                        loadClientData();
                        updateHeaderProfileInfo();
                    } else {
                        showAlert('Invalid file format. Please upload a valid Financial Planner Pro export file.', 'danger');
                    }
                } catch (error) {
                    showAlert('Error reading file. Please check if it\'s a valid JSON file.', 'danger');
                }
            };
            
            reader.readAsText(file);
        }

        function handleFileUpload(event) {
            const file = event.target.files[0];
            if (file) {
                // Visual feedback for file selection
                const uploadArea = document.querySelector('.file-upload');
                uploadArea.style.borderColor = '#00ff88';
                uploadArea.querySelector('.upload-text').textContent = `Selected: ${file.name}`;
                
                setTimeout(() => {
                    uploadArea.style.borderColor = '';
                    uploadArea.querySelector('.upload-text').textContent = 'Click to select or drag & drop your file here';
                }, 2000);
            }
        }

        function loadClientData() {
            // Load basic info
            if (clientData.basicInfo && clientData.basicInfo.name) {
                document.getElementById('client-name').value = clientData.basicInfo.name;
                document.getElementById('client-age').value = clientData.basicInfo.age;
                document.getElementById('client-occupation').value = clientData.basicInfo.occupation;
                document.getElementById('marital-status').value = clientData.basicInfo.maritalStatus;
                document.getElementById('dependents').value = clientData.basicInfo.dependents;
                document.getElementById('client-city').value = clientData.basicInfo.city;
                if (clientData.basicInfo.incomeRange) document.getElementById('income-range').value = clientData.basicInfo.incomeRange;
                if (clientData.basicInfo.educationLevel) document.getElementById('education-level').value = clientData.basicInfo.educationLevel;
                displayBasicInfo();
            }

            // Load financial status
            if (clientData.financialStatus && clientData.financialStatus.monthlyIncome) {
                document.getElementById('monthly-income').value = clientData.financialStatus.monthlyIncome;
                document.getElementById('monthly-expenses').value = clientData.financialStatus.monthlyExpenses;
                document.getElementById('current-savings').value = clientData.financialStatus.currentSavings;
                document.getElementById('annual-income').value = clientData.financialStatus.annualIncome;
                if (clientData.financialStatus.emergencyTarget) document.getElementById('emergency-target').value = clientData.financialStatus.emergencyTarget;
                if (clientData.financialStatus.currentDebt) document.getElementById('current-debt').value = clientData.financialStatus.currentDebt;
                displayFinancialInfo();
                generateFinancialInsights();
            }

            // Load risk profile
            if (clientData.riskProfile && clientData.riskProfile.experience) {
                document.getElementById('investment-experience').value = clientData.riskProfile.experience;
                document.getElementById('risk-tolerance').value = clientData.riskProfile.tolerance;
                document.getElementById('investment-horizon').value = clientData.riskProfile.horizon;
                document.getElementById('monthly-investment').value = clientData.riskProfile.monthlyInvestment;
                displayRiskInfo();
            }

            // Load insurance profile
            if (clientData.insuranceProfile && Object.keys(clientData.insuranceProfile).length > 0) {
                if (clientData.insuranceProfile.currentLifeInsurance) document.getElementById('current-life-insurance').value = clientData.insuranceProfile.currentLifeInsurance;
                if (clientData.insuranceProfile.currentHealthInsurance) document.getElementById('current-health-insurance').value = clientData.insuranceProfile.currentHealthInsurance;
                if (clientData.insuranceProfile.outstandingLoans) document.getElementById('outstanding-loans').value = clientData.insuranceProfile.outstandingLoans;
                if (clientData.insuranceProfile.familyExpenses) document.getElementById('family-expenses').value = clientData.insuranceProfile.familyExpenses;
                if (clientData.insuranceProfile.incomeYears) document.getElementById('income-years').value = clientData.insuranceProfile.incomeYears;
                displayInsuranceInfo();
            }

            // Update lists and calculations
            updateAssetsList();
            updateLoansList();
            updateGoalsList();
            updateNetWorth();
            updateHeaderProfileInfo();
            
            // Refresh charts if they exist
            setTimeout(() => {
                updateAllCharts();
            }, 500);
        }

        // Placeholder functions for features to be implemented
        function addAsset() {
            const asset = {
                id: Date.now(),
                type: document.getElementById('asset-type').value,
                name: document.getElementById('asset-name').value,
                value: parseFloat(document.getElementById('asset-value').value)
            };
            clientData.assets.push(asset);
            updateAssetsList();
            updateNetWorth();
            document.getElementById('asset-form').reset();
            autoSave && autoSave();
        }

        function updateAssetsList() {
            const container = document.getElementById('assets-list');
            if (!container) return;
            container.innerHTML = '';
            (clientData.assets || []).forEach(asset => {
                const item = document.createElement('div');
                item.className = 'list-item';
                item.innerHTML = `
                    <div class="item-info">
                        <div class="item-title">${asset.name}</div>
                        <div class="item-details">${asset.type} - ${formatCurrency(asset.value)}</div>
                    </div>
                    <div class="item-actions">
                        <button class="btn btn-small btn-secondary" onclick="editAsset(${asset.id})">
                            <i class="fas fa-edit"></i> Edit
                        </button>
                        <button class="btn btn-small btn-danger" onclick="deleteAsset(${asset.id})">
                            <i class="fas fa-trash"></i> Delete
                        </button>
                    </div>
                `;
                container.appendChild(item);
            });
            updateAssetChart && updateAssetChart();
        }

        function deleteAsset(id) {
            if (confirm('Are you sure you want to delete this asset?')) {
                clientData.assets = clientData.assets.filter(asset => asset.id !== id);
                updateAssetsList();
                updateNetWorth();
                autoSave && autoSave();
            }
        }

        function editAsset(id) {
            const asset = clientData.assets.find(a => a.id === id);
            if (asset) {
                document.getElementById('asset-type').value = asset.type;
                document.getElementById('asset-name').value = asset.name;
                document.getElementById('asset-value').value = asset.value;
                deleteAsset(id);
            }
        }

        function addLoan() {
            const loan = {
                id: Date.now(),
                type: document.getElementById('loan-type').value,
                amount: parseFloat(document.getElementById('loan-amount').value),
                rate: parseFloat(document.getElementById('loan-rate').value),
                tenure: parseFloat(document.getElementById('loan-tenure').value)
            };
            clientData.loans.push(loan);
            updateLoansList();
            updateNetWorth();
            document.getElementById('loan-form').reset();
            autoSave && autoSave();
        }

        function updateLoansList() {
            const container = document.getElementById('loans-list');
            if (!container) return;
            container.innerHTML = '';
            (clientData.loans || []).forEach(loan => {
                const totalInterest = calculateTotalInterest(loan.amount, loan.rate, loan.tenure);
                const item = document.createElement('div');
                item.className = 'list-item';
                item.innerHTML = `
                    <div class="item-info">
                        <div class="item-title">${loan.type} Loan</div>
                        <div class="item-details">
                            Amount: ${formatCurrency(loan.amount)} | Rate: ${loan.rate}% | 
                            Tenure: ${loan.tenure} years | Total Interest: ${formatCurrency(totalInterest)}
                        </div>
                    </div>
                    <div class="item-actions">
                        <button class="btn btn-small btn-secondary" onclick="editLoan(${loan.id})">
                            <i class="fas fa-edit"></i> Edit
                        </button>
                        <button class="btn btn-small btn-danger" onclick="deleteLoan(${loan.id})">
                            <i class="fas fa-trash"></i> Delete
                        </button>
                    </div>
                `;
                container.appendChild(item);
            });
        }

        function deleteLoan(id) {
            if (confirm('Are you sure you want to delete this loan?')) {
                clientData.loans = clientData.loans.filter(loan => loan.id !== id);
                updateLoansList();
                updateNetWorth();
                autoSave && autoSave();
            }
        }

        function editLoan(id) {
            const loan = clientData.loans.find(l => l.id === id);
            if (loan) {
                document.getElementById('loan-type').value = loan.type;
                document.getElementById('loan-amount').value = loan.amount;
                document.getElementById('loan-rate').value = loan.rate;
                document.getElementById('loan-tenure').value = loan.tenure;
                deleteLoan(id);
            }
        }

        function calculateTotalInterest(principal, rate, tenure) {
            const monthlyRate = rate / 12 / 100;
            const months = tenure * 12;
            const emi = (principal * monthlyRate * Math.pow(1 + monthlyRate, months)) / (Math.pow(1 + monthlyRate, months) - 1);
            return (emi * months) - principal;
        }

        function updateNetWorth() {
            const totalAssets = (clientData.assets || []).reduce((sum, asset) => sum + asset.value, 0);
            const totalLiabilities = (clientData.loans || []).reduce((sum, loan) => sum + loan.amount, 0);
            const netWorth = totalAssets - totalLiabilities;
            document.getElementById('total-assets').textContent = '' + formatCurrency(totalAssets);
            document.getElementById('total-liabilities').textContent = '' + formatCurrency(totalLiabilities);
            document.getElementById('net-worth').textContent = '' + formatCurrency(netWorth);
        }

        function updateAssetChart() {
            const ctx = document.getElementById('asset-chart');
            if (!ctx) return;
            if (window.charts && window.charts.assetChart) {
                window.charts.assetChart.destroy();
            }
            const assetTypes = {};
            (clientData.assets || []).forEach(asset => {
                if (!assetTypes[asset.type]) {
                    assetTypes[asset.type] = 0;
                }
                assetTypes[asset.type] += asset.value;
            });
            const labels = Object.keys(assetTypes);
            const data = Object.values(assetTypes);
            const colors = ['#fff', '#ccc', '#888', '#444', '#222'];
            if (labels.length === 0) {
                ctx.getContext('2d').clearRect(0, 0, ctx.width, ctx.height);
                return;
            }
            window.charts = window.charts || {};
            window.charts.assetChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: labels,
                    datasets: [{
                        data: data,
                        backgroundColor: colors.slice(0, labels.length),
                        borderWidth: 2,
                        borderColor: '#333'
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            labels: {
                                color: '#ffffff'
                            }
                        }
                    }
                }
            });
        }

        function addGoal() {
            const todayAmount = parseFloat(document.getElementById('goal-amount').value);
            const timeframe = parseFloat(document.getElementById('goal-timeframe').value);
            const inflationRate = parseFloat(document.getElementById('goal-inflation').value) / 100;
            const futureValue = todayAmount * Math.pow(1 + inflationRate, timeframe);
            const goal = {
                id: Date.now(),
                name: document.getElementById('goal-name').value,
                todayAmount: todayAmount,
                futureAmount: futureValue,
                timeframe: timeframe,
                inflationRate: inflationRate * 100,
                priority: document.getElementById('goal-priority').value,
                progress: 0
            };
            clientData.goals.push(goal);
            updateGoalsList();
            document.getElementById('goal-form').reset();
            document.getElementById('goal-inflation').value = 6;
            autoSave && autoSave();
        }

        function updateGoalsList() {
            const container = document.getElementById('goals-list');
            if (!container) return;
            container.innerHTML = '';
            (clientData.goals || []).forEach(goal => {
                const item = document.createElement('div');
                item.className = 'list-item';
                item.innerHTML = `
                    <div class="item-info">
                        <div class="item-title">${goal.name}</div>
                        <div class="item-details">
                            Today's Value: ${formatCurrency(goal.todayAmount)} | 
                            Future Value: ${formatCurrency(goal.futureAmount)} | 
                            Timeframe: ${goal.timeframe} years | 
                            Priority: ${goal.priority}
                        </div>
                        <div class="item-details" style="margin-top: 5px;">
                            Inflation Rate: ${goal.inflationRate}% | 
                            Required Monthly SIP: ${formatCurrency(calculateRequiredSIP(goal.futureAmount, goal.timeframe))}
                        </div>
                    </div>
                    <div class="item-actions">
                        <button class="btn btn-small btn-secondary" onclick="editGoal(${goal.id})">
                            <i class="fas fa-edit"></i> Edit
                        </button>
                        <button class="btn btn-small btn-danger" onclick="deleteGoal(${goal.id})">
                            <i class="fas fa-trash"></i> Delete
                        </button>
                    </div>
                `;
                container.appendChild(item);
            });
        }

        function deleteGoal(id) {
            if (confirm('Are you sure you want to delete this goal?')) {
                clientData.goals = clientData.goals.filter(goal => goal.id !== id);
                updateGoalsList();
                autoSave && autoSave();
            }
        }

        function editGoal(id) {
            const goal = clientData.goals.find(g => g.id === id);
            if (goal) {
                document.getElementById('goal-name').value = goal.name;
                document.getElementById('goal-amount').value = goal.todayAmount;
                document.getElementById('goal-timeframe').value = goal.timeframe;
                document.getElementById('goal-inflation').value = goal.inflationRate;
                document.getElementById('goal-priority').value = goal.priority;
                deleteGoal(id);
            }
        }

        function calculateRequiredSIP(futureValue, years) {
            const monthlyReturn = 0.12 / 12;
            const months = years * 12;
            return futureValue * monthlyReturn / (Math.pow(1 + monthlyReturn, months) - 1);
        }

        function calculateLifeInsurance() {
            const familyExpenses = parseFloat(document.getElementById('family-expenses').value) || 0;
            const outstandingLoans = parseFloat(document.getElementById('outstanding-loans').value) || 0;
            const incomeYears = parseFloat(document.getElementById('income-years').value) || 10;
            const lifeInsuranceNeed = (familyExpenses * incomeYears) + outstandingLoans;
            clientData.insuranceProfile.lifeInsuranceNeed = lifeInsuranceNeed;
            document.getElementById('insurance-results').style.display = 'block';
            document.getElementById('insurance-results').innerHTML = `
                <div class="alert alert-info">
                    <h4><i class="fas fa-calculator"></i> Life Insurance Calculation</h4>
                    <div class="data-display">
                        <div class="data-row">
                            <span class="data-label">Family Annual Expenses:</span>
                            <span class="data-value">${formatCurrency(familyExpenses)}</span>
                        </div>
                        <div class="data-row">
                            <span class="data-label">Income Replacement Years:</span>
                            <span class="data-value">${incomeYears} years</span>
                        </div>
                        <div class="data-row">
                            <span class="data-label">Outstanding Loans:</span>
                            <span class="data-value">${formatCurrency(outstandingLoans)}</span>
                        </div>
                        <div class="data-row" style="border-top: 2px solid #17a2b8; font-weight: bold;">
                            <span class="data-label">Recommended Life Insurance:</span>
                            <span class="data-value">${formatCurrency(lifeInsuranceNeed)}</span>
                        </div>
                    </div>
                </div>
            `;
        }

        function calculateHealthInsurance() {
            const familyExpenses = parseFloat(document.getElementById('family-expenses').value) || 0;
            const healthInsuranceNeed = Math.max(500000, familyExpenses * 0.1);
            clientData.insuranceProfile.healthInsuranceNeed = healthInsuranceNeed;
            const existingContent = document.getElementById('insurance-results').innerHTML;
            document.getElementById('insurance-results').style.display = 'block';
            document.getElementById('insurance-results').innerHTML = existingContent + `
                <div class="alert alert-info" style="margin-top: 15px;">
                    <h4><i class="fas fa-calculator"></i> Health Insurance Calculation</h4>
                    <div class="data-display">
                        <div class="data-row">
                            <span class="data-label">Family Annual Expenses:</span>
                            <span class="data-value">${formatCurrency(familyExpenses)}</span>
                        </div>
                        <div class="data-row">
                            <span class="data-label">Calculation Method:</span>
                            <span class="data-value">Max(5,00,000, 10% of annual expenses)</span>
                        </div>
                        <div class="data-row" style="border-top: 2px solid #17a2b8; font-weight: bold;">
                            <span class="data-label">Recommended Health Insurance:</span>
                            <span class="data-value">${formatCurrency(healthInsuranceNeed)}</span>
                        </div>
                    </div>
                </div>
            `;
        }

        function saveInsuranceProfile() {
            clientData.insuranceProfile = {
                currentLifeInsurance: parseFloat(document.getElementById('current-life-insurance').value) || 0,
                currentHealthInsurance: parseFloat(document.getElementById('current-health-insurance').value) || 0,
                outstandingLoans: parseFloat(document.getElementById('outstanding-loans').value) || 0,
                familyExpenses: parseFloat(document.getElementById('family-expenses').value) || 0,
                incomeYears: parseFloat(document.getElementById('income-years').value) || 10,
                lifeInsuranceNeed: clientData.insuranceProfile.lifeInsuranceNeed || 0,
                healthInsuranceNeed: clientData.insuranceProfile.healthInsuranceNeed || 0
            };
            displayInsuranceInfo();
            autoSave && autoSave();
        }

        function displayInsuranceInfo() {
            const info = clientData.insuranceProfile;
            document.getElementById('insurance-form').style.display = 'none';
            document.getElementById('saved-insurance-info').style.display = 'block';
            document.getElementById('insurance-info-display').innerHTML = `
                <div class="data-display">
                    <div class="data-row">
                        <span class="data-label">Current Life Insurance:</span>
                        <span class="data-value">${formatCurrency(info.currentLifeInsurance)}</span>
                    </div>
                    <div class="data-row">
                        <span class="data-label">Current Health Insurance:</span>
                        <span class="data-value">${formatCurrency(info.currentHealthInsurance)}</span>
                    </div>
                    <div class="data-row">
                        <span class="data-label">Recommended Life Insurance:</span>
                        <span class="data-value">${formatCurrency(info.lifeInsuranceNeed)}</span>
                    </div>
                    <div class="data-row">
                        <span class="data-label">Recommended Health Insurance:</span>
                        <span class="data-value">${formatCurrency(info.healthInsuranceNeed)}</span>
                    </div>
                    <div class="data-row">
                        <span class="data-label">Life Insurance Gap:</span>
                        <span class="data-value">${formatCurrency(Math.max(0, info.lifeInsuranceNeed - info.currentLifeInsurance))}</span>
                    </div>
                    <div class="data-row">
                        <span class="data-label">Health Insurance Gap:</span>
                        <span class="data-value">${formatCurrency(Math.max(0, info.healthInsuranceNeed - info.currentHealthInsurance))}</span>
                    </div>
                </div>
            `;
        }

        function editInsuranceInfo() {
            document.getElementById('insurance-form').style.display = 'block';
            document.getElementById('saved-insurance-info').style.display = 'none';
        }

        function saveRiskProfile() {
            clientData.riskProfile = {
                experience: document.getElementById('investment-experience').value,
                tolerance: document.getElementById('risk-tolerance').value,
                horizon: document.getElementById('investment-horizon').value,
                monthlyInvestment: parseFloat(document.getElementById('monthly-investment').value)
            };
            displayRiskInfo();
            autoSave && autoSave();
        }

        function displayRiskInfo() {
            const info = clientData.riskProfile;
            document.getElementById('risk-form').style.display = 'none';
            document.getElementById('saved-risk-info').style.display = 'block';
            document.getElementById('risk-info-display').innerHTML = `
                <div class="data-display">
                    <div class="data-row">
                        <span class="data-label">Investment Experience:</span>
                        <span class="data-value">${info.experience}</span>
                    </div>
                    <div class="data-row">
                        <span class="data-label">Risk Tolerance:</span>
                        <span class="data-value">${info.tolerance}</span>
                    </div>
                    <div class="data-row">
                        <span class="data-label">Investment Horizon:</span>
                        <span class="data-value">${info.horizon}</span>
                    </div>
                    <div class="data-row">
                        <span class="data-label">Monthly Investment Capacity:</span>
                        <span class="data-value">${formatCurrency(info.monthlyInvestment)}</span>
                    </div>
                </div>
            `;
        }

        function editRiskInfo() {
            document.getElementById('risk-form').style.display = 'block';
            document.getElementById('saved-risk-info').style.display = 'none';
        }

        function updateAllCharts() {
            updateAssetChart && updateAssetChart();
            // Add more chart updates as needed
        }

        function generateDetailedReport() {
            const doc = new jspdf.jsPDF('p', 'mm', 'a4');
            let y = 15;
            doc.setFont('helvetica', 'bold');
            doc.setFontSize(20);
            doc.text('Detailed Financial Report', 105, y, { align: 'center' });
            y += 10;
            doc.setLineWidth(0.5);
            doc.line(15, y, 195, y);
            y += 8;
            doc.setFontSize(14);
            doc.setFont('helvetica', 'bold');
            doc.text('Personal Information', 15, y);
            y += 7;
            doc.setFont('helvetica', 'normal');
            doc.setFontSize(12);
            doc.text(`Name: ${clientData.basicInfo?.name || 'Not provided'}`, 15, y);
            y += 6;
            doc.text(`Age: ${clientData.basicInfo?.age || 'Not provided'}`, 15, y);
            y += 6;
            doc.text(`Occupation: ${clientData.basicInfo?.occupation || 'Not provided'}`, 15, y);
            y += 6;
            doc.text(`City: ${clientData.basicInfo?.city || 'Not provided'}`, 15, y);
            y += 10;
            doc.setFont('helvetica', 'bold');
            doc.setFontSize(14);
            doc.text('Financial Summary', 15, y);
            y += 7;
            doc.setFont('helvetica', 'normal');
            doc.setFontSize(12);
            doc.text(`Monthly Income: ${formatCurrency(clientData.financialStatus?.monthlyIncome || 0)}`, 15, y);
            y += 6;
            doc.text(`Monthly Expenses: ${formatCurrency(clientData.financialStatus?.monthlyExpenses || 0)}`, 15, y);
            y += 6;
            doc.text(`Monthly Savings: ${formatCurrency((clientData.financialStatus?.monthlyIncome || 0) - (clientData.financialStatus?.monthlyExpenses || 0))}`, 15, y);
            y += 6;
            doc.text(`Current Savings: ${formatCurrency(clientData.financialStatus?.currentSavings || 0)}`, 15, y);
            y += 10;
            doc.setFont('helvetica', 'bold');
            doc.setFontSize(14);
            doc.text('Net Worth Analysis', 15, y);
            y += 7;
            doc.setFont('helvetica', 'normal');
            doc.setFontSize(12);
            const totalAssets = (clientData.assets||[]).reduce((sum, asset) => sum + asset.value, 0);
            const totalLiabilities = (clientData.loans||[]).reduce((sum, loan) => sum + loan.amount, 0);
            const netWorth = totalAssets - totalLiabilities;
            doc.text(`Total Assets: ${formatCurrency(totalAssets)}`, 15, y);
            y += 6;
            doc.text(`Total Liabilities: ${formatCurrency(totalLiabilities)}`, 15, y);
            y += 6;
            doc.text(`Net Worth: ${formatCurrency(netWorth)}`, 15, y);
            y += 10;
            doc.setFont('helvetica', 'bold');
            doc.setFontSize(14);
            doc.text('Financial Goals', 15, y);
            y += 7;
            doc.setFont('helvetica', 'normal');
            doc.setFontSize(12);
            if ((clientData.goals||[]).length > 0) {
                (clientData.goals||[]).forEach(goal => {
                    doc.text(`Goal: ${goal.name}`, 15, y);
                    y += 6;
                    doc.text(`  Target Amount: ${formatCurrency(goal.futureAmount)} | Timeframe: ${goal.timeframe} years | Priority: ${goal.priority}`, 15, y);
                    y += 6;
                    if (y > 270) { doc.addPage(); y = 15; }
                });
            } else {
                doc.text('No financial goals defined yet.', 15, y);
                y += 6;
            }
            y += 4;
            doc.setFont('helvetica', 'bold');
            doc.setFontSize(14);
            doc.text('Investment Profile', 15, y);
            y += 7;
            doc.setFont('helvetica', 'normal');
            doc.setFontSize(12);
            doc.text(`Personality Type: ${clientData.assessmentResults?.personalityType || 'Not assessed'}`, 15, y);
            y += 6;
            doc.text(`Risk Tolerance: ${clientData.riskProfile?.tolerance || 'Not defined'}`, 15, y);
            y += 6;
            doc.text(`Investment Horizon: ${clientData.riskProfile?.horizon || 'Not defined'}`, 15, y);
            y += 6;
            doc.text(`Monthly Investment Capacity: ${formatCurrency(clientData.riskProfile?.monthlyInvestment || 0)}`, 15, y);
            doc.save('Financial_Report.pdf');
        }

        function downloadDetailedReport() {
            const doc = new jspdf.jsPDF('p', 'mm', 'a4');
            let y = 15;
            doc.setFont('helvetica', 'bold');
            doc.setFontSize(20);
            doc.text('Detailed Financial Report', 105, y, { align: 'center' });
            y += 10;
            doc.setLineWidth(0.5);
            doc.line(15, y, 195, y);
            y += 8;
            doc.setFontSize(14);
            doc.setFont('helvetica', 'bold');
            doc.text('Personal Information', 15, y);
            y += 7;
            doc.setFont('helvetica', 'normal');
            doc.setFontSize(12);
            doc.text(`Name: ${clientData.basicInfo?.name || 'Not provided'}`, 15, y);
            y += 6;
            doc.text(`Age: ${clientData.basicInfo?.age || 'Not provided'}`, 15, y);
            y += 6;
            doc.text(`Occupation: ${clientData.basicInfo?.occupation || 'Not provided'}`, 15, y);
            y += 6;
            doc.text(`City: ${clientData.basicInfo?.city || 'Not provided'}`, 15, y);
            y += 10;
            doc.setFont('helvetica', 'bold');
            doc.setFontSize(14);
            doc.text('Financial Summary', 15, y);
            y += 7;
            doc.setFont('helvetica', 'normal');
            doc.setFontSize(12);
            doc.text(`Monthly Income: ${formatCurrency(clientData.financialStatus?.monthlyIncome || 0)}`, 15, y);
            y += 6;
            doc.text(`Monthly Expenses: ${formatCurrency(clientData.financialStatus?.monthlyExpenses || 0)}`, 15, y);
            y += 6;
            doc.text(`Monthly Savings: ${formatCurrency((clientData.financialStatus?.monthlyIncome || 0) - (clientData.financialStatus?.monthlyExpenses || 0))}`, 15, y);
            y += 6;
            doc.text(`Current Savings: ${formatCurrency(clientData.financialStatus?.currentSavings || 0)}`, 15, y);
            y += 10;
            doc.setFont('helvetica', 'bold');
            doc.setFontSize(14);
            doc.text('Net Worth Analysis', 15, y);
            y += 7;
            doc.setFont('helvetica', 'normal');
            doc.setFontSize(12);
            const totalAssets = (clientData.assets||[]).reduce((sum, asset) => sum + asset.value, 0);
            const totalLiabilities = (clientData.loans||[]).reduce((sum, loan) => sum + loan.amount, 0);
            const netWorth = totalAssets - totalLiabilities;
            doc.text(`Total Assets: ${formatCurrency(totalAssets)}`, 15, y);
            y += 6;
            doc.text(`Total Liabilities: ${formatCurrency(totalLiabilities)}`, 15, y);
            y += 6;
            doc.text(`Net Worth: ${formatCurrency(netWorth)}`, 15, y);
            y += 10;
            doc.setFont('helvetica', 'bold');
            doc.setFontSize(14);
            doc.text('Financial Goals', 15, y);
            y += 7;
            doc.setFont('helvetica', 'normal');
            doc.setFontSize(12);
            if ((clientData.goals||[]).length > 0) {
                (clientData.goals||[]).forEach(goal => {
                    doc.text(`Goal: ${goal.name}`, 15, y);
                    y += 6;
                    doc.text(`  Target Amount: ${formatCurrency(goal.futureAmount)} | Timeframe: ${goal.timeframe} years | Priority: ${goal.priority}`, 15, y);
                    y += 6;
                    if (y > 270) { doc.addPage(); y = 15; }
                });
            } else {
                doc.text('No financial goals defined yet.', 15, y);
                y += 6;
            }
            y += 4;
            doc.setFont('helvetica', 'bold');
            doc.setFontSize(14);
            doc.text('Investment Profile', 15, y);
            y += 7;
            doc.setFont('helvetica', 'normal');
            doc.setFontSize(12);
            doc.text(`Personality Type: ${clientData.assessmentResults?.personalityType || 'Not assessed'}`, 15, y);
            y += 6;
            doc.text(`Risk Tolerance: ${clientData.riskProfile?.tolerance || 'Not defined'}`, 15, y);
            y += 6;
            doc.text(`Investment Horizon: ${clientData.riskProfile?.horizon || 'Not defined'}`, 15, y);
            y += 6;
            doc.text(`Monthly Investment Capacity: ${formatCurrency(clientData.riskProfile?.monthlyInvestment || 0)}`, 15, y);
            doc.save('Financial_Report.pdf');
        }

        function generateInvestmentReport() {
            showAlert('Investment strategy report generation is being enhanced. Coming soon!', 'info');
        }

        function downloadInvestmentReport() {
            showAlert('Investment strategy report download is being enhanced. Coming soon!', 'info');
        }

        function generateActionPlan() {
            showAlert('Action plan report generation is being enhanced. Coming soon!', 'info');
        }

        function downloadActionPlan() {
            showAlert('Action plan report download is being enhanced. Coming soon!', 'info');
        }

        function generateRiskReport() {
            showAlert('Risk assessment report generation is being enhanced. Coming soon!', 'info');
        }

        function downloadRiskReport() {
            showAlert('Risk assessment report download is being enhanced. Coming soon!', 'info');
        }

        function generateExecutiveSummary() {
            showAlert('AI-powered executive summary is being enhanced. Coming soon!', 'info');
        }

        function generateQuickInsights() {
            showAlert('Quick insights generation is being enhanced. Coming soon!', 'info');
        }

        function refreshAlerts() {
            showAlert('Refreshing alerts...', 'info');
            // Implement logic to refresh alerts
        }

        function configureAlerts() {
            showAlert('Configuring alerts...', 'info');
            // Implement logic to configure alerts
        }

        function calculateLoanDetails() {
            showAlert('Calculating loan details...', 'info');
            // Implement logic to calculate loan details
        }

        function calculateAdvancedSIPReturns() {
            showAlert('Calculating advanced SIP returns...', 'info');
            // Implement logic to calculate advanced SIP returns
        }

        function calculateAdvancedRetirement() {
            showAlert('Calculating advanced retirement needs...', 'info');
            // Implement logic to calculate advanced retirement needs
        }

        function generateAdvancedTaxPlan() {
            showAlert('Generating advanced tax plan...', 'info');
            // Implement logic to generate advanced tax plan
        }

        function addBudgetItem() {
            showAlert('Adding budget item...', 'info');
            // Implement logic to add budget item
        }

        function addInvestment() {
            showAlert('Adding investment...', 'info');
            // Implement logic to add investment
        }

        function analyzeAdvancedPortfolio() {
            showAlert('Analyzing advanced portfolio...', 'info');
            // Implement logic to analyze advanced portfolio
        }

        function generateRebalancingPlan() {
            showAlert('Generating rebalancing plan...', 'info');
            // Implement logic to generate rebalancing plan
        }

        function performRiskAnalysis() {
            showAlert('Performing risk analysis...', 'info');
            // Implement logic to perform risk analysis
        }

        function loadFinancialCalendar() {
            showAlert('Loading financial calendar...', 'info');
            // Implement logic to load financial calendar
        }

        function addFinancialEvent() {
            showAlert('Adding financial event...', 'info');
            // Implement logic to add financial event
        }

        // Add CSS for typing indicator animation
        const typingCSS = `
            .typing-dots {
                display: inline-flex;
                gap: 4px;
                align-items: center;
            }
            .typing-dots span {
                width: 8px;
                height: 8px;
                border-radius: 50%;
                background: #aaa;
                animation: typing 1.4s infinite ease-in-out;
            }
            .typing-dots span:nth-child(2) {
                animation-delay: 0.2s;
            }
            .typing-dots span:nth-child(3) {
                animation-delay: 0.4s;
            }
            @keyframes typing {
                0%, 60%, 100% {
                    transform: translateY(0);
                    opacity: 0.5;
                }
                30% {
                    transform: translateY(-10px);
                    opacity: 1;
                }
            }
            @keyframes slideIn {
                from {
                    transform: translateX(100%);
                    opacity: 0;
                }
                to {
                    transform: translateX(0);
                    opacity: 1;
                }
            }
            @keyframes slideOut {
                from {
                    transform: translateX(0);
                    opacity: 1;
                }
                to {
                    transform: translateX(100%);
                    opacity: 0;
                }
            }
            .profile-status {
                color: #aaaaaa;
                margin-left: 0.5rem;
            }
        `;
        
        const styleSheet = document.createElement('style');
        styleSheet.textContent = typingCSS;
        document.head.appendChild(styleSheet);

        // Animation on scroll for cards/sections
        function animateOnScroll() {
          const animatedEls = document.querySelectorAll('.card, .profile-card, .cover-content, .section');
          animatedEls.forEach(el => {
            const rect = el.getBoundingClientRect();
            if (rect.top < window.innerHeight - 60) {
              el.setAttribute('data-animate', '');
            }
          });
        }
        window.addEventListener('scroll', animateOnScroll);
        window.addEventListener('DOMContentLoaded', animateOnScroll);

        // Expandable card logic
        function setupExpandableCards() {
          document.querySelectorAll('.expandable-card').forEach(card => {
            card.addEventListener('click', function(e) {
              // Prevent toggling if clicking inside expand-content (e.g., on a button)
              if (e.target.closest('.expand-content')) return;
              card.classList.toggle('expanded');
            });
          });
        }
        window.addEventListener('DOMContentLoaded', setupExpandableCards);

        // After clicking on 'Client Profile', scroll to the 'Assessment' section
        function scrollToAssessment() {
          const assessmentSection = document.getElementById('personality');
          if (assessmentSection) {
            assessmentSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
          }
        }
        // Attach scrollToAssessment to the Client Profile button if it exists
        window.addEventListener('DOMContentLoaded', function() {
          const clientProfileBtn = document.querySelector("button[onclick*='showMainSection']");
          if (clientProfileBtn) {
            clientProfileBtn.addEventListener('click', function() {
              setTimeout(scrollToAssessment, 400); // Wait for section to show
            });
          }
        });
    </script>
</body>
<!-- Version: 1.0.0 | Last updated: 2025-07-23 18:24 -->
<footer style="text-align:center;color:#888;font-size:12px;margin:24px 0 8px 0;">Version: 1.0.0 | Last updated: 2025-07-23 18:24</footer>
</html>
